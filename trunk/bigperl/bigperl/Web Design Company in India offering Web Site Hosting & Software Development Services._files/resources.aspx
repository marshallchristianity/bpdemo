
	

   	MyLiveChat.RawLangJson={UI_INSERTIMAGE:"Insert Image",UI_SUPPORT_HEADLINE:"Live Chat",CHATLOG:"Chat Log:",RATING:"Rating:",COMMENT:"Comment:",NAME:"Name:",EMAIL:"Email:",ENQUIRY:"Message:",SUBJECT:"Subject:",QUESTION:"Question:",DEPARTMENT:"Department:",STARTCHAT:"Start Chat...",FEEDBACK:"Post Feedback",OK:"OK",CANCEL:"Cancel",UI_SEND:"Send",MAXIMIZE:"Maximize",MINIMIZE:"Minimize",CLOSE:"Close",SAYS:"says:",INPUTREQUIRED:"Input Required:",MAXFILESIZEMUSTBELESSTHAN:"Maximum file upload size is set to ",FEEDBACKEMAILTITLEFORMAT:"MyLiveChat : {0} sent an Offline Message. Title: {2}",FEEDBACKEMAILCONTENTFORMAT:"\x0D\x0A		User Name:{0}\x0D\x0A\x0D\x0A		Email Address:{1}\x0D\x0A\x0D\x0A		Title:{2}\x0D\x0A\x0D\x0A\x0D\x0A		Details:\x0D\x0A\x0D\x0A		{3}\x0D\x0A	",UI_LOADING:"Loading",UI_SUPPORT_READY:"Agent {0} has received your message and will be right with you.",UI_SUPPORT_WAIT:"Please wait while we route your call to the next available agent who will help you with your question: \x22{0}\x22.",UI_SUPPORT_NOAGENT:"No agent online! Please leave an offline message.",UI_SUPPORT_TITLE:"Live Support",UI_SUPPORT_WELCOME:"Thank you for contacting us. To serve you better please provide the following information:",UI_WAITING_TITLE:"LiveChat",UI_WAITING_HEADLINE:"Live Chat",UI_WAITING_MESSAGE:"Thank you for contacting us. To serve you better please provide the following information:",UI_SURVEY_HEADLINE:"Live Chat Exit Survey",UI_SURVEY_MESSAGE:"To help us serve you better, please provide some information concerning your chat experience.",UI_SURVEY_LOGTOOLTIP:"Email me a copy of this chat",UI_SURVEY_CLOSEBUTTON:"I want to close this chat window",UI_SURVEY_RATE1:"Very Bad",UI_SURVEY_RATE2:"Bad",UI_SURVEY_RATE3:"Normal",UI_SURVEY_RATE4:"Good",UI_SURVEY_RATE5:"Very Good",UI_FEEDBACK_TITLE:"Offline Message",UI_FEEDBACK_HEADLINE:"Leave a message",UI_FEEDBACK_MESSAGE:"There are no agents available right now to take your call. Please leave a message and we will get back to you soon.",UI_INLINE_ONLINE:"Chat now",UI_INLINE_OFFLINE:"Leave a message",UI_USER_ADDED:"{0} joined the room.",UI_USER_REMOVED_BYCLIENT:"{0} left this room.",UI_USER_REMOVED_EXPIRED:"{0} left this room..",UI_INPUTEMAILADDRESS:"Please input your email address.",UI_SENDEMAILOK:"Your e-mail was sent successfully!",UI_USER_TYPING:" is typing a message.",UI_INVALIDIDENTITY:"You are not authorized to perform the current operation.",UI_CHATCOMMANDS:"Chat Commands",UI_ALERT:"System Alert",UI_CONNECTION_MISSINGNICKNAME:"The nickname field is empty.",UI_CONNECTION_SHORTNICKNAME:"Your nickname is too short.",UI_CONNECTION_LONGNICKNAME:"Your nickname is too long.",UI_CONNECTION_CONNECTING:"Please wait, connecting to server...",UI_CONNECTION_ERROR:"The connection to the chat server is lost. {0}",UI_CONNECTION_READY:"Connected!",UI_CONNECTION_DISCONNECT:"You\x27re disconnected.",UI_CONNECTION_CANCELLED:"Connection Cancelled.",UI_CONNECTION_NOPLACE:"The server is reset and this chat room is deleted. Please close the window and try again.",UI_CONNECTION_REMOVED:"You are removed from the channel due to inactivity.",UI_CONNECTION_REJECTED:"The server have rejected your connection.",UI_CONNECTION_NOCONNECTION:"The connection to the chat server is lost.",UI_CONNECTION_IDEXISTS:"You are already logged in this chat application. A new connection cannot be established.",UI_CONNECTION_ANOTHERLOGIN:"This account has been signed into another device.",UI_CONNECTION_KICK:"You Have Been Banned By Administrator.",UI_BOLD:"Bold",UI_ITALIC:"Italic",UI_UNDERLINE:"Underline",UI_HELP:"Help",UI_CONTROLPANEL:"Control Panel",UI_EMOTION:"Insert Emotions",UI_FONTCOLOR:"Font Color",UI_AVATAR:"Pick an avatar",UI_CHANGEPICTURE:"Change your display picture",UI_PLAYSOUND:"Play sounds",UI_SELECTSKIN:"Select a skin",UI_FONT:"Font",UI_SIZE:"Size",UI_SAVE:"Save Chat Transcript",UI_CLOSE:"Close",UI_MAIL:"Email Chat Transcript",UI_PRINT:"Print Chat Transcript",UI_FILE:"Send a File",UI_SOUNDON:"Sound On. Click to turn off",UI_SOUNDOFF:"Sound Off. Click to turn on",UI_SAVECHATLOG:"To save the messages, right click the page and choose \x27save as\x27",UI_BUZZ:"Nudge",UI_SENDFILE:"Send File",UI_HISTORY:"View message history",UI_SEND_NOFILE:"Please select a file to send!",UI_SEND_A_FILE_SUBTITLE:"Select a file to send, then click send button.",UI_SEND_UPLOADSUCCESSFULLY:"File uploaded successfully!",UI_ALLOWEDFILES:"Allowed file types:",UI_FEATUREDISABLED:"This feature has been disabled by the system administrator!",UI_SPELL:"Spell Check",UI_LINK:"Send a Link",UI_CANNEDMSG:"Canned messages",CS_MENU_CONSOLE:"Console",CS_MENU_CONNECT:"Connect",CS_MENU_DISCONNECT:"Disconnect",CS_MENU_REFRESH:"Refresh",CS_MENU_EXIT:"Exit",CS_MENU_STATUS:"Status",CS_MENU_ONLINE:"Online",CS_MENU_AWAY:"Away",CS_MENU_BUSY:"Busy",CS_MENU_APPEAROFFLINE:"Appear Offline",CS_MENU_TOOLS:"Tools",CS_MENU_VIEWVISITORS:"View Visitors",CS_MENU_VIEWRECORDS:"View Chat Records",CS_MENU_VIEWMESSAGES:"View Offline Messages",CS_MENU_TESTNOTIFY:"Test Notification",CS_MENU_OPTIONS:"Options",CS_MENU_HELP:"Help",CS_MENU_HOME:"MyLiveChat Home",CS_MENU_LICENSE:"License Information",CS_MENU_ABOUT:"About",CS_MENU_CONNECTED:"Connected",CS_MENU_DISCONNECTED:"Disconnected",CS_MENU_VISITORS:"Visitors",CS_MENU_MESSAGES:"Messages",CS_MENU_DAYSREMAIN:"{0} days remaining",CS_MENU_HOURSREMAIN:"{0} hours remaining",CS_TITLE_LICENSEINFO:"License Information",CS_MENU_CONNECTTING:"Connecting",CS_MENU_CONNECTNOW:"Connect Now",CS_LABEL_PLEASESETONLINE:"Please change status to online if you are ready to chat.",CS_LABEL_DISCONNECTED:"You have been disconnected from server.",CS_LABEL_NETWORKDELAY:"Network delay: {0} seconds.",CS_TITLE_DEPARTMENTS:"Departments/Agents",CS_TITLE_VISITORS:"Current Visitors",CS_TITLE_REQUESTQUEUE:"Request Queue",CS_TITLE_CONVERSATIONS:"Conversations",CS_MENU_ADDAGENT:"Add agent",CS_MESSAGE_TYPEAGENTNAME:"Please input the new agent name:",CS_MENU_ADDDEPARTMENT:"Create a department",CS_MENU_RENAMEDEPARTMENT:"Rename this department",CS_MESSAGE_TYPEDEPARTMENTNAME:"Please input the new department name:",CS_MENU_DELETEDEPARTMENT:"Delete this department",CS_MESSAGE_DEPARTMENTEXISTS:"Username already exists.",CS_MENU_CHATWITH:"Private Chat",CS_MENU_REMOVEAGENT:"Remove Agent",CS_MESSAGE_REMOVEAGENT:"Are you sure you want to remove this agent: {0}?",CS_MENU_CHANGEOFFLINE:"Change To Offline",CS_MENU_MOREACTIONS:"More Options",CS_LABEL_EMPTYQUEUE:"Request Queue is Empty.",CS_COLUMN_DETAILS:"Details",CS_COLUMN_SESSIONS:"Sessions",CS_COLUMN_MAP:"GeoMap",CS_COLUMN_NAME:"Name",CS_COLUMN_DEPARTMENT:"Department",CS_COLUMN_WAITDURATION:"Duration",CS_COLUMN_DOMAIN:"Domain",CS_COLUMN_LOCATION:"Location",CS_MENU_DETAILS:"Details",CS_MENU_INVITE:"Invite",CS_TITLE_INVITEPROMPT:"Chat Invitation:",CS_MESSAGE_TYPEINVITEMESSAGE:"Please type the invitation text:",CS_MENU_JOIN:"Join Chat",CS_MENU_OPENURL:"Open URL",CS_MENU_SHOWMAP:"Show Map",CS_MENU_USERINFO:"User Info",CS_MENU_ACCEPT:"Accept",CS_MENU_BAN:"Ban User",CS_MENU_INVITEAGENT:"Invite",CS_MENU_TRANSFERAGENT:"Transfer",CS_MENU_ACCEPTFIRST:"Accept First",CS_MENU_AUTOACCEPT:"Auto Accept",CS_COLUMN_VISITORID:"Contact ID",CS_COLUMN_STATUS:"Status",CS_COLUMN_DURATION:"Duration",CS_COLUMN_VISITS:"Visits",CS_COLUMN_PLATFORM:"Platform",CS_COLUMN_REFERRER:"Referrer",CS_COLUMN_KEYWORD:"Keyword",CS_COLUMN_RESOLUTION:"Resolution",CS_COLUMN_BROWSER:"Browser",CS_COLUMN_EMAIL:"Email",CS_COLUMN_AGENT:"Agent",CS_COLUMN_PRODUCT:"Product",CS_COLUMN_CUSTOMDATA:"Custom Data",CS_COLUMN_CONTEXTDATA:"Context Data",CS_COLUMN_COUNTRY:"Country",CS_COLUMN_CITY:"City",CS_COLUMN_QUESTION:"Question",CS_STATUS_INVITING:"Inviting",CS_STATUS_CHATTING:"Chatting",CS_STATUS_NOASK:"Rejected",CS_STATUS_WAITING:"Waiting",CS_STATUS_VISITORAWAY:"Away",CS_STATUS_VISITORONLINE:"Online",CS_LABEL_TRACKALL:"Tracking all visitors",CS_LABEL_TRACKNONE:"Stop tracking visitors",CS_LABEL_SHOWDETAILS:"Show Details",CS_LABEL_FREEZELIST:"Freeze",CS_LABEL_CONSOLETAB:"Console",CS_TITLE_CONFIRMDISCONNECT:"Disconnecting",CS_MESSAGE_CONFIRMDISCONNECT:"Are you sure you want to disconnect from mylivechat?",CS_TITLE_SPELLCHECK:"Spell Check",CS_MESSAGE_PROMPTEMAIL:"Please specify the email address:",CS_TITLE_WELCOME:"MyLiveChat",CS_MESSAGE_WELCOME:"Welcome to MyLiveChat Agent Console.",CS_MESSAGE_CHOOSEALLOWNOTIFICATION:"Please select \x27Allow\x27 to enable desktop notifications for mylivechat agent console.",CS_MESSAGE_NOVISITOR1:"Your online visitor list is empty.",CS_MESSAGE_NOVISITOR2:"Website currently has no visitors.",CS_MESSAGE_NOVISITOR3:"Probably you have not installed the chat button or monitor code on your web sites yet.",CS_MESSAGE_NOVISITOR4:"If you want to test the visitor list now, please visit \x3Ca href=\x27{0}\x27 target=\x27_blank\x27\x3Ethis demo page\x3C/a\x3E,(Also see \x3Ca href=\x27{1}\x27 target=\x27_blank\x27\x3Ewebsite integration\x3C/a\x3E)",CS_TITLE_NETWORKISSUE:"Network Connection Problem",CS_MESSAGE_NETWORKDROPPED:"The connection to the chat server is lost, reconnecting...",CS_MESSAGE_RECONNECTING:"Connection to the chat server failed, reconnecting...",CS_MESSAGE_VISITORISWAITING:"A visitor called {0} is waiting for live chat. ",CS_MESSAGE_VISITORWAITFORSEC:"Visitor: {0} has been waiting for {1} seconds.",CS_MESSAGE_ADDUSERNOTFOUND:"Agent name not found. Please try again.",CS_MESSAGE_AGENTACCEPTCUSTOMER:"Agent {0} has accepted the customer {1}.",CS_MESSAGE_CUSTOMERJOINCHAT:"Customer {0} has joined the chat.",CS_MESSAGE_INVITECUSTOMEREXPIRED:"Unable to invite {0}: Invitation timed out",CS_MESSAGE_INVITECUSTOMERINVALID:"Unable to invite {0}: Invalid status.",CS_MESSAGE_AGENTINVITECUSTOMER:"Agent {0} has invited the customer {1}.",CS_MESSAGE_AGENTTRANSFERAGENT:"Agent {0} is transfering {1} to {2}.",CS_MESSAGE_AGENTINVITEAGENT:"Agent {0} is inviting {1} to chat with {2}.",CS_MESSAGE_TRANSFERTOYOU:"Agent {0} is transfering {1} to you.",CS_MESSAGE_INVITETOYOU:"Agent {0} is inviting you to chat with {1}.",CS_MESSAGE_CUSTOMERREJECTEDINVITE:"Customer {0} has rejected the chat invitation from {1}.",CS_MESSAGE_CUSTOMERACCEPTEDINVITE:"Customer {0} has accepted the chat invitation from {1}.",CS_MESSAGE_NEWOFFLINEMESSAGE:"Customer {0} sent an offline message: {1}.",CS_MESSAGE_NOGEOINFO:"No Map Data Available.",CS_MESSAGE_NOTIFYNEWVISITOR:" A visitor from {0} just entered your website. ",CS_TITLE_FEEDBACK:"Offline Messages",CS_MENU_HISTORY:"History",CS_MENU_SENDEMAIL:"Send Email",CS_MENU_MARKREADALL:"Mark all as read",CS_MENU_DELETEALL:"Delete all",CS_MENU_DELETE:"Delete",CS_MENU_MARKREAD:"Read",CS_LABEL_CONTENT:"Content:",CS_LABEL_JTABLELENGTH:"Show {0} entries",CS_LABEL_JTABLEINFO:"Showing {0} to {1} of {2} entries",CS_LABEL_JTABLEEMPTYFOOT:"No data available.",CS_LABEL_JTABLESEARCH:"Search:",CS_LABEL_JTABLEPROCESS:"Processing...",CS_LABEL_JTABLEFILTER:"(filtered from {0} total entries)",CS_LABEL_JTABLETO:"to",CS_LABEL_JTABLEOF:"of",CS_LABEL_JTABLEEMPTY:"Empty",CS_LABEL_JTABLEPAGE1:"First",CS_LABEL_JTABLEPAGE2:"Previous",CS_LABEL_JTABLEPAGE3:"Next",CS_LABEL_JTABLEPAGE4:"Last",CS_COLUMN_TIME:"Time",CS_COLUMN_SUBJECT:"Subject",CS_COLUMN_READ:"Read",CS_TITLE_CONFIRM:"Confirm",CS_MESSAGE_DELETEFEEDBACK:"Are you sure you want to delete this offline message?",CS_MESSAGE_DELETEFEEDBACKALL:"Are you sure you want to delete all offline messages?",CS_MESSAGE_DELETECHATRECORD:"Are you sure you want to delete all of the search results?",CS_COLUMN_START:"Start",CS_COLUMN_ACTIVE:"Active",CS_COLUMN_END:"End",CS_COLUMN_CUSTOMER:"Customer",CS_COLUMN_CULTURE:"Culture",CS_COLUMN_RATING:"Rating",CS_TITLE_CUSTOMERPROFILE:"Profile",CS_LABEL_PROFILE:"Profile",CS_LABEL_NOTEITEM:"Note",CS_LABEL_NOTECONTENT:"Content",CS_MENU_CUSTOMERNOTE:"Customer Note",CS_MENU_SESSIONNOTE:"Session Note",CS_MENU_SEARCH:"Search",CS_MENU_SAVE:"Save",CS_MENU_DELETENOTE:"Delete Note",CS_MENU_ADDNOTE:"Add Note",CS_TITLE_CHATRECORD:"Chat Records",CS_TITLE_ADDCUSTOMERNOTE:"New Note",CS_TITLE_ADDSESSIONNOTE:"New Note",CS_MENU_BANLIST:"Block List",CS_MESSAGE_DELETEFEEDBACKADMINONLY:"Only administrator can delete the offline messages.",CS_MESSAGE_SAVENOTE:"Do you want to save changes before closing this window?",SS_MESSAGE_INVALIDHCCID:"Invalid MyLiveChat Account ID.",SS_MESSAGE_INVALIDPASSWORD:"The password you entered is incorrect. Please try again (make sure your caps lock is off).",SS_MESSAGE_AGENTDISABLED:"This account is Locked. You can\x27t Log in.",SS_MESSAGE_AGENTNOTLOGIN:"Not login or session expired.",SS_MESSAGE_NOMATCHAGENTACCOUNT:"The site ID you entered does not belong to any account.",SS_MESSAGE_INVALIDAGENTACCOUNT:"Invalid Agent Account.",SS_MESSAGE_REACHMAXAGENTCOUNT:"User cannot log in. Please note that the maximum number of concurrent agents of your account is {0}. You can increase the maximum number of concurrent agents by upgrading your plan.",SS_MESSAGE_PLEASETYPENAME:"Please input your name.",SS_MESSAGE_PLEASETYPEEMAIL:"Please input your email.",SS_MESSAGE_PLEASETYPESUBJECT:"Please type your subject.",SS_MESSAGE_PLEASETYPEQUESTION:"Please type your question.",SS_MESSAGE_THANKSFORFEEDBACK:"Thank you for contacting us. Our customer service representative will reply to you soon.",SS_MESSAGE_NAMEWRONGLENGTH:"Your name is too long or too short.",SS_MESSAGE_SELECTDEPARTMENT:"Please choose a department.",SS_MESSAGE_PLEASETYPECUSTOM:"Please input {0}",SS_MESSAGE_NODEPONLINEAGENT:"There is no agent available in department {0}. Please choose a different department.",CS_LABEL_AGENTEMAILADDRESS:"Agent email address:",CS_LABEL_NOTIFICATIONEMAILS:"Send an email notification to this address when a visitor requests a chat:",CS_LABEL_GREETINGMESSAGE:"Default greeting message when accepting a new live chat:",CS_LABEL_DISABLEAUDIO:"Disable audio alerts",CS_LABEL_DISABLENOTIFY:"Disable notification messages",CS_LABEL_HIDECONSOLENUMBER:"Hide new message counter in console chat tab",CS_LABEL_HIDESESSIONNUMBER:"Hide new message counter in visitor chat tab",CS_LABEL_NOTIFYNEWVISITOR:"Notify me when a visitor enters the website",CS_LABEL_DROPAUTORECONNECT:"Automatically reconnect when connection is dropped",CS_LABEL_SECONDS:"Seconds",CS_LABEL_FILTERLOCATION:"When the customer location is (usa,london,..):",CS_LABEL_FILTEROFURL:"When current page URL contains (a,b,c,..):",CS_LABEL_FILTEROFREF:"When referring page URL contains ((a,b,c..):",CS_LABEL_ONLYWHENONLINE:"Only when my status is online and ready.",CS_LABEL_TITLEAUTOACCEPT:"Auto accept a visitor if this visitor has waited for seconds",CS_LABEL_TITLEAUTOINVITE:"Auto invite a visitor if this visitor has stayed for seconds",CS_LABEL_ALLDEPARTMENT:"All",CS_MENU_LANGUAGES:"Languages",CS_MENU_LANGTEXT:"Text Translation",CS_MENU_LANGAUTO:"Use default settings",CS_MESSAGE_DELETESESSION:"Are you sure you want to delete this chat record?",CS_MESSAGE_DELETESESSIONADMINONLY:"Only administrator can delete the chat records.",CS_MESSAGE_DELETESESSIONSEARCH:"Please perform a search when deleting the chat records.",CS_MESSAGE_DELETESESSIONCHANGE:"Search results changed. Please perform another search then deleting the records.",CS_MESSAGE_INCORRECTEMAIL:"The email address is incorrect.",CS_MESSAGE_EMAILSENT:"The email has been sent.",UI_ACCEPTINVITE:"Chat Now",UI_REJECTINVITE:"No Thanks",CS_MENU_EXPORT:"Export",CS_INLINECONFIRM_COLLAPSE:"Collapse",CS_INLINECONFIRM_EXIT:"Exit Chat",CS_INLINECONFIRM_MESSAGE:"Do you want to collapse the chat window or exit the chat session?",TYPEMESSAGEHERE:"Type your message here...",WordExceededMaxLen:"One word in your message exceeded the maximum length of a single word",MsgExceededMaxLen:"Message exceeded the maximum length of a message"};


   	MyLiveChat.RawTemplate="\x3Cjsml xmlns=\x22http://cutesoft.net/jsml\x22\x3E\x3Cpanel jsml-class=\x22frameskin_base\x22 xmlns=\x22http://cutesoft.net/jsml\x22\x3E\x3C/panel\x3E\x3Cpanel jsml-class=\x22frameskin_resizepanel\x22 xmlns=\x22http://cutesoft.net/jsml\x22\x3E\x3Cmethod name=\x22get_sizetarget\x22\x3E\x3C![CDATA[\x0D\x0A			for(var p=self;p;p=p.get_jsml_parent())\x0D\x0A			{\x0D\x0A				if(p.instance_of(\x22frameskin_base\x22))\x0D\x0A					return p._skinsizetarget;\x0D\x0A			}\x0D\x0A			]]\x3E\x3C/method\x3E\x3Cproperty name=\x22resize_cursor\x22\x3E\x3Cget\x3E\x0D\x0A				return this._resize_cursor||\x22\x22;\x0D\x0A			\x3C/get\x3E\x3Cset\x3E\x0D\x0A				this._resize_cursor=value;\x0D\x0A			\x3C/set\x3E\x3C/property\x3E\x3Cproperty name=\x22resize_edge\x22\x3E\x3Cget\x3E\x0D\x0A				return this._resize_edge||[0,0,0,0];\x0D\x0A			\x3C/get\x3E\x3Cset\x3E\x0D\x0A				var arr=value.split(\x27,\x27);\x0D\x0A				this._resize_edge=arr;\x0D\x0A				self._stt=parseInt(arr[0]);\x0D\x0A				self._str=parseInt(arr[1]);\x0D\x0A				self._stb=parseInt(arr[2]);\x0D\x0A				self._stl=parseInt(arr[3]);\x0D\x0A			\x3C/set\x3E\x3C/property\x3E\x3Cattach name=\x22mousehover\x22\x3E\x0D\x0A			var target=self.get_sizetarget();\x0D\x0A			if(target)self.set_cursor(self.get_resize_cursor());\x0D\x0A		\x3C/attach\x3E\x3Cattach name=\x22mousedown\x22 arguments=\x22jevent,devent\x22\x3E\x0D\x0A			var target=self.get_sizetarget();\x0D\x0A			if(target)target.start_resize(devent,self._stt,self._str,self._stb,self._stl);\x0D\x0A		\x3C/attach\x3E\x3C/panel\x3E\x3Cpanel jsml-class=\x22frameskin_default\x22 jsml-base=\x22frameskin_base\x22 xmlns=\x22http://cutesoft.net/jsml\x22\x3E\x3Cpanel dock=\x22top\x22 height=\x2228\x22 border_color=\x22#D1D9DB\x22 border_style=\x22solid\x22 border_width=\x220,1,0,1\x22\x3E\x3Cpanel dock=\x22fill\x22 padding=\x223,0,0,12\x22 background=\x22transparent url(../JSML/skins/Default/top_middle.png)\x22\x3E\x3Clabel jsml-local=\x22lbt\x22 vertical_align=\x22middle\x22 dock=\x22fill\x22\x3E\x3Cinitialize\x3E\x0D\x0A						self._element.style.fontWeight=\x22bold\x22;\x0D\x0A					\x3C/initialize\x3E\x3Cattach name=\x22mousedown\x22 arguments=\x22jevent,devent\x22\x3E\x0D\x0A						if(instance._skinmovetarget)instance._skinmovetarget.start_move_offset(devent);\x0D\x0A					\x3C/attach\x3E\x3C/label\x3E\x3C/panel\x3E\x3C/panel\x3E\x3Cpanel dock=\x22fill\x22 border_color=\x22#D1D9DB\x22 border_style=\x22solid\x22 border_width=\x221\x22\x3E\x3C/panel\x3E\x3Cmethod name=\x22get_framepadding\x22\x3E\x0D\x0A			return [29,1,1,1];\x0D\x0A		\x3C/method\x3E\x3Cproperty name=\x22text\x22\x3E\x3Cget\x3E\x0D\x0A				return lbt.get_text();\x0D\x0A			\x3C/get\x3E\x3Cset arguments=\x22value\x22\x3E\x0D\x0A				lbt.set_text(value);\x0D\x0A			\x3C/set\x3E\x3C/property\x3E\x3C/panel\x3E\x3Cpanel jsml-class=\x22frameskin_blue\x22 jsml-base=\x22frameskin_base\x22 border_width=\x221\x22 border_color=\x22#788EC0\x22 xmlns=\x22http://cutesoft.net/jsml\x22\x3E\x3Cpanel dock=\x22top\x22 height=\x2230\x22 background=\x22transparent url(../JSML/skins/Blue/blue-bg.png) repeat-x\x22\x3E\x3Cpanel dock=\x22top\x22 height=\x224\x22\x3E\x3Cpanel dock=\x22left\x22 width=\x224\x22 jsml-base=\x22frameskin_resizepanel\x22 resize_cursor=\x22nw-resize\x22 resize_edge=\x221,0,0,1\x22 /\x3E\x3Cpanel dock=\x22right\x22 width=\x224\x22 jsml-base=\x22frameskin_resizepanel\x22 resize_cursor=\x22ne-resize\x22 resize_edge=\x221,1,0,0\x22 /\x3E\x3Cpanel dock=\x22fill\x22 width=\x224\x22 jsml-base=\x22frameskin_resizepanel\x22 resize_cursor=\x22n-resize\x22 resize_edge=\x221,0,0,0\x22 /\x3E\x3C/panel\x3E\x3Clabel jsml-local=\x22lbt\x22 vertical_align=\x22middle\x22 dock=\x22fill\x22 margin=\x220,0,0,20\x22\x3E\x3Cinitialize\x3E\x0D\x0A					self._element.style.fontWeight=\x22bold\x22;\x0D\x0A				\x3C/initialize\x3E\x3Cattach name=\x22mousedown\x22 arguments=\x22jevent,devent\x22\x3E\x0D\x0A					if(instance._skinmovetarget)instance._skinmovetarget.start_move_offset(devent);\x0D\x0A				\x3C/attach\x3E\x3C/label\x3E\x3Cpanel top=\x229\x22 right=\x229\x22 width=\x2216\x22 height=\x2216\x22 cursor=\x22pointer\x22 tooltip=\x22Close\x22 background=\x22transparent url(../JSML/skins/Blue/blue-close.gif) no-repeat\x22\x3E\x3Cattach name=\x22click\x22\x3E\x0D\x0A					frameskin_blue.invoke_event(\x22clickclose\x22);\x0D\x0A				\x3C/attach\x3E\x3C/panel\x3E\x3C/panel\x3E\x3Cpanel dock=\x22fill\x22\x3E\x3Cpanel dock=\x22bottom\x22 height=\x224\x22 back_color=\x22#C1D1F9\x22\x3E\x3Cpanel dock=\x22left\x22 width=\x224\x22 jsml-base=\x22frameskin_resizepanel\x22 resize_cursor=\x22sw-resize\x22 resize_edge=\x220,0,1,1\x22 /\x3E\x3Cpanel dock=\x22right\x22 width=\x224\x22 jsml-base=\x22frameskin_resizepanel\x22 resize_cursor=\x22se-resize\x22 resize_edge=\x220,1,1,0\x22 /\x3E\x3Cpanel dock=\x22fill\x22 width=\x224\x22 jsml-base=\x22frameskin_resizepanel\x22 resize_cursor=\x22s-resize\x22 resize_edge=\x220,0,1,0\x22 /\x3E\x3C/panel\x3E\x3Cpanel dock=\x22left\x22 back_color=\x22#C1D1F9\x22 width=\x224\x22 jsml-base=\x22frameskin_resizepanel\x22 resize_cursor=\x22w-resize\x22 resize_edge=\x220,0,0,1\x22 /\x3E\x3Cpanel dock=\x22right\x22 back_color=\x22#C1D1F9\x22 width=\x224\x22 jsml-base=\x22frameskin_resizepanel\x22 resize_cursor=\x22e-resize\x22 resize_edge=\x220,1,0,0\x22 /\x3E\x3Cpanel dock=\x22fill\x22 border_color=\x22#9CACD0\x22 border_width=\x221\x22 back_color=\x22white\x22\x3E\x3C/panel\x3E\x3C/panel\x3E\x3Cproperty name=\x22text\x22\x3E\x3Cget\x3E\x0D\x0A				return lbt.get_text();\x0D\x0A			\x3C/get\x3E\x3Cset arguments=\x22value\x22\x3E\x0D\x0A				lbt.set_text(value);\x0D\x0A			\x3C/set\x3E\x3C/property\x3E\x3Cmethod name=\x22get_framepadding\x22\x3E\x0D\x0A			return [32,4,4,4];\x0D\x0A		\x3C/method\x3E\x3C/panel\x3E\x3Cpanel jsml-class=\x22frameskin_template\x22 jsml-base=\x22frameskin_base\x22 xmlns=\x22http://cutesoft.net/jsml\x22\x3E\x3Cpanel jsml-member=\x22tt\x22 dock=\x22top\x22\x3E\x3Cpanel jsml-member=\x22tl\x22 dock=\x22left\x22 jsml-base=\x22frameskin_resizepanel\x22 resize_cursor=\x22nw-resize\x22 resize_edge=\x221,0,0,1\x22 /\x3E\x3Cpanel jsml-member=\x22tr\x22 dock=\x22right\x22 jsml-base=\x22frameskin_resizepanel\x22 resize_cursor=\x22ne-resize\x22 resize_edge=\x221,1,0,0\x22 /\x3E\x3Cpanel jsml-member=\x22tc\x22 dock=\x22fill\x22\x3E\x3Cpanel dock=\x22top\x22 height=\x222\x22 jsml-base=\x22frameskin_resizepanel\x22 resize_cursor=\x22n-resize\x22 resize_edge=\x221,0,0,0\x22 /\x3E\x3Cimage jsml-member=\x22icon\x22 dock=\x22left\x22 width=\x2216\x22 visible=\x220\x22 zoom=\x22none\x22 vertical_align=\x22middle\x22 /\x3E\x3Clabel jsml-member=\x22lt\x22 dock=\x22fill\x22 vertical_align=\x22middle\x22 text=\x22\x22 padding=\x220,0,2,0\x22\x3E\x3Cattach name=\x22mousedown\x22 arguments=\x22jevent,devent\x22\x3E\x0D\x0A						if(instance._skinmovetarget)instance._skinmovetarget.start_move_offset(devent);\x0D\x0A					\x3C/attach\x3E\x3C/label\x3E\x3C/panel\x3E\x3C/panel\x3E\x3Cpanel jsml-member=\x22bb\x22 dock=\x22bottom\x22\x3E\x3Cpanel jsml-member=\x22bl\x22 dock=\x22left\x22 jsml-base=\x22frameskin_resizepanel\x22 resize_cursor=\x22sw-resize\x22 resize_edge=\x220,0,1,1\x22 /\x3E\x3Cpanel jsml-member=\x22br\x22 dock=\x22right\x22 jsml-base=\x22frameskin_resizepanel\x22 resize_cursor=\x22se-resize\x22 resize_edge=\x220,1,1,0\x22 /\x3E\x3Cpanel jsml-member=\x22bc\x22 dock=\x22fill\x22 jsml-base=\x22frameskin_resizepanel\x22 resize_cursor=\x22s-resize\x22 resize_edge=\x220,0,1,0\x22 /\x3E\x3C/panel\x3E\x3Cpanel jsml-member=\x22ml\x22 dock=\x22left\x22 width=\x2215\x22 jsml-base=\x22frameskin_resizepanel\x22 resize_cursor=\x22w-resize\x22 resize_edge=\x220,0,0,1\x22 /\x3E\x3Cpanel jsml-member=\x22mr\x22 dock=\x22right\x22 width=\x2215\x22 jsml-base=\x22frameskin_resizepanel\x22 resize_cursor=\x22e-resize\x22 resize_edge=\x220,1,0,0\x22 /\x3E\x3Cmethod name=\x22get_framepadding\x22\x3E\x0D\x0A			return [this.tth||0,this.mrw||0,this.bbh||0,this.mlw||0];\x0D\x0A		\x3C/method\x3E\x3Cmethod name=\x22init_skinname\x22 arguments=\x22skinname,tth,tlw,trw,bbh,blw,brw,mlw,mrw\x22\x3E\x3C![CDATA[\x0D\x0A			var imgext=\x22gif\x22;\x0D\x0A			if(skinname==\x22seven\x22 || skinname==\x22macblue\x22)\x0D\x0A			{\x0D\x0A				var ua=navigator.userAgent;\x0D\x0A				if( ua.indexOf(\x22MSIE 6.\x22)==-1 \x26\x26 ua.indexOf(\x22MSIE 5.\x22)==-1 )\x0D\x0A					imgext=\x22png\x22;\x0D\x0A			}\x0D\x0A			this.tth=tth;\x0D\x0A			this.bbh=bbh;\x0D\x0A			this.mlw=mlw;\x0D\x0A			this.mrw=mrw;\x0D\x0A			this.tt.set_height(tth);\x0D\x0A			this.tl.set_width(tlw);\x0D\x0A			this.tr.set_width(trw);\x0D\x0A			this.bb.set_height(bbh);\x0D\x0A			this.bl.set_width(blw);\x0D\x0A			this.br.set_width(brw);\x0D\x0A			this.ml.set_width(mlw);\x0D\x0A			this.mr.set_width(mrw);\x0D\x0A			this.tl.set_background(\x22transparent url(../JSML/skins/\x22+skinname+\x22/top_left.\x22+imgext+\x22) no-repeat\x22);\x0D\x0A			this.tr.set_background(\x22transparent url(../JSML/skins/\x22+skinname+\x22/top_right.\x22+imgext+\x22) no-repeat\x22);\x0D\x0A			this.tc.set_background(\x22transparent url(../JSML/skins/\x22+skinname+\x22/top_center.\x22+imgext+\x22) repeat-x\x22);\x0D\x0A			this.bl.set_background(\x22transparent url(../JSML/skins/\x22+skinname+\x22/btm_left.\x22+imgext+\x22) no-repeat\x22);\x0D\x0A			this.br.set_background(\x22transparent url(../JSML/skins/\x22+skinname+\x22/btm_right.\x22+imgext+\x22) no-repeat\x22);\x0D\x0A			this.bc.set_background(\x22transparent url(../JSML/skins/\x22+skinname+\x22/btm_center.\x22+imgext+\x22) repeat-x\x22);\x0D\x0A			this.ml.set_background(\x22transparent url(../JSML/skins/\x22+skinname+\x22/mdl_left.\x22+imgext+\x22) repeat-y\x22);\x0D\x0A			this.mr.set_background(\x22transparent url(../JSML/skins/\x22+skinname+\x22/mdl_right.\x22+imgext+\x22) repeat-y\x22);\x0D\x0A			]]\x3E\x3C/method\x3E\x3Cattach name=\x22set_skinicon\x22 arguments=\x22je,url\x22\x3E\x0D\x0A			instance.icon.set_visible(true);\x0D\x0A			instance.icon.set_src(url);\x0D\x0A		\x3C/attach\x3E\x3Cproperty name=\x22text\x22\x3E\x3Cget\x3E\x0D\x0A				return self.lt.get_text();\x0D\x0A			\x3C/get\x3E\x3Cset\x3E\x0D\x0A				self.lt.set_text(value);\x0D\x0A			\x3C/set\x3E\x3C/property\x3E\x3Cproperty name=\x22text_color\x22\x3E\x3Cget\x3E\x0D\x0A				return self.lt.get_text_color();\x0D\x0A			\x3C/get\x3E\x3Cset\x3E\x0D\x0A				self.lt.set_text_color(value);\x0D\x0A			\x3C/set\x3E\x3C/property\x3E\x3Cproperty name=\x22css_text\x22\x3E\x3Cget\x3E\x0D\x0A				return self.lt.get_css_text();\x0D\x0A			\x3C/get\x3E\x3Cset\x3E\x0D\x0A				self.lt.set_css_text(value);\x0D\x0A			\x3C/set\x3E\x3C/property\x3E\x3C/panel\x3E\x3Cpanel jsml-class=\x22frameskin_royale\x22 jsml-base=\x22frameskin_template\x22 xmlns=\x22http://cutesoft.net/jsml\x22\x3E\x3Cinitialize\x3E\x0D\x0A			this.init_skinname(\x22royale\x22,17,3,3,3,3,3,3,3);\x0D\x0A			this.lt.set_margin([0,0,0,3]);\x0D\x0A			this.lt.set_text_color(\x22white\x22);\x0D\x0A		\x3C/initialize\x3E\x3C/panel\x3E\x3Cpanel jsml-class=\x22frameskin_classic\x22 jsml-base=\x22frameskin_template\x22 xmlns=\x22http://cutesoft.net/jsml\x22\x3E\x3Cinitialize\x3E\x0D\x0A			this.init_skinname(\x22classic\x22,5,5,5,5,5,5,5,5);\x0D\x0A		\x3C/initialize\x3E\x3C/panel\x3E\x3Cpanel jsml-class=\x22frameskin_indigo\x22 jsml-base=\x22frameskin_template\x22 xmlns=\x22http://cutesoft.net/jsml\x22\x3E\x3Cinitialize\x3E\x0D\x0A			this.init_skinname(\x22indigo\x22,5,5,5,5,5,5,5,5);\x0D\x0A		\x3C/initialize\x3E\x3C/panel\x3E\x3Cpanel jsml-class=\x22frameskin_macblue\x22 jsml-base=\x22frameskin_template\x22 xmlns=\x22http://cutesoft.net/jsml\x22\x3E\x3Cinitialize\x3E\x0D\x0A			this.init_skinname(\x22macblue\x22,22,81,47,14,12,16,1,1);\x0D\x0A		\x3C/initialize\x3E\x3C/panel\x3E\x3Cpanel jsml-class=\x22frameskin_macwhite\x22 jsml-base=\x22frameskin_template\x22 xmlns=\x22http://cutesoft.net/jsml\x22\x3E\x3Cinitialize\x3E\x0D\x0A			this.init_skinname(\x22macwhite\x22,22,76,33,22,8,8,1,1);\x0D\x0A		\x3C/initialize\x3E\x3C/panel\x3E\x3Cpanel jsml-class=\x22frameskin_normal\x22 jsml-base=\x22frameskin_template\x22 xmlns=\x22http://cutesoft.net/jsml\x22\x3E\x3Cinitialize\x3E\x0D\x0A			this.init_skinname(\x22normal\x22,3,3,3,3,3,3,3,3);\x0D\x0A		\x3C/initialize\x3E\x3C/panel\x3E\x3Cpanel jsml-class=\x22frameskin_seven\x22 jsml-base=\x22frameskin_template\x22 xmlns=\x22http://cutesoft.net/jsml\x22\x3E\x3Cpanel jsml-member=\x22cb\x22 right=\x2215\x22 top=\x229\x22 width=\x2244\x22 height=\x2218\x22 cursor=\x22pointer\x22 background=\x22transparent url(../JSML/skins/seven/close.gif) no-repeat\x22\x3E\x3Cattach name=\x22click\x22\x3E\x0D\x0A				frameskin_seven.invoke_event(\x22clickclose\x22);\x0D\x0A			\x3C/attach\x3E\x3C/panel\x3E\x3Cinitialize\x3E\x3C![CDATA[\x0D\x0A			this.init_skinname(\x22seven\x22,35,15,15,15,15,15,15,15);\x0D\x0A			this.lt.set_margin([8,0,0,6]);\x0D\x0A			this.icon.set_margin([5,-3,0,3]);\x0D\x0A			]]\x3E\x3C/initialize\x3E\x3C/panel\x3E\x3Cpanel jsml-class=\x22frameskin_newgreen\x22 jsml-base=\x22frameskin_template\x22 jsml-local=\x22newgreen\x22 xmlns=\x22http://cutesoft.net/jsml\x22\x3E\x3Cpanel jsml-member=\x22icon\x22 left=\x2215\x22 top=\x2214\x22 width=\x2213\x22 height=\x2218\x22 background=\x22transparent url(../JSML/skins/newgreen/icon_dialog.gif) no-repeat\x22\x3E\x3C/panel\x3E\x3Cpanel jsml-member=\x22cb\x22 right=\x220\x22 top=\x229\x22 width=\x2244\x22 height=\x2218\x22 cursor=\x22pointer\x22 background=\x22transparent url(../JSML/skins/newgreen/closebtn.gif) no-repeat\x22\x3E\x3Cattach name=\x22mousehover\x22\x3E\x0D\x0A				//self.set_background(\x27transparent url(../JSML/skins/newgreen/closebtn_over.gif) no-repeat\x27);\x0D\x0A				newgreen.cbover.set_visible(\x22true\x22);\x0D\x0A			\x3C/attach\x3E\x3C/panel\x3E\x3Cpanel jsml-member=\x22cbover\x22 visible=\x22false\x22 right=\x220\x22 top=\x229\x22 width=\x2244\x22 height=\x2218\x22 cursor=\x22pointer\x22 background=\x22transparent url(../JSML/skins/newgreen/closebtn_over.gif) no-repeat\x22\x3E\x3Cattach name=\x22click\x22\x3E\x0D\x0A				frameskin_newgreen.invoke_event(\x22clickclose\x22);\x0D\x0A			\x3C/attach\x3E\x3Cattach name=\x22mouseleave\x22\x3E\x0D\x0A				self.set_visible(\x22false\x22);\x0D\x0A			\x3C/attach\x3E\x3C/panel\x3E\x3Cinitialize\x3E\x3C![CDATA[\x0D\x0A			this.init_skinname(\x22newgreen\x22,33,13,13,13,13,13,13,13);\x0D\x0A			this.lt.set_margin([8,0,8,20]);\x0D\x0A			]]\x3E\x3C/initialize\x3E\x3C/panel\x3E\x3Cexecute xmlns=\x22http://cutesoft.net/jsml\x22\x3E\x3C![CDATA[\x0D\x0A		var skin=\x27default\x27;\x0D\x0A		var arr=(window.location.href.split(\x27#\x27)[0].split(\x27?\x27)[1]||\x27\x27).split(\x27\x26\x27);\x0D\x0A		for(var i=0;i\x3Carr.length;i++)\x0D\x0A		{\x0D\x0A			var kv=arr[i].split(\x27=\x27);\x0D\x0A			if(kv[0]==\x22skin\x22)\x0D\x0A				skin=kv[1];\x0D\x0A		}\x0D\x0A		jsml.class_define(\x22frameskin\x22,\x22frameskin_\x22+skin);\x0D\x0A		]]\x3E\x3C/execute\x3E\x3Cpanel jsml-class=\x22mlcdialogcontainer\x22 xmlns=\x22http://cutesoft.net/jsml\x22\x3E\x3Cpanel dock=\x22over\x22 jsml-member=\x22mask\x22 back_color=\x22black\x22 opacity=\x225\x22\x3E\x3C/panel\x3E\x3C!--a button for form default..--\x3E\x3Cbutton text=\x22default\x22 width=\x221px\x22 height=\x221px\x22 left=\x22-10\x22 top=\x22-10\x22 /\x3E\x3Cpanel jsml-local=\x22dialogframe\x22 width=\x22620\x22 height=\x22420\x22\x3E\x3Cinitialize\x3E\x3C![CDATA[\x0D\x0A				self._estyle.cssText+=\x22border-radius:5px;box-shadow:0px 4px 7px #333;\x22;\x0D\x0A				self._estyle.border=\x22solid 1px gray\x22;\x0D\x0A				]]\x3E\x3C/initialize\x3E\x3C!--rem-jsml-base=\x22frameskin_default\x22 --\x3E\x3Cpanel jsml-local=\x22skin\x22 dock=\x22over\x22\x3E\x3Cattach name=\x22clickclose\x22\x3E\x0D\x0A					if(instance._panel)instance._panel.invoke_event(\x22clickclose\x22);\x0D\x0A				\x3C/attach\x3E\x3C/panel\x3E\x3C/panel\x3E\x3Cconstructor arguments=\x22option\x22\x3E\x0D\x0A			self.option=option;\x0D\x0A			self.panel_constructor();\x0D\x0A		\x3C/constructor\x3E\x3Cinitialize\x3E\x3C![CDATA[\x0D\x0A			skin.set_css_class(\x22jsml_dialogskin\x22);\x0D\x0A			//dialogframe.set_padding(skin.get_framepadding());\x0D\x0A			skin._skinmovetarget=dialogframe;\x0D\x0A			skin._skinsizetarget=dialogframe;\x0D\x0A\x0D\x0A			//self._element.onmousedown=jsml.cancel_bubble_function;\x0D\x0A			\x0D\x0A			self.set_parent(document.body);\x0D\x0A			var style=self._estyle;\x0D\x0A			style.zIndex=16543210+100000;\x0D\x0A			style.position=\x22absolute\x22;\x0D\x0A\x0D\x0A			function repos()\x0D\x0A			{\x0D\x0A				if(self._jsml_disposed)return;\x0D\x0A\x0D\x0A				var rect=jsml.get_body_rect();\x0D\x0A				if(jsml.mobile)\x0D\x0A				{\x0D\x0A					rect.top=0;\x0D\x0A					rect.left=0;\x0D\x0A				}\x0D\x0A				else\x0D\x0A				{\x0D\x0A					setTimeout(repos,100);\x0D\x0A				}\x0D\x0A				style.top=rect.top+\x22px\x22;\x0D\x0A				style.left=rect.left+\x22px\x22;\x0D\x0A				self.set_width(rect.width);\x0D\x0A				self.set_height(rect.height);\x0D\x0A			}\x0D\x0A			repos();\x0D\x0A			]]\x3E\x3C/initialize\x3E\x3Cproperty name=\x22title\x22\x3E\x3Cget\x3E\x0D\x0A				return skin.get_text();\x0D\x0A			\x3C/get\x3E\x3Cset\x3E\x0D\x0A				skin.set_text(value);\x0D\x0A			\x3C/set\x3E\x3C/property\x3E\x3Cmethod name=\x22SetPanel\x22\x3E\x0D\x0A			self._panel=value;\x0D\x0A			dialogframe.append_child(value);\x0D\x0A			self.MoveCenter();\x0D\x0A			//self._timeline=jsml.new_timeline()\x0D\x0A			//instance.set_opacity(30);\x0D\x0A			//self._timeline.add_onprogress(jsml.tween.make_number_property(instance,\x22opacity\x22,70))\x0D\x0A			//self._timeline.set_timespan(500);\x0D\x0A			//self._timeline.start();\x0D\x0A		\x3C/method\x3E\x3Cattach name=\x22disposing\x22\x3E\x0D\x0A			if(!self._timeline)return\x0D\x0A			self._timeline.pause();\x0D\x0A			self._timeline.dispose();\x0D\x0A		\x3C/attach\x3E\x3Cmethod name=\x22MoveCenter\x22\x3E\x3C![CDATA[\x0D\x0A			var value=self._panel;\x0D\x0A			var padding=dialogframe.get_padding();\x0D\x0A			var w=value.get_width()+padding[1]+padding[3];\x0D\x0A			var h=value.get_height()+padding[0]+padding[2];\x0D\x0A			var rect;\x0D\x0A			if(self.option.container)\x0D\x0A			{\x0D\x0A				rect=jsml.get_clientposition(self.option.container);\x0D\x0A				rect.width=self.option.container.offsetWidth;\x0D\x0A				rect.height=self.option.container.offsetHeight;\x0D\x0A			}\x0D\x0A			else\x0D\x0A			{\x0D\x0A				rect=jsml.get_body_rect();\x0D\x0A				rect.top=0;rect.left=0;\x0D\x0A			}\x0D\x0A			if(jsml.mobile)\x0D\x0A			{\x0D\x0A				dialogframe.set_top(rect.top)\x0D\x0A				dialogframe.set_left(rect.left)\x0D\x0A			}\x0D\x0A			else\x0D\x0A			{\x0D\x0A				dialogframe.set_top(rect.top+Math.floor( Math.max(0,rect.height-h)/2 ))\x0D\x0A				dialogframe.set_left(rect.left+Math.floor( Math.max(0,rect.width-w)/2 ))\x0D\x0A			}\x0D\x0A			dialogframe.set_width(Math.min(w,rect.width));\x0D\x0A			dialogframe.set_height(Math.min(h,rect.height));\x0D\x0A			]]\x3E\x3C/method\x3E\x3Cmethod name=\x22resize\x22 arguments=\x22width,height\x22\x3E\x3C![CDATA[\x0D\x0A				var padding=dialogframe.get_padding();\x0D\x0A				if(width)\x0D\x0A					dialogframe.set_width(width+padding[1]+padding[3]);\x0D\x0A				if(height)\x0D\x0A					dialogframe.set_height(height+padding[0]+padding[2]);\x0D\x0A				self.MoveCenter();\x0D\x0A			]]\x3E\x3C/method\x3E\x3C/panel\x3E\x3Cpanel jsml-class=\x22mlcdialog\x22 dock=\x22fill\x22 back_color=\x22white\x22 xmlns=\x22http://cutesoft.net/jsml\x22\x3E\x3Cconstructor arguments=\x22option\x22\x3E\x0D\x0A			self.option=option;\x0D\x0A			self.panel_constructor();\x0D\x0A		\x3C/constructor\x3E\x3Cinitialize\x3E\x0D\x0A			self._dialogcontainer=jsml.new_mlcdialogcontainer(self.option);\x0D\x0A			self._dialogcontainer.SetPanel(self);\x0D\x0A		\x3C/initialize\x3E\x3Cattach name=\x22keydown\x22 arguments=\x22je,e\x22\x3E\x0D\x0A			if(e.keyCode==27)self.invoke_event(\x22clickclose\x22);\x0D\x0A		\x3C/attach\x3E\x3Cattach name=\x22clickclose\x22\x3E\x3C![CDATA[\x0D\x0A			if(self.onqueryclose)\x0D\x0A				if(false===self.onqueryclose())\x0D\x0A					return;\x0D\x0A			self.close();\x0D\x0A			]]\x3E\x3C/attach\x3E\x3Cmethod name=\x22close\x22\x3E\x0D\x0A			self._dialogcontainer.set_visible(false);\x0D\x0A			setTimeout(function(){self._dialogcontainer.dispose();},1);\x0D\x0A			self.invoke_event(\x22closing\x22);\x0D\x0A		\x3C/method\x3E\x3Cproperty name=\x22title\x22\x3E\x3Cget\x3E\x0D\x0A				return self._dialogcontainer.get_title();\x0D\x0A			\x3C/get\x3E\x3Cset\x3E\x0D\x0A				self._dialogcontainer.set_title(value);\x0D\x0A			\x3C/set\x3E\x3C/property\x3E\x3Cmethod name=\x22hidemask\x22\x3E\x0D\x0A			self._dialogcontainer.mask.set_visible(false);\x0D\x0A		\x3C/method\x3E\x3Cmethod name=\x22resize\x22 arguments=\x22width,height\x22\x3E\x0D\x0A			jsml.suppend_layout();\x0D\x0A			self.set_width(width);\x0D\x0A			self.set_height(height);\x0D\x0A			self._dialogcontainer.resize(width,height);\x0D\x0A			jsml.resume_layout();\x0D\x0A		\x3C/method\x3E\x3Cmethod name=\x22adjustsize\x22\x3E\x3C![CDATA[\x0D\x0A			jsml.suppend_layout();\x0D\x0A			var sw=self.get_width();\x0D\x0A			var sh=self.get_height();\x0D\x0A			var w=self.get_demand_content_width();\x0D\x0A			var h=self.get_demand_content_height();\x0D\x0A			if(w\x3Esw||h\x3Esh)\x0D\x0A			{\x0D\x0A				self.resize(Math.max(w,sw),Math.max(h,sh));\x0D\x0A				//recalc the height for flow controls\x0D\x0A				self.resize(Math.max(w,sw),self.get_demand_content_height());\x0D\x0A			}\x0D\x0A			jsml.resume_layout();\x0D\x0A			]]\x3E\x3C/method\x3E\x3Cmethod name=\x22expandsize\x22 arguments=\x22width,height\x22\x3E\x0D\x0A			var rect=jsml.get_body_rect();\x0D\x0A			var maxw=Math.floor(rect.width*0.8);\x0D\x0A			var maxh=Math.floor(rect.height*0.8);\x0D\x0A			self.resize( Math.min(width+self.get_width(),maxw) , Math.min(height+self.get_height(),maxh) )\x0D\x0A		\x3C/method\x3E\x3C/panel\x3E\x3Cpanel jsml-class=\x22mlcdialogpanel\x22 xmlns=\x22http://cutesoft.net/jsml\x22\x3E\x3Cconstructor arguments=\x22dialog,option\x22\x3E\x0D\x0A			instance._dialog=dialog;\x0D\x0A			instance._option=option;\x0D\x0A			self.panel_constructor();\x0D\x0A		\x3C/constructor\x3E\x3C/panel\x3E\x3Cpanel jsml-class=\x22alertdialogpanel\x22 jsml-base=\x22mlcdialogpanel\x22 dock=\x22fill\x22 overflow=\x22visible\x22 margin=\x220\x22 padding=\x2215\x22 xmlns=\x22http://cutesoft.net/jsml\x22\x3E\x3Cpanel jsml-local=\x22bottompanel\x22 dock=\x22bottom\x22 horizontal_align=\x22center\x22 margin=\x2210\x22\x3E\x3Cbutton width=\x2282\x22 text=\x22@OK\x22 jsml-local=\x22btnok\x22\x3E\x3Cattach name=\x22click\x22\x3E\x0D\x0A					instance._dialog.close();\x0D\x0A				\x3C/attach\x3E\x3C/button\x3E\x3C/panel\x3E\x3Cpanel dock=\x22top\x22 overflow=\x22visible\x22\x3E\x3Cimage dock=\x22left\x22 src=\x22^(window.MyLiveChat?MyLiveChat.UrlBase:\x27\x27)+\x27images/alert.png\x27\x22 width=\x2211\x22 height=\x2211\x22 /\x3E\x3Clabel jsml-local=\x22label\x22 dock=\x22fill\x22 margin=\x220,5,5,5\x22 word_wrap=\x22true\x22 vertical_align=\x22middle\x22 max_width=\x22640\x22 /\x3E\x3C/panel\x3E\x3Cattach name=\x22keydown\x22 arguments=\x22je,e\x22\x3E\x0D\x0A			if(e.keyCode==27)instance._dialog.close();\x0D\x0A		\x3C/attach\x3E\x3Cinitialize\x3E\x3C![CDATA[\x0D\x0A			if(instance._option.hideButtons)\x0D\x0A				bottompanel.set_visible(false);\x0D\x0A			label.set_text(instance._option.message);\x0D\x0A			setTimeout(function()\x0D\x0A			{\x0D\x0A				btnok.focus();\x0D\x0A				var dw=label.get_demand_content_width()\x0D\x0A				var dh=label.get_demand_content_height()\x0D\x0A				var cw=label.get_current_width();\x0D\x0A				var ch=label.get_current_height();\x0D\x0A				var w=dw-cw;\x0D\x0A				var h=dh-ch;\x0D\x0A				if(w\x3E0||h\x3E0)\x0D\x0A				{\x0D\x0A					if(w\x3C0)w=0;\x0D\x0A					if(h\x3C0)h=0;\x0D\x0A					//instance._dialog.expandsize(w,h);\x0D\x0A				}\x0D\x0A			},1);\x0D\x0A			setTimeout(function(){btnok.focus();},100);\x0D\x0A			]]\x3E\x3C/initialize\x3E\x3Cattach name=\x22click\x22\x3E\x0D\x0A			btnok.focus()\x0D\x0A		\x3C/attach\x3E\x3C/panel\x3E\x3Cpanel jsml-class=\x22confirmdialogpanel\x22 jsml-base=\x22mlcdialogpanel\x22 dock=\x22fill\x22 margin=\x220\x22 padding=\x2218\x22 overflow=\x22visible\x22 xmlns=\x22http://cutesoft.net/jsml\x22\x3E\x3Cpanel dock=\x22top\x22 overflow=\x22visible\x22\x3E\x3Ccheckbox jsml-local=\x22checkbox\x22 dock=\x22left\x22 width=\x2220\x22 margin=\x223,1,0,4\x22 /\x3E\x3Clabel jsml-local=\x22label\x22 dock=\x22fill\x22 margin=\x224,4,0,4\x22 max_width=\x22640\x22 /\x3E\x3C/panel\x3E\x3Cpanel dock=\x22bottom\x22 margin=\x2210\x22\x3E\x3Cpanel dock=\x22right\x22 overflow=\x22visible\x22\x3E\x3Cbutton dock=\x22left\x22 width=\x2282\x22 margin=\x220,12,0,0\x22 text=\x22@OK\x22 jsml-local=\x22btnok\x22\x3E\x3Cattach name=\x22click\x22\x3E\x0D\x0A						instance.commitinput();\x0D\x0A					\x3C/attach\x3E\x3C/button\x3E\x3Cbutton dock=\x22left\x22 width=\x2282\x22 margin=\x220,12,0,0\x22 text=\x22@CANCEL\x22\x3E\x3Cattach name=\x22click\x22\x3E\x0D\x0A						instance._dialog.close();\x0D\x0A					\x3C/attach\x3E\x3C/button\x3E\x3C/panel\x3E\x3C/panel\x3E\x3Cattach name=\x22keydown\x22 arguments=\x22je,e\x22\x3E\x0D\x0A			if(e.keyCode==27)instance._dialog.close();\x0D\x0A		\x3C/attach\x3E\x3Cmethod name=\x22commitinput\x22\x3E\x3C![CDATA[\x0D\x0A			if(!checkbox.get_checked())\x0D\x0A				return;\x0D\x0A			instance._dialog.result=true;\x0D\x0A			instance._dialog.close();\x0D\x0A			]]\x3E\x3C/method\x3E\x3Cinitialize\x3E\x3C![CDATA[\x0D\x0A			label.set_text(instance._option.message);\x0D\x0A			function checkvalue()\x0D\x0A			{\x0D\x0A				if(self._jsml_disposed)return;\x0D\x0A				setTimeout(checkvalue,10);\x0D\x0A				btnok.set_disabled(!checkbox.get_checked());\x0D\x0A				btnok.set_tooltip(checkbox.get_checked()?\x22\x22:\x22Please click the checkbox at first\x22);\x0D\x0A			}\x0D\x0A			setTimeout(checkvalue,10);\x0D\x0A			]]\x3E\x3C/initialize\x3E\x3C/panel\x3E\x3Cpanel jsml-class=\x22promptdialogpanel\x22 jsml-base=\x22mlcdialogpanel\x22 dock=\x22fill\x22 margin=\x220\x22 padding=\x2218\x22 overflow=\x22visible\x22 xmlns=\x22http://cutesoft.net/jsml\x22\x3E\x3Cpanel dock=\x22top\x22 overflow=\x22visible\x22\x3E\x3Clabel jsml-local=\x22label\x22 dock=\x22fill\x22 margin=\x224,4,0,4\x22 max_width=\x22640\x22 /\x3E\x3C/panel\x3E\x3Cpanel dock=\x22top\x22 overflow=\x22visible\x22\x3E\x3Ctextbox jsml-local=\x22textbox\x22 dock=\x22fill\x22 margin=\x2212\x22 border_color=\x22gray\x22 border_style=\x22solid\x22 border_width=\x221\x22\x3E\x3Cattach name=\x22enterkey\x22\x3E\x0D\x0A					instance.commitinput();\x0D\x0A				\x3C/attach\x3E\x3C/textbox\x3E\x3C/panel\x3E\x3Cpanel dock=\x22bottom\x22 margin=\x2210\x22\x3E\x3Cpanel dock=\x22right\x22 overflow=\x22visible\x22\x3E\x3Cbutton dock=\x22left\x22 width=\x2282\x22 margin=\x220,12,0,0\x22 text=\x22@OK\x22 jsml-local=\x22btnok\x22\x3E\x3Cattach name=\x22click\x22\x3E\x0D\x0A						instance.commitinput();\x0D\x0A					\x3C/attach\x3E\x3C/button\x3E\x3Cbutton dock=\x22left\x22 width=\x2282\x22 margin=\x220,12,0,0\x22 text=\x22@CANCEL\x22\x3E\x3Cattach name=\x22click\x22\x3E\x0D\x0A						instance._dialog.close();\x0D\x0A					\x3C/attach\x3E\x3C/button\x3E\x3C/panel\x3E\x3C/panel\x3E\x3Cattach name=\x22keydown\x22 arguments=\x22je,e\x22\x3E\x0D\x0A			if(e.keyCode==27)instance._dialog.close();\x0D\x0A		\x3C/attach\x3E\x3Cmethod name=\x22getvalidvalue\x22 arguments=\x22allowUI\x22\x3E\x3C![CDATA[\x0D\x0A			var val=textbox.get_text();\x0D\x0A			if(!instance._option.stoptrim)val=val.replace(/(^\x5Cs+|\x5Cs+$)/g,\x22\x22)\x0D\x0A			\x0D\x0A			if(val==\x22\x22)return instance._option.allowempty?\x22\x22:null;\x0D\x0A			if(instance._option.minlen\x26\x26val.length\x3Cinstance._option.minlen)return null;\x0D\x0A			if(instance._option.maxlen\x26\x26val.length\x3Einstance._option.maxlen)return null;\x0D\x0A			if(instance._option.regexp\x26\x26!instance._option.regexp.test(val))return null;\x0D\x0A			\x0D\x0A			if(instance._option.precheckvalue)\x0D\x0A				val=instance._option.precheckvalue(val,allowUI);\x0D\x0A				\x0D\x0A			return val;\x0D\x0A			]]\x3E\x3C/method\x3E\x3Cmethod name=\x22commitinput\x22\x3E\x3C![CDATA[\x0D\x0A			var val=self.getvalidvalue(true);\x0D\x0A			if(val==null)\x0D\x0A				return;\x0D\x0A			instance._dialog.result=val;\x0D\x0A			instance._dialog.close();\x0D\x0A			]]\x3E\x3C/method\x3E\x3Cinitialize\x3E\x3C![CDATA[\x0D\x0A			label.set_text(instance._option.message);\x0D\x0A			textbox.set_text(instance._option.defaultvalue||\x22\x22);\x0D\x0A			setTimeout(function()\x0D\x0A			{\x0D\x0A				textbox.focus();\x0D\x0A				if(textbox.get_text())\x0D\x0A				{\x0D\x0A					try{textbox._input.select();}catch(x){}\x0D\x0A				}\x0D\x0A			},1);\x0D\x0A			function checkvalue()\x0D\x0A			{\x0D\x0A				if(self._jsml_disposed)return;\x0D\x0A				setTimeout(checkvalue,10);\x0D\x0A				var val=self.getvalidvalue();\x0D\x0A				btnok.set_disabled(val==null);\x0D\x0A			}\x0D\x0A			setTimeout(checkvalue,10);\x0D\x0A			]]\x3E\x3C/initialize\x3E\x3C/panel\x3E\x3Cpanel jsml-class=\x22minorquitdialogpanel\x22 jsml-base=\x22mlcdialogpanel\x22 dock=\x22fill\x22 overflow=\x22visible\x22 margin=\x220\x22 padding=\x2215\x22 xmlns=\x22http://cutesoft.net/jsml\x22\x3E\x3Cpanel jsml-local=\x22bottompanel\x22 dock=\x22bottom\x22 horizontal_align=\x22center\x22 margin=\x2210\x22\x3E\x3Cbutton dock=\x22left\x22 width=\x2282\x22 margin=\x220,12,0,0\x22 text=\x22^MyLiveChat.TEXT_CS_INLINECONFIRM_COLLAPSE\x22 jsml-local=\x22btnok\x22\x3E\x3Cattach name=\x22click\x22\x3E\x0D\x0A					instance.commitinput();\x0D\x0A				\x3C/attach\x3E\x3C/button\x3E\x3Cbutton dock=\x22left\x22 width=\x2282\x22 margin=\x220,12,0,0\x22 text=\x22^MyLiveChat.TEXT_CS_INLINECONFIRM_EXIT\x22\x3E\x3Cattach name=\x22click\x22\x3E\x0D\x0A					instance._dialog.close();\x0D\x0A				\x3C/attach\x3E\x3C/button\x3E\x3C/panel\x3E\x3Cpanel dock=\x22top\x22 overflow=\x22visible\x22\x3E\x3Cimage dock=\x22left\x22 src=\x22^(window.MyLiveChat?MyLiveChat.UrlBase:\x27\x27)+\x27images/alert.png\x27\x22 width=\x2211\x22 height=\x2211\x22 /\x3E\x3Clabel jsml-local=\x22label\x22 dock=\x22fill\x22 margin=\x220,5,5,5\x22 word_wrap=\x22true\x22 vertical_align=\x22middle\x22 max_width=\x22640\x22 /\x3E\x3C/panel\x3E\x3Cmethod name=\x22commitinput\x22\x3E\x3C![CDATA[\x0D\x0A			instance._dialog.result=true;\x0D\x0A			instance._dialog.close();\x0D\x0A			]]\x3E\x3C/method\x3E\x3Cattach name=\x22keydown\x22 arguments=\x22je,e\x22\x3E\x0D\x0A			if(e.keyCode==27)instance._dialog.close();\x0D\x0A		\x3C/attach\x3E\x3Cinitialize\x3E\x3C![CDATA[\x0D\x0A			if(instance._option.hideButtons)\x0D\x0A				bottompanel.set_visible(false);\x0D\x0A			label.set_text(instance._option.message);\x0D\x0A			setTimeout(function()\x0D\x0A			{\x0D\x0A				btnok.focus();\x0D\x0A				var dw=label.get_demand_content_width()\x0D\x0A				var dh=label.get_demand_content_height()\x0D\x0A				var cw=label.get_current_width();\x0D\x0A				var ch=label.get_current_height();\x0D\x0A				var w=dw-cw;\x0D\x0A				var h=dh-ch;\x0D\x0A				if(w\x3E0||h\x3E0)\x0D\x0A				{\x0D\x0A					if(w\x3C0)w=0;\x0D\x0A					if(h\x3C0)h=0;\x0D\x0A					//instance._dialog.expandsize(w,h);\x0D\x0A				}\x0D\x0A			},1);\x0D\x0A			setTimeout(function(){btnok.focus();},100);\x0D\x0A			]]\x3E\x3C/initialize\x3E\x3Cattach name=\x22click\x22\x3E\x0D\x0A			btnok.focus()\x0D\x0A		\x3C/attach\x3E\x3C/panel\x3E\x3Cexecute xmlns=\x22http://cutesoft.net/jsml\x22\x3E\x3C![CDATA[\x0D\x0A		\x0D\x0A		window.mlcshowdialog=function(option,onload)\x0D\x0A		{\x0D\x0A			if(!option)option={}\x0D\x0A			var dialog=jsml.new_mlcdialog(option);\x0D\x0A			\x0D\x0A			//dialog._estyle.zIndex=16543210+100000;\x0D\x0A			if(option.title)\x0D\x0A				dialog.set_title(option.title);\x0D\x0A			if(option.width\x26\x26option.height)\x0D\x0A				dialog.resize(option.width,option.height);\x0D\x0A			if(option.ondialoginit)\x0D\x0A				option.ondialoginit(dialog);\x0D\x0A			\x0D\x0A			dialog.attach_event(\x22closing\x22,function()\x0D\x0A			{\x0D\x0A				if(option.callback)option.callback(dialog.result);\x0D\x0A			});\x0D\x0A			\x0D\x0A			if(onload)\x0D\x0A				onload(dialog);\x0D\x0A			\x0D\x0A			if(option.ondialogload)\x0D\x0A				option.ondialogload(dialog);\x0D\x0A			\x0D\x0A			dialog.adjustsize();\x0D\x0A			\x0D\x0A			if(option.oncontentload)\x0D\x0A				option.oncontentload(dialog);\x0D\x0A		}\x0D\x0A		\x0D\x0A		window.mlcalert=function(option)\x0D\x0A		{\x0D\x0A			if(typeof(option)==\x22string\x22)\x0D\x0A			{\x0D\x0A				option={message:option};\x0D\x0A			}\x0D\x0A			if(!option.message)throw(new Error(\x22require .message\x22));\x0D\x0A			\x0D\x0A			if(jsml.mobile)\x0D\x0A				return window.alert(option.message);\x0D\x0A				\x0D\x0A			if(!option.title)option.title=\x22mylivechat\x22;\x0D\x0A			if(!option.width)option.width=280;\x0D\x0A			if(!option.height)option.height=140;\x0D\x0A\x0D\x0A			window.mlcshowdialog(option,function(dialog)\x0D\x0A			{\x0D\x0A				dialog.append_child(jsml.new_alertdialogpanel(dialog,option));\x0D\x0A			});\x0D\x0A		}\x0D\x0A		\x0D\x0A		\x0D\x0A		window.mlcminorquit=function(option)\x0D\x0A		{\x0D\x0A			if(!option.title)option.title=\x22mylivechat\x22;\x0D\x0A			if(!option.width)option.width=280;\x0D\x0A			if(!option.height)option.height=140;\x0D\x0A\x0D\x0A			window.mlcshowdialog(option,function(dialog)\x0D\x0A			{\x0D\x0A				dialog.append_child(jsml.new_minorquitdialogpanel(dialog,option));\x0D\x0A			});\x0D\x0A		}\x0D\x0A		\x0D\x0A		\x0D\x0A		]]\x3E\x3C/execute\x3E\x3Chtmlcontrol jsml-class=\x22toolButton\x22 dock=\x22left\x22 width=\x2222\x22 height=\x2222\x22 cursor=\x22pointer\x22 margin=\x220,6,0,0\x22 xmlns=\x22http://cutesoft.net/jsml\x22\x3E\x3Cconstructor\x3E\x0D\x0A			self.htmlcontrol_constructor();\x0D\x0A			self._img=document.createElement(\x22IMG\x22);\x0D\x0A			self._element.appendChild(self._img);\x0D\x0A			self._img.style.margin=\x223px\x22;\x0D\x0A		\x3C/constructor\x3E\x3Cproperty name=\x22imagefile\x22\x3E\x3Cget\x3E\x0D\x0A				return self._imagefile||\x22\x22;\x0D\x0A			\x3C/get\x3E\x3Cset arguments=\x22value\x22\x3E\x0D\x0A				self._imagefile=value;\x0D\x0A				self._img.src=\x22Images/\x22+self._imagefile;\x0D\x0A			\x3C/set\x3E\x3C/property\x3E\x3Cattach name=\x22mousehover\x22\x3E\x0D\x0A			self.set_background(\x22transparent url(Images/IM_ConvBtnHover.png) no-repeat\x22);\x0D\x0A		\x3C/attach\x3E\x3Cattach name=\x22mouseleave\x22\x3E\x0D\x0A			self.set_background(\x22transparent\x22);\x0D\x0A		\x3C/attach\x3E\x3C/htmlcontrol\x3E\x3Cpanel jsml-class=\x22chatButton\x22 width=\x2269\x22 height=\x2221\x22 margin=\x222,8,2,0\x22 cursor=\x22pointer\x22 css_text=\x22\x22 xmlns=\x22http://cutesoft.net/jsml\x22\x3E\x3Clabel jsml-member=\x22lbl\x22 dock=\x22fill\x22 vertical_align=\x22middle\x22 text_align=\x22center\x22 margin=\x222,0,0,0\x22 cursor=\x22pointer\x22 /\x3E\x3Cproperty name=\x22text\x22\x3E\x3Cget\x3E\x0D\x0A				return self.lbl.get_text();\x0D\x0A			\x3C/get\x3E\x3Cset arguments=\x22value\x22\x3E\x3C![CDATA[\x0D\x0A				self.lbl.set_text(value);\x0D\x0A        var len = 0;\x0D\x0A        for(var i=0;i\x3Cvalue.length;i++){\x0D\x0A          len+=value.charCodeAt(i)\x3E255?2:1;\x0D\x0A        }\x0D\x0A        if(value==TEXT(\x27Close\x27))\x0D\x0A          len+=4;\x0D\x0A        if(len\x3E10){\x0D\x0A          self._backmodel = \x22css\x22;\x0D\x0A          self.set_width(95);\x0D\x0A          self.set_max_width(95);\x0D\x0A          self.set_overflow_x = \x22visible\x22;\x0D\x0A          self.SetCss();\x0D\x0A        }\x0D\x0A      ]]\x3E\x3C/set\x3E\x3C/property\x3E\x3Cinitialize\x3E\x3C![CDATA[\x0D\x0A      self._backmodel = \x22image\x22;\x0D\x0A      self.SetCss();\x0D\x0A      ]]\x3E\x3C/initialize\x3E\x3Cmethod name=\x22SetCss\x22\x3E\x3C![CDATA[\x0D\x0A      if(self._backmodel == \x22image\x22)\x0D\x0A      {\x0D\x0A         var style = self._element.style;\x0D\x0A         style.background = \x27transparent url(\x27+MyLiveChat.SiteUrl+\x27livechat/images/ButtonT.png) no-repeat\x27;\x0D\x0A      }\x0D\x0A      else\x0D\x0A      {\x0D\x0A        var style = self._element.style;\x0D\x0A        style.border = \x221px solid #4878a0\x22;\x0D\x0A        \x0D\x0A        style.backgroundColor=\x22#c8e8f8\x22;\x0D\x0A        \x0D\x0A        if(/MSIE [6-9]{1,}/.test(navigator.userAgent))\x0D\x0A        {\x0D\x0A          style.filter = \x22progid:DXImageTransform.Microsoft.gradient(startColorstr=\x27#e0f0f8\x27, endColorstr=\x27#b0e0f8\x27)\x22;\x0D\x0A        }\x0D\x0A        else\x0D\x0A        {\x0D\x0A          style.backgroundImage=\x22-webkit-gradient(linear, left top, left bottom, from(#e0f0f8), to(#b0e0f8))\x22;\x0D\x0A          style.backgroundImage=\x22-webkit-linear-gradient(top, #e0f0f8, #b0e0f8)\x22;\x0D\x0A          style.backgroundImage=\x22-moz-linear-gradient(top, #e0f0f8, #b0e0f8)\x22;\x0D\x0A          style.backgroundImage=\x22-ms-linear-gradient(top, #e0f0f8, #b0e0f8)\x22;\x0D\x0A          style.backgroundImage=\x22-o-linear-gradient(top, #e0f0f8, #b0e0f8)\x22;\x0D\x0A          style.backgroundImage=\x22linear-gradient(top, #e0f0f8, #b0e0f8)\x22;\x0D\x0A        }\x0D\x0A        style.textDecoration=\x22none\x22;\x0D\x0A        style.color = \x22#333\x22;\x0D\x0A        style.borderRadius = \x22.2em\x22;\x0D\x0A      }\x0D\x0A      ]]\x3E\x3C/method\x3E\x3Cattach name=\x22mousehover\x22\x3E\x0D\x0A      if(self._backmodel == \x22image\x22)\x0D\x0A      {\x0D\x0A			  self.set_padding(0);\x0D\x0A			  self._element.style.backgroundPosition=\x220px -21px\x22;\x0D\x0A      }\x0D\x0A      else\x0D\x0A      {\x0D\x0A        if(/MSIE [6-9]{1,}/.test(navigator.userAgent))\x0D\x0A        {\x0D\x0A        }\x0D\x0A        else\x0D\x0A        {\x0D\x0A          self._element.style.boxShadow=\x22inset 0 0 5px #28d0f8\x22;\x0D\x0A        }\x0D\x0A      }\x0D\x0A		\x3C/attach\x3E\x3Cattach name=\x22mouseup\x22\x3E\x0D\x0A      if(self._backmodel == \x22image\x22)\x0D\x0A      {\x0D\x0A			  self.set_padding(0);\x0D\x0A			  self._element.style.backgroundPosition=\x220px -21px\x22;\x0D\x0A      }\x0D\x0A      else\x0D\x0A      {\x0D\x0A        self._element.style.backgroundColor=\x22#c8e8f8\x22;\x0D\x0A        if(/MSIE [6-9]{1,}/.test(navigator.userAgent))\x0D\x0A        {\x0D\x0A          self._element.style.filter = \x22progid:DXImageTransform.Microsoft.gradient(startColorstr=\x27#e0f0f8\x27, endColorstr=\x27#b0e0f8\x27)\x22;\x0D\x0A        }\x0D\x0A        else\x0D\x0A        {\x0D\x0A          self._element.style.backgroundImage=\x22-webkit-gradient(linear, left top, left bottom, from(#e0f0f8), to(#b0e0f8))\x22;\x0D\x0A          self._element.style.backgroundImage=\x22-webkit-linear-gradient(top, #e0f0f8, #b0e0f8)\x22;\x0D\x0A          self._element.style.backgroundImage=\x22-moz-linear-gradient(top, #e0f0f8, #b0e0f8)\x22;\x0D\x0A          self._element.style.backgroundImage=\x22-ms-linear-gradient(top, #e0f0f8, #b0e0f8)\x22;\x0D\x0A          self._element.style.backgroundImage=\x22-o-linear-gradient(top, #e0f0f8, #b0e0f8)\x22;\x0D\x0A          self._element.style.backgroundImage=\x22linear-gradient(top, #e0f0f8, #b0e0f8)\x22;\x0D\x0A        }\x0D\x0A      }\x0D\x0A		\x3C/attach\x3E\x3Cattach name=\x22mousedown\x22\x3E\x0D\x0A      if(self._backmodel == \x22image\x22)\x0D\x0A      {\x0D\x0A			  self.set_padding([1,0,0,0]);\x0D\x0A			  self._element.style.backgroundPosition=\x220px -42px\x22;\x0D\x0A      }\x0D\x0A      else\x0D\x0A      {\x0D\x0A        self._element.style.backgroundColor=\x22#b0d8f0\x22;\x0D\x0A        if(/MSIE [6-9]{1,}/.test(navigator.userAgent))\x0D\x0A        {\x0D\x0A          self._element.style.filter = \x22progid:DXImageTransform.Microsoft.gradient(startColorstr=\x27#c0e0f0\x27, endColorstr=\x27#98d0f0\x27)\x22;\x0D\x0A        }\x0D\x0A        else\x0D\x0A        {\x0D\x0A          self._element.style.boxShadow=\x22none\x22;\x0D\x0A          self._element.style.backgroundImage=\x22-webkit-gradient(linear, left top, left bottom, from(#c0e0f0), to(#98d0f0))\x22;\x0D\x0A          self._element.style.backgroundImage=\x22-webkit-linear-gradient(top, #c0e0f0, #98d0f0)\x22;\x0D\x0A          self._element.style.backgroundImage=\x22-moz-linear-gradient(top, #c0e0f0, #98d0f0)\x22;\x0D\x0A          self._element.style.backgroundImage=\x22-ms-linear-gradient(top, #c0e0f0, #98d0f0)\x22;\x0D\x0A          self._element.style.backgroundImage=\x22-o-linear-gradient(top, #c0e0f0, #98d0f0)\x22;\x0D\x0A          self._element.style.backgroundImage=\x22linear-gradient(top, #c0e0f0, #98d0f0)\x22;\x0D\x0A        }\x0D\x0A      }\x0D\x0A		\x3C/attach\x3E\x3Cattach name=\x22mouseleave\x22\x3E\x0D\x0A      if(self._backmodel == \x22image\x22)\x0D\x0A      {\x0D\x0A			  self.set_padding(0);\x0D\x0A			  self._element.style.backgroundPosition=\x220px 0px\x22;\x0D\x0A      }\x0D\x0A      else\x0D\x0A      {\x0D\x0A        self._element.style.backgroundColor=\x22#c8e8f8\x22;\x0D\x0A        if(/MSIE [6-9]{1,}/.test(navigator.userAgent))\x0D\x0A        {\x0D\x0A          self._element.style.filter = \x22progid:DXImageTransform.Microsoft.gradient(startColorstr=\x27#e0f0f8\x27, endColorstr=\x27#b0e0f8\x27)\x22;\x0D\x0A        }\x0D\x0A        else\x0D\x0A        {\x0D\x0A          self._element.style.boxShadow=\x22none\x22;\x0D\x0A          self._element.style.backgroundImage=\x22-webkit-gradient(linear, left top, left bottom, from(#e0f0f8), to(#b0e0f8))\x22;\x0D\x0A          self._element.style.backgroundImage=\x22-webkit-linear-gradient(top, #e0f0f8, #b0e0f8)\x22;\x0D\x0A          self._element.style.backgroundImage=\x22-moz-linear-gradient(top, #e0f0f8, #b0e0f8)\x22;\x0D\x0A          self._element.style.backgroundImage=\x22-ms-linear-gradient(top, #e0f0f8, #b0e0f8)\x22;\x0D\x0A          self._element.style.backgroundImage=\x22-o-linear-gradient(top, #e0f0f8, #b0e0f8)\x22;\x0D\x0A          self._element.style.backgroundImage=\x22linear-gradient(top, #e0f0f8, #b0e0f8)\x22;\x0D\x0A        }\x0D\x0A      }\x0D\x0A		\x3C/attach\x3E\x3C/panel\x3E\x3Cpanel jsml-class=\x22chatButton222\x22 width=\x2269\x22 height=\x2221\x22 margin=\x222,8,2,0\x22 cursor=\x22pointer\x22 background=\x22^\x27transparent url(\x27+MyLiveChat.SiteUrl+\x27livechat/images/ButtonT.png) no-repeat\x27\x22 xmlns=\x22http://cutesoft.net/jsml\x22\x3E\x3Clabel jsml-member=\x22lbl\x22 dock=\x22fill\x22 vertical_align=\x22middle\x22 text_align=\x22center\x22 margin=\x222,0,0,0\x22 cursor=\x22pointer\x22 /\x3E\x3Cproperty name=\x22text\x22\x3E\x3Cget\x3E\x0D\x0A				return self.lbl.get_text();\x0D\x0A			\x3C/get\x3E\x3Cset arguments=\x22value\x22\x3E\x0D\x0A				self.lbl.set_text(value);\x0D\x0A			\x3C/set\x3E\x3C/property\x3E\x3Cattach name=\x22mousehover\x22\x3E\x0D\x0A			self.set_padding(0);\x0D\x0A			self._element.style.backgroundPosition=\x220px -21px\x22;\x0D\x0A		\x3C/attach\x3E\x3Cattach name=\x22mouseup\x22\x3E\x0D\x0A			self.set_padding(0);\x0D\x0A			self._element.style.backgroundPosition=\x220px -21px\x22;\x0D\x0A		\x3C/attach\x3E\x3Cattach name=\x22mousedown\x22\x3E\x0D\x0A			self.set_padding([1,0,0,0]);\x0D\x0A			self._element.style.backgroundPosition=\x220px -42px\x22;\x0D\x0A		\x3C/attach\x3E\x3Cattach name=\x22mouseleave\x22\x3E\x0D\x0A			self.set_padding(0);\x0D\x0A			self._element.style.backgroundPosition=\x220px 0px\x22;\x0D\x0A		\x3C/attach\x3E\x3C/panel\x3E\x3Cpanel jsml-class=\x22editButton\x22 dock=\x22left\x22 width=\x2236\x22 height=\x2228\x22 cursor=\x22pointer\x22 margin=\x220,6,0,0\x22 xmlns=\x22http://cutesoft.net/jsml\x22\x3E\x3Cpanel dock=\x22over\x22 jsml-local=\x22hoverimg\x22 /\x3E\x3Cpanel dock=\x22over\x22 jsml-local=\x22checkimg\x22 /\x3E\x3Cpanel dock=\x22over\x22 jsml-local=\x22fileimg\x22 /\x3E\x3Cinitialize\x3E\x3C/initialize\x3E\x3Cproperty name=\x22imagefile\x22\x3E\x3Cget\x3E\x0D\x0A				return self._imagefile||\x22\x22;\x0D\x0A			\x3C/get\x3E\x3Cset arguments=\x22value\x22\x3E\x0D\x0A				self._imagefile=value;\x0D\x0A				fileimg.set_background(\x22transparent url(Images/\x22+self._imagefile+\x22) no-repeat center center\x22);\x0D\x0A			\x3C/set\x3E\x3C/property\x3E\x3Cattach name=\x22mousedown\x22\x3E\x3C/attach\x3E\x3Cattach name=\x22mouseup\x22\x3E\x3C/attach\x3E\x3Cattach name=\x22mousehover\x22\x3E\x0D\x0A			hoverimg.set_background(\x22transparent url(Images/IM_InpBtnHover.png) no-repeat\x22);\x0D\x0A		\x3C/attach\x3E\x3Cattach name=\x22mouseleave\x22\x3E\x0D\x0A			hoverimg.set_background(\x22transparent\x22);\x0D\x0A		\x3C/attach\x3E\x3Cproperty name=\x22checked\x22\x3E\x3Cget\x3E\x0D\x0A				return !!self._checked;\x0D\x0A			\x3C/get\x3E\x3Cset\x3E\x3C![CDATA[\x0D\x0A				self._checked=jsml.toboolean(value);\x0D\x0A					if(self._checked)\x0D\x0A				checkimg.set_background(\x22transparent url(Images/IM_InpBtnHover.png) no-repeat\x22);\x0D\x0A				else\x0D\x0A					checkimg.set_background(\x22transparent\x22);\x0D\x0A				]]\x3E\x3C/set\x3E\x3C/property\x3E\x3C/panel\x3E\x3Chtmlcontrol jsml-class=\x22privatelabelbottomtext\x22 vertical_align=\x22middle\x22 overflow=\x22visible\x22 xmlns=\x22http://cutesoft.net/jsml\x22\x3E\x3Cinitialize\x3E\x3C![CDATA[\x0D\x0A			\x0D\x0A			var html=MyLiveChat.PrivatePoweredByHTML||\x22\x22;\x0D\x0A			if(MyLiveChat.NoPrivateLabel||!html.length)\x0D\x0A			{\x0D\x0A				self.set_visible(false);\x0D\x0A				return;\x0D\x0A			}\x0D\x0A			\x0D\x0A			self.set_html(html);\x0D\x0A			\x0D\x0A			]]\x3E\x3C/initialize\x3E\x3C/htmlcontrol\x3E\x3Chtmlcontrol jsml-class=\x22privatelabelheadertext\x22 vertical_align=\x22middle\x22 overflow=\x22visible\x22 xmlns=\x22http://cutesoft.net/jsml\x22\x3E\x3Cinitialize\x3E\x3C![CDATA[\x0D\x0A			\x0D\x0A			var html=MyLiveChat.PrivateHeaderHTML||\x22\x22;\x0D\x0A			if(MyLiveChat.NoPrivateLabel||!html.length)\x0D\x0A			{\x0D\x0A				self.set_visible(false);\x0D\x0A				return;\x0D\x0A			}\x0D\x0A			\x0D\x0A			self.set_html(html);\x0D\x0A			\x0D\x0A			]]\x3E\x3C/initialize\x3E\x3C/htmlcontrol\x3E\x3Cpanel jsml-class=\x22typingPanel\x22 xmlns=\x22http://cutesoft.net/jsml\x22\x3E\x3Cattach name=\x22disposing\x22\x3E\x0D\x0A			clearInterval(self.intid);\x0D\x0A		\x3C/attach\x3E\x3Cinitialize\x3E\x3C![CDATA[\x0D\x0A			\x0D\x0A			var noprivatelabel=customerLicense==\x22Free\x22||customerLicense==\x22Expired\x22;\x0D\x0A			var hasprivatelabel=!noprivatelabel;\x0D\x0A			\x0D\x0A			var _pbshowed=false;\x0D\x0A			function handletimeout()\x0D\x0A			{\x0D\x0A				setTimeout(handletimeout,100);\x0D\x0A				\x0D\x0A				var tusers=GetTypingUsers();\x0D\x0A				if(tusers.length!=0)\x0D\x0A				{\x0D\x0A					_pbshowed=false;\x0D\x0A					var html=tusers.join(\x22,\x22)\x0D\x0A					self._element.innerHTML=html+\x22 \x22+TEXT(\x22UI_USER_TYPING\x22);\x0D\x0A					return;\x0D\x0A				}\x0D\x0A				\x0D\x0A				if(_pbshowed)\x0D\x0A					return;\x0D\x0A\x0D\x0A				if(hasprivatelabel)\x0D\x0A				{\x0D\x0A					self._element.innerHTML=MyLiveChat.PrivatePoweredByHTML||\x22\x22;\x0D\x0A					_pbshowed=true;\x0D\x0A					return;\x0D\x0A				}\x0D\x0A				\x0D\x0A				var pv=parseInt(MyLiveChat.HCCID)%30;\x0D\x0A				var ts=new Date().getTime()/86400000 - 16200;\x0D\x0A				//document.title=[pv,ts];\x0D\x0A				\x0D\x0A				if(pv\x3Ets)\x0D\x0A				{\x0D\x0A					self._element.innerHTML=\x22\x3Cspan class=\x27poweredby\x27 style=\x27font-family:Arial;font-size:11px;color:#666666;\x27\x3EPowered by \x3Ca target=\x27_blank\x27 href=\x27\x22\x0D\x0A						+powerByLink+\x22\x27 style=\x27color:#666666;\x27\x3E\x22+powerByText+\x22\x3C/a\x3E \x3C/span\x3E\x22;\x0D\x0A				\x0D\x0A				}\x0D\x0A				else\x0D\x0A				{\x0D\x0A					self._element.innerHTML=\x22\x22;\x0D\x0A					if(self.iframe==null)\x0D\x0A					{\x0D\x0A						self.iframe=document.createElement(\x22IFRAME\x22);\x0D\x0A						self.iframe.frameBorder=0;\x0D\x0A						self.iframe.style.borderStyle=\x22none\x22;\x0D\x0A						self.iframe.setAttribute(\x22src\x22,MyLiveChat.UrlBase+\x22poweredby.htm\x22);\x0D\x0A					}\x0D\x0A					self._element.appendChild(self.iframe);\x0D\x0A					self.resizeiframe();\x0D\x0A				}\x0D\x0A\x0D\x0A				_pbshowed=true;\x0D\x0A				\x0D\x0A			}\x0D\x0A			self.intid=setTimeout(handletimeout,100);\x0D\x0A			]]\x3E\x3C/initialize\x3E\x3Cattach name=\x22resize\x22\x3E\x0D\x0A			if(self.iframe)self.resizeiframe();\x0D\x0A		\x3C/attach\x3E\x3Cmethod name=\x22resizeiframe\x22\x3E\x0D\x0A			self.iframe.style.width=self.get_current_width()+\x22px\x22;\x0D\x0A			self.iframe.style.height=self.get_current_height()+\x22px\x22;\x0D\x0A		\x3C/method\x3E\x3C/panel\x3E\x3Ctextbox jsml-class=\x22inlinetextbox\x22 xmlns=\x22http://cutesoft.net/jsml\x22\x3E\x3Cproperty name=\x22content_color\x22\x3E\x3Cget\x3E\x0D\x0A				return self._content_color;\x0D\x0A			\x3C/get\x3E\x3Cset\x3E\x0D\x0A				self._content_color=value;\x0D\x0A			\x3C/set\x3E\x3C/property\x3E\x3Cproperty name=\x22gray_color\x22\x3E\x3Cget\x3E\x0D\x0A				return self._gray_color;\x0D\x0A			\x3C/get\x3E\x3Cset\x3E\x0D\x0A				self._gray_color=value;\x0D\x0A			\x3C/set\x3E\x3C/property\x3E\x3Cproperty name=\x22gray_text\x22\x3E\x3Cget\x3E\x0D\x0A				return self._gray_text;\x0D\x0A			\x3C/get\x3E\x3Cset\x3E\x0D\x0A				if(value)value=value.split(\x27:\x27).join(\x27\x27);\x0D\x0A				self._gray_text=value;\x0D\x0A			\x3C/set\x3E\x3C/property\x3E\x3Cmethod name=\x22set_text\x22 overrideas=\x22textbox_set_text\x22\x3E\x3C![CDATA[\x0D\x0A			if(value\x26\x26value.substring(0,6)==\x22Guest:\x22)\x0D\x0A				value=\x22\x22;\x0D\x0A			self.textbox_set_text(value);\x0D\x0A			]]\x3E\x3C/method\x3E\x3Cmethod name=\x22get_text\x22 overrideas=\x22textbox_get_text\x22\x3E\x3C![CDATA[\x0D\x0A			var val=self.textbox_get_text();\x0D\x0A			if(self._gray_text\x26\x26val==self._gray_text)\x0D\x0A				return \x22\x22;\x0D\x0A			return val;\x0D\x0A			]]\x3E\x3C/method\x3E\x3Cinitialize\x3E\x0D\x0A			self._input.style.lineHeight=\x221.3em\x22;\x0D\x0A			self._input.style.fontSize=\x2212px\x22;\x0D\x0A			self._input.style.fontFamily = \x22\x27Helvetica Neue\x27,Arial,sans-serif\x22;\x0D\x0A		\x3C/initialize\x3E\x3Cattach name=\x22attach_dom\x22\x3E\x3C![CDATA[\x0D\x0A			var ipt = self._input;\x0D\x0A			ipt.onfocus=function()\x0D\x0A			{\x0D\x0A				if(self._gray_text\x26\x26self.textbox_get_text()==self._gray_text)\x0D\x0A				{\x0D\x0A					self.textbox_set_text(\x22\x22);\x0D\x0A				}\x0D\x0A				self.set_text_color(self._content_color||\x22\x22);\x0D\x0A			}\x0D\x0A			ipt.onblur = function()\x0D\x0A			{\x0D\x0A				if(self._gray_text\x26\x26!self.textbox_get_text())\x0D\x0A				{\x0D\x0A					self.textbox_set_text(self._gray_text);\x0D\x0A					self.set_text_color(self._gray_color||\x22\x22);\x0D\x0A				}\x0D\x0A				else\x0D\x0A				{\x0D\x0A					self.set_text_color(self._content_color||\x22\x22);\x0D\x0A				}\x0D\x0A			}	\x0D\x0A			ipt.onblur();\x0D\x0A			]]\x3E\x3C/attach\x3E\x3C/textbox\x3E\x3Cpanel jsml-class=\x22customdatapanel\x22 dock=\x22top\x22 visible=\x22false\x22 overflow=\x22visible\x22 xmlns=\x22http://cutesoft.net/jsml\x22\x3E\x3Cproperty name=\x22content_color\x22\x3E\x3Cget\x3E\x0D\x0A				return self._content_color;\x0D\x0A			\x3C/get\x3E\x3Cset\x3E\x0D\x0A				self._content_color=value;\x0D\x0A			\x3C/set\x3E\x3C/property\x3E\x3Cproperty name=\x22label_color\x22\x3E\x3Cget\x3E\x0D\x0A				return self._label_color;\x0D\x0A			\x3C/get\x3E\x3Cset\x3E\x0D\x0A				self._label_color=value;\x0D\x0A			\x3C/set\x3E\x3C/property\x3E\x3Cproperty name=\x22gray_color\x22\x3E\x3Cget\x3E\x0D\x0A				return self._gray_color;\x0D\x0A			\x3C/get\x3E\x3Cset\x3E\x0D\x0A				self._gray_color=value;\x0D\x0A			\x3C/set\x3E\x3C/property\x3E\x3Cmethod name=\x22get_json\x22\x3E\x3C![CDATA[\x0D\x0A			return ConvertToJson(MyLiveChat.CustomDataDefinition);\x0D\x0A			]]\x3E\x3C/method\x3E\x3Cmethod name=\x22validate_customdata\x22\x3E\x3C![CDATA[\x0D\x0A			if(!MyLiveChat.CustomDataDefinition||MyLiveChat.CustomDataDefinition.length==0)\x0D\x0A				return;\x0D\x0A			for(var i=0;i\x3CMyLiveChat.CustomDataDefinition.length;i++)\x0D\x0A			{\x0D\x0A				var cdd=MyLiveChat.CustomDataDefinition[i];\x0D\x0A				if(cdd.value||!cdd.required)\x0D\x0A					continue;\x0D\x0A				var ctrl=self._inputctrls[i];\x0D\x0A				if(!ctrl)\x0D\x0A					continue;\x0D\x0A				if(cdd.type==\x22dropdown\x22)\x0D\x0A				{\x0D\x0A					var arr=(cdd.items||\x22\x22).split(\x27\x5Cr\x27).join(\x22\x22).split(\x27\x5Cn\x27);\x0D\x0A					return \x22Please select \x22+cdd.text +\x22 , \x22+ arr[0];\x0D\x0A				}\x0D\x0A				return \x22Please type \x22+cdd.text;\x0D\x0A\x0D\x0A			}\x0D\x0A			]]\x3E\x3C/method\x3E\x3Cmethod name=\x22get_inputboxes\x22\x3E\x0D\x0A			return self._inputboxes;\x0D\x0A		\x3C/method\x3E\x3Cproperty name=\x22box_mode\x22\x3E\x3Cget\x3E\x0D\x0A				return self._box_mdoe;\x0D\x0A			\x3C/get\x3E\x3Cset\x3E\x0D\x0A				self._box_mdoe=value;\x0D\x0A			\x3C/set\x3E\x3C/property\x3E\x3Cinitialize\x3E\x0D\x0A\x0D\x0A			self._inputctrls=[];\x0D\x0A			self._inputboxes=[];\x0D\x0A\x0D\x0A			self.set_border_color(\x22\x22);\x0D\x0A		\x3C/initialize\x3E\x3Cattach name=\x22attach_dom\x22\x3E\x3C![CDATA[\x0D\x0A			\x0D\x0A		if(!MyLiveChat.CustomDataDefinition||!MyLiveChat.CustomDataDefinition.length)\x0D\x0A			return;\x0D\x0A		\x0D\x0A		function AddDropDown(cdd,panel){\x0D\x0A			var dropdown=jsml.new_dropdown();\x0D\x0A			var sel=dropdown._sel;\x0D\x0A			var arr=(cdd.items||\x22\x22).split(\x27\x5Cr\x27).join(\x22\x22).split(\x27\x5Cn\x27);\x0D\x0A			for(var i=0;i\x3Carr.length;i++)\x0D\x0A			{\x0D\x0A				var value=arr[i];\x0D\x0A				var color=self._content_color||\x22\x22;\x0D\x0A				if(cdd.required\x26\x26i==0)\x0D\x0A				{\x0D\x0A					value=\x22\x22;\x0D\x0A					color=self._gray_color||\x22\x22;\x0D\x0A				}\x0D\x0A				dropdown.add_item(arr[i],value);\x0D\x0A				sel.options[i].style.color=color;\x0D\x0A			}\x0D\x0A			dropdown.set_text(cdd.value||\x22\x22);\x0D\x0A			dropdown.attach_event(\x22change\x22,function()\x0D\x0A			{\x0D\x0A				cdd.value=dropdown.get_text();\x0D\x0A				sel.style.color=sel.options[Math.max(sel.selectedIndex,0)].style.color;\x0D\x0A			});\x0D\x0A			\x0D\x0A			if(arr.length\x3E0)\x0D\x0A			{\x0D\x0A				sel.style.color=sel.options[Math.max(sel.selectedIndex,0)].style.color;\x0D\x0A			}\x0D\x0A\x0D\x0A			sel.style.lineHeight=\x221em\x22;\x0D\x0A			sel.style.fontSize=\x2212px\x22;\x0D\x0A			sel.style.fontFamily = \x22\x27Helvetica Neue\x27,Arial,sans-serif\x22;\x0D\x0A\x0D\x0A			return dropdown;\x0D\x0A		}\x0D\x0A	\x0D\x0A		function AddTextBox(cdd,multipleline){\x0D\x0A			var textbox=jsml.new_textbox();\x0D\x0A			if(multipleline)\x0D\x0A			{\x0D\x0A				textbox.set_text_mode(\x22multipleline\x22);\x0D\x0A				textbox.set_height(66);\x0D\x0A			}\x0D\x0A			textbox.set_border_style(\x22solid\x22);\x0D\x0A			textbox.set_border_width(1);\x0D\x0A			textbox.set_text(cdd.value||\x22\x22);\x0D\x0A			textbox.attach_event(\x22change\x22,function()\x0D\x0A			{\x0D\x0A				var val=textbox.get_text();\x0D\x0A				if(self._box_mdoe==\x22inline\x22)\x0D\x0A				{\x0D\x0A					if(val==cdd.text)\x0D\x0A					{\x0D\x0A						val=\x22\x22;\x0D\x0A					}\x0D\x0A				}\x0D\x0A				cdd.value=val;\x0D\x0A			});\x0D\x0A			\x0D\x0A			if(self._box_mdoe==\x22inline\x22)\x0D\x0A			{\x0D\x0A				textbox._input.onfocus=function()\x0D\x0A				{\x0D\x0A					if(textbox.get_text()==cdd.text)\x0D\x0A					{\x0D\x0A						textbox.set_text(\x22\x22);\x0D\x0A					}\x0D\x0A					textbox.set_text_color(self._content_color||\x22\x22);\x0D\x0A				}\x0D\x0A				textbox._input.onblur=function()\x0D\x0A				{\x0D\x0A					if(!textbox.get_text())\x0D\x0A					{\x0D\x0A						textbox.set_text(cdd.text);\x0D\x0A						textbox.set_text_color(self._gray_color||\x22\x22);\x0D\x0A					}\x0D\x0A					else\x0D\x0A					{\x0D\x0A						textbox.set_text_color(self._content_color||\x22\x22);\x0D\x0A					}\x0D\x0A				}\x0D\x0A				textbox._input.onblur();\x0D\x0A			}\x0D\x0A			\x0D\x0A			textbox._input.style.lineHeight=\x221.3em\x22;\x0D\x0A			textbox._input.style.fontSize=\x2212px\x22;\x0D\x0A			textbox._input.style.fontFamily = \x22\x27Helvetica Neue\x27,Arial,sans-serif\x22;\x0D\x0A			textbox._input.style.backgroundColor=\x22#ffffff\x22;\x0D\x0A\x0D\x0A			return textbox;\x0D\x0A		}\x0D\x0A		function AddPanel(cdd)\x0D\x0A		{\x0D\x0A			var ctrl;\x0D\x0A			switch(cdd.type)\x0D\x0A			{\x0D\x0A				case \x22dropdown\x22:\x0D\x0A					ctrl=AddDropDown(cdd);\x0D\x0A					break;\x0D\x0A				case \x22textarea\x22:\x0D\x0A					ctrl=AddTextBox(cdd,true);\x0D\x0A					break;\x0D\x0A				case \x22textbox\x22:\x0D\x0A					ctrl=AddTextBox(cdd);\x0D\x0A					break;\x0D\x0A				default:\x0D\x0A					break;\x0D\x0A			}\x0D\x0A			\x0D\x0A			self._inputctrls.push(ctrl);\x0D\x0A			\x0D\x0A			if(!ctrl)\x0D\x0A				return;\x0D\x0A			\x0D\x0A			self._inputboxes.push(ctrl);\x0D\x0A			\x0D\x0A			ctrl.set_border_color(self.get_border_color()||\x22#cccccc\x22);\x0D\x0A			\x0D\x0A			var panel=jsml.new_panel();\x0D\x0A			panel.set_dock(\x22top\x22);\x0D\x0A			panel.set_height(22);\x0D\x0A			panel.set_overflow(\x22visible\x22);\x0D\x0A			panel.set_margin([3,3,3,3]);\x0D\x0A			panel.set_padding([0,12,0,12]);\x0D\x0A			\x0D\x0A			var label;\x0D\x0A			\x0D\x0A			if(self._box_mdoe==\x22inline\x22)\x0D\x0A			{\x0D\x0A				//no label\x0D\x0A				ctrl.set_right(0);\x0D\x0A			\x0D\x0A			}\x0D\x0A			else\x0D\x0A			{\x0D\x0A				label=jsml.new_label();\x0D\x0A				var labeltext=cdd.text;\x0D\x0A				if(labeltext.substring(0,labeltext.length-1)!=\x27:\x27)\x0D\x0A					labeltext+=\x27:\x27;\x0D\x0A				label.set_text(labeltext);\x0D\x0A				label.set_text_color(self._label_color||\x22\x22);\x0D\x0A				\x0D\x0A				if(self._box_mdoe==\x22top\x22)\x0D\x0A				{\x0D\x0A					label.set_dock(\x22top\x22);\x0D\x0A					ctrl.set_dock(\x22top\x22);\x0D\x0A					label.set_height(15);\x0D\x0A					label.set_vertical_align(\x22middle\x22);\x0D\x0A					panel.set_padding([0,3,0,3]);\x0D\x0A					label.set_css_text(\x22font:normal 11px/13px \x27Helvetica Neue\x27,Arial,sans-serif!important;\x22);\x0D\x0A					ctrl.set_css_text(\x22font:9px/12px \x27Helvetica Neue\x27,Arial,sans-serif!important\x22);\x0D\x0A				}\x0D\x0A				else\x0D\x0A				{\x0D\x0A					label.set_width(90);\x0D\x0A					ctrl.set_right(0);\x0D\x0A					label._element.style.fontSize=\x2212px\x22;\x0D\x0A					label._element.style.fontFamily = \x22\x27Helvetica Neue\x27,Arial,sans-serif\x22;\x0D\x0A				}\x0D\x0A				\x0D\x0A				panel.append_child(label);\x0D\x0A				\x0D\x0A			}\x0D\x0A			\x0D\x0A			panel.append_child(ctrl);\x0D\x0A			self.append_child(panel);\x0D\x0A			\x0D\x0A			self.invoke_event(\x22item_created\x22,panel,ctrl);\x0D\x0A			\x0D\x0A		}\x0D\x0A		for(var i=0;i\x3CMyLiveChat.CustomDataDefinition.length;i++)\x0D\x0A		{\x0D\x0A			AddPanel(MyLiveChat.CustomDataDefinition[i]);\x0D\x0A		}\x0D\x0A		self.set_visible(true);\x0D\x0A		\x0D\x0A		]]\x3E\x3C/attach\x3E\x3C/panel\x3E\x3Cjsml-def name=\x22waitingsizepanellogic\x22 xmlns=\x22http://cutesoft.net/jsml\x22\x3E\x3Cattach name=\x22attach_dom\x22\x3E\x3C![CDATA[\x0D\x0A			setTimeout(function()\x0D\x0A			{\x0D\x0A				var dh=self.get_demand_content_height()+22;\x0D\x0A				var ch=self.get_current_height();\x0D\x0A				if(!ch||dh\x3C=ch)return;\x0D\x0A				var val=Math.floor(dh-ch);\x0D\x0A				self.bubble_event(\x22addheight\x22,val);\x0D\x0A				\x0D\x0A				window._addheightvalue=Math.max(val,(window._addheightvalue||0));\x0D\x0A				setTimeout(function()\x0D\x0A				{\x0D\x0A					if(window._addheightvalue==0)\x0D\x0A						return;\x0D\x0A					if(MyLiveChat.apimode!=\x22chatdialog\x22)\x0D\x0A						return;\x0D\x0A					window.resizeBy(0,window._addheightvalue);\x0D\x0A					window.moveBy(0,-window._addheightvalue/2);\x0D\x0A					window._addheightvalue=0;\x0D\x0A				},50);\x0D\x0A			},50);\x0D\x0A			]]\x3E\x3C/attach\x3E\x3C/jsml-def\x3E\x3Cpanel jsml-class=\x22inlineview_offline\x22 dock=\x22fill\x22 padding=\x223\x22 back_color=\x22^(MyLiveChat.InlineChatBackColor||\x27White\x27)\x22 xmlns=\x22http://cutesoft.net/jsml\x22\x3E\x3Cjsml-ref name=\x22waitingsizepanellogic\x22 /\x3E\x3Cattach name=\x22resize\x22\x3E\x3C![CDATA[\x0D\x0A			var arr=[tb_name,tb_email,tb_subject,tb_enquiry];\x0D\x0A			arr=arr.concat(customdatapanel.get_inputboxes());\x0D\x0A			var cw=self.get_client_width();\x0D\x0A			var maxw=cw - 110;\x0D\x0A			if(maxw\x3C60)maxw=60;\x0D\x0A			if(maxw\x3E240)maxw=240+Math.floor((maxw-240)*0.7);\x0D\x0A			for(var i=0;i\x3Carr.length;i++)\x0D\x0A			{\x0D\x0A				arr[i].set_width(maxw);\x0D\x0A			}\x0D\x0A			]]\x3E\x3C/attach\x3E\x3Cobject jsml-base=\x22privatelabelheadertext\x22 dock=\x22top\x22 height=\x2220\x22 margin=\x223,0,3,20\x22 /\x3E\x3Cimage src=\x22^MyLiveChat.InlineChatOfflineLogo\x22 dock=\x22top\x22 margin=\x225,0,0,5\x22\x3E\x3Cinitialize\x3E\x3C![CDATA[\x0D\x0A						if(!MyLiveChat.InlineChatShowLogo) self.set_visible(0);\x0D\x0A						]]\x3E\x3C/initialize\x3E\x3C/image\x3E\x3Clabel dock=\x22top\x22 height=\x2236\x22 margin=\x2210,5,5,5\x22 padding=\x220,5,20,5\x22 overflow_y=\x22visible\x22 text=\x22^MyLiveChat.FeedbackMessage\x22 css_text=\x22^MyLiveChat.InlineChatIntroCssText\x22 text_color=\x22^(MyLiveChat.InlineChatIntroColor||MyLiveChat.InlineChatTextColor||\x27\x27)\x22 word_wrap=\x22true\x22 /\x3E\x3Cpanel dock=\x22top\x22 height=\x2222\x22 margin=\x223\x22 padding=\x220,12,0,12\x22\x3E\x3Clabel text=\x22^MyLiveChat.TEXT_NAME\x22 width=\x2290\x22 text_color=\x22^(MyLiveChat.InlineChatTextColor||\x27\x27)\x22 /\x3E\x3Ctextbox jsml-local=\x22tb_name\x22 jsml-member=\x22tb_name\x22 text_color=\x22^(MyLiveChat.InlineChatEmbedColor||\x27#000000\x27)\x22 css_text=\x22border-radius:3px; box-shadow:none;\x22 right=\x220\x22\x3E\x3C/textbox\x3E\x3C/panel\x3E\x3Cpanel dock=\x22top\x22 height=\x2222\x22 margin=\x223\x22 padding=\x220,12,0,12\x22\x3E\x3Clabel text=\x22^MyLiveChat.TEXT_EMAIL\x22 width=\x2290\x22 text_color=\x22^(MyLiveChat.InlineChatTextColor||\x27\x27)\x22 /\x3E\x3Ctextbox jsml-local=\x22tb_email\x22 jsml-member=\x22tb_email\x22 text_color=\x22^(MyLiveChat.InlineChatEmbedColor||\x27#000000\x27)\x22 css_text=\x22border-radius:3px; box-shadow:none;\x22 right=\x220\x22\x3E\x3C/textbox\x3E\x3C/panel\x3E\x3Cpanel jsml-base=\x22customdatapanel\x22 jsml-local=\x22customdatapanel\x22 jsml-member=\x22customdatapanel\x22 content_color=\x22^(MyLiveChat.InlineChatEmbedColor||\x27black\x27)\x22 label_color=\x22^(MyLiveChat.InlineChatTextColor||\x27black\x27)\x22 gray_color=\x22^(MyLiveChat.InlineChatTextColor||\x27#aaaaaa\x27)\x22 /\x3E\x3Cpanel dock=\x22top\x22 height=\x2222\x22 margin=\x223\x22 padding=\x220,12,0,12\x22\x3E\x3Clabel text=\x22^MyLiveChat.TEXT_SUBJECT\x22 width=\x2290\x22 text_color=\x22^(MyLiveChat.InlineChatTextColor||\x27\x27)\x22 /\x3E\x3Ctextbox jsml-local=\x22tb_subject\x22 jsml-member=\x22tb_subject\x22 text_color=\x22^(MyLiveChat.InlineChatEmbedColor||\x27#000000\x27)\x22 css_text=\x22border-radius:3px; box-shadow:none;\x22 right=\x220\x22\x3E\x3C/textbox\x3E\x3C/panel\x3E\x3Cpanel dock=\x22top\x22 height=\x2266\x22 margin=\x223\x22 overflow=\x22visible\x22 padding=\x220,12,0,12\x22\x3E\x3Clabel text=\x22^MyLiveChat.TEXT_ENQUIRY\x22 width=\x2290\x22 text_color=\x22^(MyLiveChat.InlineChatTextColor||\x27\x27)\x22 /\x3E\x3Ctextbox jsml-local=\x22tb_enquiry\x22 jsml-member=\x22tb_enquiry\x22 right=\x220\x22 text_color=\x22^(MyLiveChat.InlineChatEmbedColor||\x27#000000\x27)\x22 css_text=\x22border-radius:3px; box-shadow:none;\x22 text_mode=\x22multipleline\x22 height=\x2266\x22\x3E\x3C/textbox\x3E\x3C/panel\x3E\x3Cpanel dock=\x22top\x22 height=\x2222\x22 margin=\x2215,3,3,3\x22 padding=\x220,12,0,12\x22\x3E\x3Cobject jsml-base=\x22privatelabelbottomtext\x22 dock=\x22fill\x22 padding=\x220,100,0,5\x22\x3E\x3C/object\x3E\x3Cbutton jsml-member=\x22buttonsend\x22 right=\x220\x22 width=\x2295\x22 css_text=\x22height:22px!important; margin:0px!important;float:none!important;white-space:nowrap;word-wrap:break-word;text-overflow:ellipsis;\x22 text=\x22^MyLiveChat.TEXT_UI_SEND\x22\x3E\x3C/button\x3E\x3C/panel\x3E\x3Clabel jsml-local=\x22labelalert\x22 text_color=\x22red\x22 dock=\x22top\x22 height=\x2222\x22 margin=\x223\x22 padding=\x220,12,0,12\x22 word_wrap=\x22true\x22 overflow_y=\x22visible\x22\x3E\x3C/label\x3E\x3C/panel\x3E\x3Cpanel jsml-class=\x22inlineview_wait\x22 dock=\x22fill\x22 padding=\x223\x22 back_color=\x22^(MyLiveChat.InlineChatBackColor||\x27White\x27)\x22 xmlns=\x22http://cutesoft.net/jsml\x22\x3E\x3Cjsml-ref name=\x22waitingsizepanellogic\x22 /\x3E\x3Cattach name=\x22resize\x22\x3E\x3C![CDATA[\x0D\x0A					var arr=[tb_name,tb_email,tb_question,sel_department];\x0D\x0A					arr=arr.concat(customdatapanel.get_inputboxes());\x0D\x0A					var cw=self.get_client_width();\x0D\x0A					var maxw=cw - 110;\x0D\x0A					if(maxw\x3C60)maxw=60;\x0D\x0A					if(maxw\x3E240)maxw=240+Math.floor((maxw-240)*0.7);\x0D\x0A					for(var i=0;i\x3Carr.length;i++)\x0D\x0A					{\x0D\x0A						arr[i].set_width(maxw);\x0D\x0A					}\x0D\x0A					]]\x3E\x3C/attach\x3E\x3Cobject jsml-base=\x22privatelabelheadertext\x22 dock=\x22top\x22 height=\x2220\x22 margin=\x223,0,3,20\x22 /\x3E\x3Cimage src=\x22^MyLiveChat.InlineChatOnlineLogo\x22 dock=\x22top\x22 margin=\x223\x22\x3E\x3Cinitialize\x3E\x3C![CDATA[\x0D\x0A						if(!MyLiveChat.InlineChatShowLogo) self.set_visible(0);\x0D\x0A						]]\x3E\x3C/initialize\x3E\x3C/image\x3E\x3Clabel dock=\x22top\x22 height=\x2236\x22 margin=\x2210,15,15,15\x22 text=\x22^MyLiveChat.WaitingMessage\x22 css_text=\x22^MyLiveChat.InlineChatIntroCssText\x22 text_color=\x22^(MyLiveChat.InlineChatIntroColor||MyLiveChat.InlineChatTextColor||\x27\x27)\x22 word_wrap=\x22true\x22 /\x3E\x3Cpanel dock=\x22top\x22 height=\x2222\x22 margin=\x223\x22 padding=\x220,12,0,12\x22\x3E\x3Clabel text=\x22^MyLiveChat.TEXT_NAME\x22 width=\x2290\x22 text_color=\x22^(MyLiveChat.InlineChatTextColor||\x27\x27)\x22 /\x3E\x3Ctextbox jsml-local=\x22tb_name\x22 jsml-member=\x22tb_name\x22 text_color=\x22^(MyLiveChat.InlineChatEmbedColor||\x27#000000\x27)\x22 css_text=\x22border-radius:3px; box-shadow:none;\x22 right=\x220\x22\x3E\x3C/textbox\x3E\x3C/panel\x3E\x3Cpanel dock=\x22top\x22 height=\x2222\x22 margin=\x223\x22 padding=\x220,12,0,12\x22 visible=\x22^MyLiveChat.InlineChatWaitingFieldEmail!=0\x22\x3E\x3Clabel text=\x22^MyLiveChat.TEXT_EMAIL\x22 width=\x2290\x22 text_color=\x22^(MyLiveChat.InlineChatTextColor||\x27\x27)\x22 /\x3E\x3Ctextbox jsml-local=\x22tb_email\x22 jsml-member=\x22tb_email\x22 text_color=\x22^(MyLiveChat.InlineChatEmbedColor||\x27#000000\x27)\x22 css_text=\x22border-radius:3px; box-shadow:none;\x22 right=\x220\x22\x3E\x3C/textbox\x3E\x3C/panel\x3E\x3Cpanel jsml-base=\x22customdatapanel\x22 jsml-local=\x22customdatapanel\x22 jsml-member=\x22customdatapanel\x22 content_color=\x22^(MyLiveChat.InlineChatEmbedColor||\x27black\x27)\x22 label_color=\x22^(MyLiveChat.InlineChatTextColor||\x27black\x27)\x22 gray_color=\x22^(MyLiveChat.InlineChatTextColor||\x27#aaaaaa\x27)\x22 /\x3E\x3Cpanel dock=\x22top\x22 height=\x2266\x22 margin=\x223\x22 overflow=\x22visible\x22 padding=\x220,12,0,12\x22 visible=\x22^MyLiveChat.InlineChatWaitingFieldQuestion!=0\x22\x3E\x3Clabel text=\x22^MyLiveChat.TEXT_QUESTION\x22 width=\x2290\x22 text_color=\x22^(MyLiveChat.InlineChatTextColor||\x27\x27)\x22 /\x3E\x3Ctextbox jsml-local=\x22tb_question\x22 jsml-member=\x22tb_question\x22 right=\x220\x22 text_color=\x22^(MyLiveChat.InlineChatEmbedColor||\x27#000000\x27)\x22 css_text=\x22border-radius:3px; box-shadow:none;\x22 text_mode=\x22multipleline\x22 height=\x2266\x22\x3E\x3C/textbox\x3E\x3C/panel\x3E\x3Cpanel dock=\x22top\x22 height=\x2222\x22 margin=\x223\x22 padding=\x220,12,0,12\x22 visible=\x22^MyLiveChat.InlineChatWaitingFieldDepartment!=0\x22\x3E\x3Clabel text=\x22^MyLiveChat.TEXT_DEPARTMENT\x22 width=\x2290\x22 text_color=\x22^(MyLiveChat.InlineChatTextColor||\x27\x27)\x22 /\x3E\x3Cdropdown jsml-local=\x22sel_department\x22 jsml-member=\x22sel_department\x22 text_color=\x22^(MyLiveChat.InlineChatEmbedColor||\x27#000000\x27)\x22 right=\x220\x22 css_text=\x22font:12px \x27Helvetica Neue\x27,Arial,sans-serif!important; border-radius:0px!important;box-shadow: 0px 0px 6px #d9d9d9;-moz-box-shadow: 0px 0px 6px #d9d9d9;-webkit-box-shadow: 0px 0px 6px #d9d9d9;\x22\x3E\x3C/dropdown\x3E\x3C/panel\x3E\x3Cpanel dock=\x22top\x22 height=\x2222\x22 margin=\x223\x22 padding=\x220,12,0,12\x22\x3E\x3Cobject jsml-base=\x22privatelabelbottomtext\x22 dock=\x22fill\x22 padding=\x220,100,0,5\x22\x3E\x3C/object\x3E\x3Cbutton jsml-member=\x22buttonsend\x22 right=\x220\x22 width=\x22120\x22 css_text=\x22height:22px!important; margin:0px!important;float:none!important;white-space:nowrap;word-wrap:break-word;text-overflow:ellipsis;\x22 text=\x22^MyLiveChat.TEXT_STARTCHAT\x22\x3E\x3C/button\x3E\x3C/panel\x3E\x3Clabel jsml-local=\x22labelalert\x22 text_color=\x22red\x22 dock=\x22top\x22 height=\x2222\x22 margin=\x223\x22 padding=\x220,12,0,12\x22 word_wrap=\x22true\x22 overflow_y=\x22visible\x22\x3E\x3C/label\x3E\x3C/panel\x3E\x3Cpanel jsml-class=\x22inlineview_supportpanel\x22 back_color=\x22^(MyLiveChat.InlineChatBackColor||\x27White\x27)\x22 xmlns=\x22http://cutesoft.net/jsml\x22\x3E\x3Cpanel dock=\x22top\x22 height=\x2231\x22 visible=\x22^MyLiveChat.SupportShowTopToolbar\x22\x3E\x3Cobject jsml-base=\x22privatelabelheadertext\x22 dock=\x22right\x22 height=\x2220\x22 margin=\x223,12,3,0\x22 /\x3E\x3Cpanel jsml-local=\x22toolbar\x22 dock=\x22fill\x22 margin=\x227,7,2,7\x22\x3E\x3Cobject jsml-base=\x22toolButton\x22 imagefile=\x22save.png\x22 visible=\x22^MyLiveChat.SupportShowSaveButton\x22 tooltip=\x22^TEXT(\x27UI_Save\x27)\x22\x3E\x3Cattach name=\x22click\x22\x3E\x0D\x0A						SaveMessages(document.getElementById(\x22messageList\x22));\x0D\x0A					\x3C/attach\x3E\x3C/object\x3E\x3Cobject jsml-base=\x22toolButton\x22 imagefile=\x22mail.png\x22 visible=\x22^MyLiveChat.SupportShowMailButton\x22 tooltip=\x22^TEXT(\x27UI_Mail\x27)\x22\x3E\x3Cattach name=\x22click\x22\x3E\x0D\x0A						SUI_SendMail();\x0D\x0A					\x3C/attach\x3E\x3C/object\x3E\x3Cobject jsml-base=\x22toolButton\x22 imagefile=\x22printer.png\x22 visible=\x22^MyLiveChat.SupportShowPrintButton\x22 tooltip=\x22^TEXT(\x27UI_Print\x27)\x22\x3E\x3Cattach name=\x22click\x22\x3E\x0D\x0A						window.print()\x0D\x0A					\x3C/attach\x3E\x3C/object\x3E\x3Cobject jsml-base=\x22toolButton\x22 imagefile=\x22sound_on.png\x22 visible=\x22^MyLiveChat.SupportShowSoundButton\x22 tooltip=\x22^TEXT(\x27UI_PlaySound\x27)\x22\x3E\x3Cattach name=\x22click\x22\x3E\x0D\x0A						ChatUI_SetEnableSound(!ChatUI_GetEnableSound());\x0D\x0A						self.UpdateSoundUI();\x0D\x0A					\x3C/attach\x3E\x3Cmethod name=\x22UpdateSoundUI\x22\x3E\x3C![CDATA[\x0D\x0A						if(ChatUI_GetEnableSound())\x0D\x0A						{\x0D\x0A							self.set_imagefile(\x22sound_on.png\x22);\x0D\x0A							self.set_tooltip(TEXT(\x27UI_SoundOn\x27));\x0D\x0A						}\x0D\x0A						else\x0D\x0A						{\x0D\x0A							self.set_imagefile(\x22sound_off.png\x22);\x0D\x0A							self.set_tooltip(TEXT(\x27UI_SoundOff\x27));\x0D\x0A						}\x0D\x0A						]]\x3E\x3C/method\x3E\x3Cinitialize\x3E\x0D\x0A						self.UpdateSoundUI();\x0D\x0A					\x3C/initialize\x3E\x3C/object\x3E\x3Cobject jsml-base=\x22toolButton\x22 imagefile=\x22icon_file.gif\x22 visible=\x22^MyLiveChat.SupportShowUploadButton\x22 tooltip=\x22^TEXT(\x27UI_File\x27)\x22\x3E\x3Cattach name=\x22click\x22\x3E\x0D\x0A						if(!IsConnected())return;\x0D\x0A						ChatUI_ShowSendFile();\x0D\x0A					\x3C/attach\x3E\x3C/object\x3E\x3C/panel\x3E\x3C/panel\x3E\x3Cpanel dock=\x22bottom\x22 overflow=\x22visible\x22\x3E\x3Cpanel jsml-local=\x22toolbar2\x22 dock=\x22top\x22 height=\x2230\x22 margin=\x220,0,3,7\x22 visible=\x22^MyLiveChat.SupportShowEditToolbar\x22\x3E\x3Cobject jsml-base=\x22editButton\x22 imagefile=\x22bold.gif\x22 visible=\x22^MyLiveChat.SupportShowBoldButton\x22 tooltip=\x22^TEXT(\x27UI_Bold\x27)\x22\x3E\x3Cattach name=\x22click\x22\x3E\x0D\x0A						self.set_checked(!self.get_checked());\x0D\x0A						SetFontBold(self.get_checked())\x0D\x0A					\x3C/attach\x3E\x3C/object\x3E\x3Cobject jsml-base=\x22editButton\x22 imagefile=\x22italic.gif\x22 visible=\x22^MyLiveChat.SupportShowItalicButton\x22 tooltip=\x22^TEXT(\x27UI_Italic\x27)\x22\x3E\x3Cattach name=\x22click\x22\x3E\x0D\x0A						self.set_checked(!self.get_checked());\x0D\x0A						SetFontItalic(self.get_checked())\x0D\x0A					\x3C/attach\x3E\x3C/object\x3E\x3Cobject jsml-base=\x22editButton\x22 imagefile=\x22underline.gif\x22 visible=\x22^MyLiveChat.SupportShowUnderlineButton\x22 tooltip=\x22^TEXT(\x27UI_Underline\x27)\x22\x3E\x3Cattach name=\x22click\x22\x3E\x0D\x0A						self.set_checked(!self.get_checked());\x0D\x0A						SetFontUnderline(self.get_checked())\x0D\x0A					\x3C/attach\x3E\x3C/object\x3E\x3Cobject jsml-base=\x22editButton\x22 imagefile=\x22IM_Emotion.png\x22 visible=\x22^MyLiveChat.SupportShowEmotionButton\x22 tooltip=\x22^TEXT(\x27UI_Emotion\x27)\x22\x3E\x3Cattach name=\x22click\x22\x3E\x0D\x0A						ChatUI_ShowEmotionPanel(self._element);\x0D\x0A					\x3C/attach\x3E\x3C/object\x3E\x3C/panel\x3E\x3Cpanel dock=\x22top\x22 height=\x2260\x22 border_color=\x22#d1d9db\x22 border_width=\x221\x22 margin=\x220,5,0,5\x22\x3E\x3C!-- Input Box --\x3E\x3Ctextbox jsml-local=\x22tb_msg\x22 dock=\x22fill\x22 text_mode=\x22multipleline\x22 border_width=\x220\x22\x3E\x3C/textbox\x3E\x3C!--\x0D\x0A			\x3Clabel var=\x22labelhelp\x22 right=\x220\x22 bottom=\x220\x22 text=\x22Press Shift+Enter to go to the next line\x22 height=\x2218\x22 width=\x22320\x22 text_align=\x22right\x22 vertical_align=\x22bottom\x22 margin=\x220,30,2,0\x22 text_color=\x22#999999\x22/\x3E\x0D\x0A			--\x3E\x3C/panel\x3E\x3Cpanel dock=\x22top\x22 height=\x2226\x22 border_color=\x22#d1d9db\x22 border_width=\x220\x22 margin=\x220,5,5,5\x22\x3E\x3C!-- Indicator --\x3E\x3Cpanel dock=\x22fill\x22 margin=\x225,0,0,5\x22 jsml-base=\x22typingPanel\x22 /\x3E\x3C!-- Send Button --\x3E\x3Cpanel jsml-local=\x22btn_send\x22 jsml-base=\x22chatButton\x22 text=\x22^MyLiveChat.TEXT_UI_SEND\x22 right=\x220\x22\x3E\x3Cattach name=\x22click\x22\x3E\x3C![CDATA[\x0D\x0A					setTimeout(function(){tb_msg.focus()},10);\x0D\x0A					var txt=tb_msg.get_text();\x0D\x0A					if(!txt)return;\x0D\x0A					if(!waitready)\x0D\x0A					{						\x0D\x0A						alert(TEXT(\x22UI_SUPPORT_WAIT\x22,\x22\x22));\x0D\x0A						return;\x0D\x0A					}\x0D\x0A					if(!IsConnected())\x0D\x0A					{\x0D\x0A						Connect();\x0D\x0A						return;\x0D\x0A					}\x0D\x0A					if(GetUsers().length\x3C2)\x0D\x0A					{\x0D\x0A						alert(TEXT_UI_SUPPORT_NOAGENT);\x0D\x0A						return;\x0D\x0A					}\x0D\x0A					if(ChatUI_SendMessageWithFloodControl(txt,null))\x0D\x0A					{\x0D\x0A						tb_msg.set_text(\x22\x22);\x0D\x0A						setTimeout(function(){tb_msg.set_text(\x22\x22)},20);\x0D\x0A					}\x0D\x0A					]]\x3E\x3C/attach\x3E\x3C/panel\x3E\x3C/panel\x3E\x3C/panel\x3E\x3C!-- Message List --\x3E\x3Cpanel dock=\x22fill\x22 back_color=\x22white\x22 border_color=\x22#d1d9db\x22 border_width=\x221\x22 margin=\x223\x22\x3E\x3Chtmlcontrol dock=\x22fill\x22 margin=\x223\x22\x3E\x3Cxmldata\x3E\x3C/xmldata\x3E\x3Cinitialize\x3E\x0D\x0A					self._element.id=\x22messageList\x22;\x0D\x0A					self._element.style.overflow=\x22auto\x22;\x0D\x0A				\x3C/initialize\x3E\x3C/htmlcontrol\x3E\x3C/panel\x3E\x3Cinitialize\x3E\x3C![CDATA[\x0D\x0A			window.inputBox=tb_msg;\x0D\x0A\x0D\x0A			jsml.dom_attach_event(tb_msg._input,\x22keydown\x22,function(de){\x0D\x0A						\x0D\x0A				SetIsTyping();\x0D\x0A						\x0D\x0A				setTimeout(function()\x0D\x0A				{\x0D\x0A					var linecount=tb_msg.get_text().split(\x27\x5Cn\x27).length;\x0D\x0A					//labelhelp.set_visible(linecount\x3C2);\x0D\x0A				},500);\x0D\x0A						\x0D\x0A				if(de.keyCode!=13)return;\x0D\x0A				if(de.shiftKey)return;\x0D\x0A				btn_send.invoke_event(\x22click\x22);\x0D\x0A				if(de.preventDefault)de.preventDefault();\x0D\x0A				return false;\x0D\x0A						\x0D\x0A			});\x0D\x0A			]]\x3E\x3C/initialize\x3E\x3C/panel\x3E\x3Cpanel jsml-class=\x22inlineview_surveypanel\x22 xmlns=\x22http://cutesoft.net/jsml\x22\x3E\x3Cpanel dock=\x22fill\x22 back_color=\x22gray\x22 opacity=\x2260\x22\x3E\x3C/panel\x3E\x3Cattach name=\x22resize\x22\x3E\x3C![CDATA[\x0D\x0A                /*\x0D\x0A				if(surveypanel.get_current_width()\x3E520 \x26\x26 surveypanel.get_current_height()\x3E360)\x0D\x0A				{\x0D\x0A					var ml =  Math.floor((surveypanel.get_current_width()-520)/2);\x0D\x0A					var mt = Math.floor((surveypanel.get_current_height()-360)/2);\x0D\x0A					self.set_margin(mt + \x22,\x22 + ml + \x22,\x22 + mt +\x22,\x22 + ml);\x0D\x0A				}\x0D\x0A                */\x0D\x0A                var cw=instance.get_client_width();\x0D\x0A				var ch=instance.get_client_height();\x0D\x0A				var dw=innerpanel.get_width();\x0D\x0A				var dh=innerpanel.get_height();\x0D\x0A                var x=(cw-dw)/2;\x0D\x0A                var y=(ch-dh)/2;\x0D\x0A                innerpanel.set_left(parseInt(x));\x0D\x0A                innerpanel.set_top(parseInt(y));\x0D\x0A			]]\x3E\x3C/attach\x3E\x3Cpanel jsml-local=\x22innerpanel\x22 width=\x22330\x22 height=\x22300\x22 overflow_y=\x22visible\x22\x3E\x3Cpanel dock=\x22fill\x22 back_color=\x22white\x22 border_color=\x22Gray\x22 border_width=\x222\x22 overflow_y=\x22visible\x22\x3E\x3Cpanel dock=\x22top\x22 height=\x2232\x22 margin=\x220,0,0,0\x22 padding=\x220,12,0,12\x22 back_color=\x22^(MyLiveChat.InlineChatBackColor||\x27#CCCCCC\x27)\x22 border_color=\x22Gray\x22 border_width=\x220,0,1,0\x22\x3E\x3Clabel dock=\x22fill\x22 text=\x22^MyLiveChat.SurveyHeadline\x22 text_color=\x22^(MyLiveChat.InlineChatTextColor||\x27\x27)\x22 vertical_align=\x22middle\x22 css_text=\x22font-weight:bold;\x22 /\x3E\x3C/panel\x3E\x3Cpanel dock=\x22top\x22 height=\x2252\x22 margin=\x220,0,5,0\x22 padding=\x220,12,0,12\x22 back_color=\x22#f0f1f3\x22 border_color=\x22#ebebeb\x22 border_width=\x220,0,1,0\x22 overflow_y=\x22visible\x22\x3E\x3Cpanel dock=\x22fill\x22 margin=\x225,0,5,0\x22 overflow_y=\x22visible\x22\x3E\x3Clabel dock=\x22fill\x22 text=\x22^MyLiveChat.SurveyMessage\x22 vertical_align=\x22middle\x22 text_color=\x22gray\x22 word_wrap=\x22true\x22 overflow_y=\x22visible\x22 /\x3E\x3C/panel\x3E\x3C/panel\x3E\x3Cpanel dock=\x22top\x22 height=\x2222\x22 margin=\x225,3,3,3\x22 padding=\x220,12,0,12\x22 visible=\x22^MyLiveChat.SurveyUseEmail\x22\x3E\x3Clabel text=\x22^MyLiveChat.TEXT_EMAIL\x22 width=\x2290\x22 overflow=\x22hidden\x22 /\x3E\x3Ctextbox jsml-local=\x22tb_email\x22 jsml-member=\x22tb_email\x22 left=\x22100\x22 width=\x22200\x22 /\x3E\x3C/panel\x3E\x3Cpanel dock=\x22top\x22 height=\x2222\x22 margin=\x225,3,3,3\x22 padding=\x220,12,0,12\x22 visible=\x22^MyLiveChat.SurveyUseEmail\x22\x3E\x3Clabel text=\x22^MyLiveChat.TEXT_CHATLOG\x22 width=\x2290\x22 overflow=\x22hidden\x22 vertical_align=\x22middle\x22 /\x3E\x3Chtmlcontrol jsml-local=\x22tb_log\x22 left=\x22100\x22 width=\x22200\x22 vertical_align=\x22middle\x22 overflow=\x22hidden\x22\x3E\x3Cxmldata\x3E\x3Cinput type=\x22checkbox\x22 id=\x22cb_savelogtoemail\x22 style=\x22vertical-align:middle;\x22 /\x3E\x3Clabel id=\x22labelsavelogtoemail\x22 for=\x22cb_savelogtoemail\x22 style=\x22vertical-align:middle;\x22\x3E\x3C/label\x3E\x3C/xmldata\x3E\x3Cattach name=\x22attach_dom\x22\x3E\x0D\x0A							(self.find_element(\x22labelsavelogtoemail\x22)||{}).innerHTML=MyLiveChat.SurveyLogTooltip;\x0D\x0A						\x3C/attach\x3E\x3C/htmlcontrol\x3E\x3C/panel\x3E\x3Cpanel dock=\x22top\x22 height=\x2222\x22 margin=\x223\x22 padding=\x220,12,0,12\x22 visible=\x22^MyLiveChat.SurveyUseRating\x22\x3E\x3Clabel text=\x22^MyLiveChat.TEXT_RATING\x22 width=\x2290\x22 overflow=\x22hidden\x22 vertical_align=\x22middle\x22 /\x3E\x3Chtmlcontrol left=\x22100\x22 width=\x2280\x22 vertical_align=\x22middle\x22\x3E\x3Cxmldata\x3E\x3Cdiv id=\x22div_star\x22 style=\x22width: 80px; cursor:pointer; height: 20px!important; background: url(\x27images/star_5.gif\x27) 0px 2px no-repeat;\x22\x3E\x3C/div\x3E\x3C/xmldata\x3E\x3C/htmlcontrol\x3E\x3Cdropdown jsml-local=\x22dd_rating\x22 left=\x22100\x22 width=\x22200\x22 visible=\x220\x22\x3E\x3Clistitem value=\x225\x22 text=\x22^MyLiveChat.SurveyRate5\x22 /\x3E\x3Clistitem value=\x224\x22 text=\x22^MyLiveChat.SurveyRate4\x22 /\x3E\x3Clistitem value=\x223\x22 text=\x22^MyLiveChat.SurveyRate3\x22 /\x3E\x3Clistitem value=\x222\x22 text=\x22^MyLiveChat.SurveyRate2\x22 /\x3E\x3Clistitem value=\x221\x22 text=\x22^MyLiveChat.SurveyRate1\x22 /\x3E\x3C/dropdown\x3E\x3Cinitialize\x3E\x3C![CDATA[\x0D\x0A						dd_rating._sel.style.fontFamily = \x22\x27Helvetica Neue\x27,Arial,sans-serif\x22;\x0D\x0A                        \x0D\x0A                        var imgstar = self.find_element(\x22div_star\x22);\x0D\x0A                        imgstar.onclick = function(e)\x0D\x0A                        {\x0D\x0A                            var x = GetEventPostion(e);\x0D\x0A                            var rv = parseInt(x / 16);\x0D\x0A                            if(x%16\x3E0) rv++;\x0D\x0A                            dd_rating.set_text(rv);\x0D\x0A                            imgstar.style.backgroundPosition = rv*16-80 + \x22px 2px\x22;\x0D\x0A                        }\x0D\x0A                        imgstar.onmousemove = function(e)\x0D\x0A                        {\x0D\x0A                            var x = GetEventPostion(e);\x0D\x0A                            var rv = parseInt(x / 16);\x0D\x0A                            if(x%16\x3E0) rv++;\x0D\x0A                            imgstar.style.backgroundPosition = rv*16-80 + \x22px 2px\x22;\x0D\x0A                        }\x0D\x0A                        imgstar.onmouseout = function(e)\x0D\x0A                        {\x0D\x0A                            var rv = parseInt(dd_rating.get_text());\x0D\x0A                            imgstar.style.backgroundPosition = rv*16-80 + \x22px 2px\x22;\x0D\x0A                        }\x0D\x0A\x0D\x0A                        function GetEventPostion(e)\x0D\x0A                        {\x0D\x0A                            e = window.event || e;\x0D\x0A                            \x0D\x0A                            var targ;\x0D\x0A	                        if (e.target) targ = e.target;\x0D\x0A	                        else if (e.srcElement) targ = e.srcElement;\x0D\x0A	                        if (targ.nodeType == 3) // defeat Safari bug\x0D\x0A		                        targ = targ.parentNode;\x0D\x0A                            var _x = 0;\x0D\x0A                            var _y = 0;\x0D\x0A                            var el = targ;\x0D\x0A                            while( el \x26\x26 !isNaN( el.offsetLeft ) \x26\x26 !isNaN( el.offsetTop ) ) {\x0D\x0A                                _x += el.offsetLeft - el.scrollLeft;\x0D\x0A                                _y += el.offsetTop - el.scrollTop;\x0D\x0A                                el = el.offsetParent;\x0D\x0A                            }\x0D\x0A                            \x0D\x0A                            var posx = 0;\x0D\x0A                            var posy = 0;\x0D\x0A                            if (!e) var e = window.event;\x0D\x0A                            if (e.pageX || e.pageY) 	{\x0D\x0A                                posx = e.pageX;\x0D\x0A                                posy = e.pageY;\x0D\x0A                            }\x0D\x0A                            else if (e.clientX || e.clientY) 	{\x0D\x0A                                posx = e.clientX + document.body.scrollLeft\x0D\x0A                                + document.documentElement.scrollLeft;\x0D\x0A                                posy = e.clientY + document.body.scrollTop\x0D\x0A                                + document.documentElement.scrollTop;\x0D\x0A                            }\x0D\x0A                            \x0D\x0A                            return posx - _x;\x0D\x0A                        }\x0D\x0A                        ]]\x3E\x3C/initialize\x3E\x3C/panel\x3E\x3Cpanel dock=\x22top\x22 height=\x2266\x22 margin=\x225,3,3,3\x22 padding=\x220,12,0,12\x22 visible=\x22^MyLiveChat.SurveyUseComment\x22\x3E\x3Clabel text=\x22^MyLiveChat.TEXT_COMMENT\x22 /\x3E\x3Ctextbox jsml-local=\x22tb_comment\x22 left=\x22100\x22 width=\x22200\x22 height=\x2250\x22 text_mode=\x22multipleline\x22 /\x3E\x3C/panel\x3E\x3Cpanel dock=\x22top\x22 height=\x2225\x22 margin=\x223\x22 padding=\x220,12,0,12\x22\x3E\x3Cbutton left=\x2230\x22 width=\x22110\x22 height=\x2225\x22 text=\x22^MyLiveChat.TEXT_UI_SEND\x22\x3E\x3Cattach name=\x22click\x22\x3E\x3C![CDATA[\x0D\x0A							var param={}\x0D\x0A							param.Email=tb_email.get_text();\x0D\x0A							param.SendLog=document.getElementById(\x27cb_savelogtoemail\x27).checked;\x0D\x0A							param.Rating=dd_rating.get_text();\x0D\x0A							param.Comment=tb_comment.get_text();\x0D\x0A							\x0D\x0A							function savesurvey_callback(call)\x0D\x0A							{\x0D\x0A								self.set_disabled(false);\x0D\x0A								\x0D\x0A								if(call.Error)\x0D\x0A								{\x0D\x0A									alert(call.Error.message);\x0D\x0A									return true;\x0D\x0A								}\x0D\x0A								\x0D\x0A								var result=call.ReturnValue;\x0D\x0A								if(result.Ready)\x0D\x0A								{\x0D\x0A									alert(result.Message);\x0D\x0A								\x0D\x0A									//close window\x0D\x0A									Disconnect(true);\x0D\x0A									window.close();\x0D\x0A								}\x0D\x0A								else\x0D\x0A									alert(result.Message);								\x0D\x0A							\x0D\x0A								if(instance.confirmcallback) \x0D\x0A								{\x0D\x0A									instance.confirmcallback();\x0D\x0A									instance.confirmcallback = null;\x0D\x0A								}\x0D\x0A								else if(parent.MyLiveChat)\x0D\x0A								{\x0D\x0A									parent.MyLiveChat.CrossPageManager.CollapseInPagePanel();\x0D\x0A									instance.set_visible(false);\x0D\x0A								}\x0D\x0A							}\x0D\x0A							\x0D\x0A							MyLiveChatAjax(\x22*\x22,\x22SaveSurvey\x22,savesurvey_callback,param);\x0D\x0A							\x0D\x0A							self.set_disabled(true);							\x0D\x0A							\x0D\x0A							]]\x3E\x3C/attach\x3E\x3C/button\x3E\x3Cbutton left=\x22160\x22 width=\x22110\x22 height=\x2225\x22 text=\x22^MyLiveChat.TEXT_CANCEL\x22\x3E\x3Cattach name=\x22click\x22\x3E\x0D\x0A							surveypanel.set_visible(false);\x0D\x0A							if(instance.confirmcallback)\x0D\x0A							{\x0D\x0A							instance.confirmcallback();\x0D\x0A							instance.confirmcallback = null;\x0D\x0A							}\x0D\x0A						\x3C/attach\x3E\x3C/button\x3E\x3C/panel\x3E\x3C/panel\x3E\x3C/panel\x3E\x3Cmethod name=\x22set_visible\x22 overrideas=\x22panel_setvisible\x22\x3E\x0D\x0A			self.panel_setvisible(value);\x0D\x0A			if(!tb_email.get_text())tb_email.set_text(window.currentemail||\x22\x22);\x0D\x0A		\x3C/method\x3E\x3Cmethod name=\x22call_show\x22 arguments=\x22callback\x22\x3E\x0D\x0A			self.set_visible(1);\x0D\x0A			if(callback) self.confirmcallback = callback;\x0D\x0A		\x3C/method\x3E\x3Cinitialize\x3E\x3C![CDATA[\x0D\x0A			\x0D\x0A			if(!MyLiveChat.SurveyVisible)return;\x0D\x0A			\x0D\x0A			AttachChatEvent(\x22USER\x22,function(name,type,info1,info2)\x0D\x0A			{\x0D\x0A				if(type==\x22REMOVED\x22)\x0D\x0A				{\x0D\x0A					var users=GetUsers();\x0D\x0A					var agent=null;\x0D\x0A					for(var i=0;i\x3Cusers.length;i++)\x0D\x0A					{\x0D\x0A						if(users[i].IsAgent)\x0D\x0A							agent=users[i];\x0D\x0A					}\x0D\x0A					if(!agent)\x0D\x0A					{\x0D\x0A						self.set_visible(true);\x0D\x0A					}\x0D\x0A				}\x0D\x0A				if(type==\x22ADDED\x22)\x0D\x0A				{\x0D\x0A					if(info1.IsAgent)\x0D\x0A					{\x0D\x0A						self.set_visible(false);\x0D\x0A					}\x0D\x0A				}\x0D\x0A			});\x0D\x0A			]]\x3E\x3C/initialize\x3E\x3C/panel\x3E\x3Cexecute xmlns=\x22http://cutesoft.net/jsml\x22\x3E\x3C![CDATA[\x0D\x0A		function splitintomap(csstext)\x0D\x0A		{\x0D\x0A			var map={};\x0D\x0A			if(!csstext)return map;\x0D\x0A			var pairs=csstext.split(\x27;\x27);\x0D\x0A			for(var i=0;i\x3Cpairs.length;i++)\x0D\x0A			{\x0D\x0A				var pair=pairs[i];\x0D\x0A				var pos=pair.indexOf(\x27:\x27);\x0D\x0A				if(pos==-1)\x0D\x0A					continue;\x0D\x0A				var name=pair.substring(0,pos).replace(/(^\x5Cs*)|(\x5Cs*$)/g, \x22\x22).toLowerCase();\x0D\x0A				var value=pair.substring(pos+1).replace(/(^\x5Cs*)|(\x5Cs*$)/g, \x22\x22);\x0D\x0A				map[name]=value;\x0D\x0A			}\x0D\x0A			return map;\x0D\x0A		}\x0D\x0A		function IsControl(element)\x0D\x0A		{\x0D\x0A			switch(element.nodeName.toUpperCase())\x0D\x0A			{\x0D\x0A				case \x22INPUT\x22:\x0D\x0A				case \x22SELECT\x22:\x0D\x0A				case \x22TEXTAREA\x22:\x0D\x0A					return true;\x0D\x0A			}\x0D\x0A		}\x0D\x0A		\x0D\x0A		var rootmap=splitintomap(\x22line-height:1em;letter-spacing:0px;word-spacing:normal;text-align:left;font-size:12px;font-family:\x27Helvetica Neue\x27,Arial,sans-serif;color:black;\x22);\x0D\x0A		var eachmap=splitintomap(\x22margin:0px;padding:0px;outline:0px;text-indent:0px;min-width:0px;min-height:0px;\x22);\x0D\x0A		var ctrlmap=splitintomap(\x22background-color:white;padding-top:1px;padding-left:1px;box-shadow: none;background-image:none;border-radius:3px;\x22);\x0D\x0A		var btnmap=splitintomap(\x22line-height:1em;text-align:center;\x22);\x0D\x0A		\x0D\x0A		function SetMapIfNull(map,p,val)\x0D\x0A		{\x0D\x0A			if(map[p])return;\x0D\x0A			map[p]=val;\x0D\x0A		}\x0D\x0A		\x0D\x0A		function SetMapProperty(map,p,val)\x0D\x0A		{\x0D\x0A			var mainvalue;\x0D\x0A			switch(p)\x0D\x0A			{\x0D\x0A				case \x22padding-top\x22:\x0D\x0A				case \x22padding-left\x22:\x0D\x0A				case \x22padding-right\x22:\x0D\x0A				case \x22padding-bottom\x22:\x0D\x0A					mainvalue=map[\x22padding\x22];\x0D\x0A					if(mainvalue)\x0D\x0A					{\x0D\x0A						delete map[\x22padding\x22];\x0D\x0A						SetMapIfNull(map,\x22padding-top\x22,mainvalue);\x0D\x0A						SetMapIfNull(map,\x22padding-left\x22,mainvalue);\x0D\x0A						SetMapIfNull(map,\x22padding-right\x22,mainvalue);\x0D\x0A						SetMapIfNull(map,\x22padding-bottom\x22,mainvalue);\x0D\x0A						return;\x0D\x0A					}\x0D\x0A					break;\x0D\x0A				case \x22margin-top\x22:\x0D\x0A				case \x22margin-left\x22:\x0D\x0A				case \x22margin-right\x22:\x0D\x0A				case \x22margin-bottom\x22:\x0D\x0A					mainvalue=map[\x22margin\x22];\x0D\x0A					if(mainvalue)\x0D\x0A					{\x0D\x0A						delete map[\x22margin\x22];\x0D\x0A						SetMapIfNull(map,\x22margin-top\x22,mainvalue);\x0D\x0A						SetMapIfNull(map,\x22margin-left\x22,mainvalue);\x0D\x0A						SetMapIfNull(map,\x22margin-right\x22,mainvalue);\x0D\x0A						SetMapIfNull(map,\x22margin-bottom\x22,mainvalue);\x0D\x0A						return;\x0D\x0A					}\x0D\x0A					break;\x0D\x0A			}\x0D\x0A			\x0D\x0A			map[p]=val;\x0D\x0A		}\x0D\x0A		\x0D\x0A		function margestyle(element,parentmap)\x0D\x0A		{\x0D\x0A			var map=splitintomap(element.style.cssText);\x0D\x0A			for(var p in eachmap)\x0D\x0A			{\x0D\x0A				if(map[p])\x0D\x0A					continue;\x0D\x0A				SetMapProperty(map,p,eachmap[p]);\x0D\x0A			}\x0D\x0A			if(element.nodeName==\x22BUTTON\x22||element.getAttribute(\x22type\x22)==\x22button\x22)\x0D\x0A			{\x0D\x0A				for(var p in btnmap)\x0D\x0A				{\x0D\x0A					if(map[p])\x0D\x0A						continue;\x0D\x0A					SetMapProperty(map,p,btnmap[p]);\x0D\x0A				}\x0D\x0A			}\x0D\x0A			else\x0D\x0A			{\x0D\x0A				for(var p in parentmap)\x0D\x0A				{\x0D\x0A					if(map[p])\x0D\x0A						continue;\x0D\x0A					switch(p)\x0D\x0A					{\x0D\x0A						//case \x22background-color\x22:\x0D\x0A						case \x22line-height\x22:\x0D\x0A						case \x22font-family\x22:\x0D\x0A						case \x22font-size\x22:\x0D\x0A						case \x22color\x22:\x0D\x0A							SetMapProperty(map,p,parentmap[p]);\x0D\x0A							break;\x0D\x0A						default:\x0D\x0A							break;\x0D\x0A					}\x0D\x0A				}\x0D\x0A				if(IsControl(element))\x0D\x0A				{\x0D\x0A          if(p==\x22box-sizeing\x22)  map[p] = \x22\x22;\x0D\x0A					for(var p in ctrlmap)\x0D\x0A					{\x0D\x0A						if(map[p] \x26\x26 p!=\x22box-sizing\x22)\x0D\x0A							continue;\x0D\x0A						SetMapProperty(map,p,ctrlmap[p]);\x0D\x0A					}\x0D\x0A				}\x0D\x0A			}\x0D\x0A			\x0D\x0A			var sb=[];\x0D\x0A			for(var p in map)\x0D\x0A			{\x0D\x0A				var v=map[p];\x0D\x0A				switch(p)\x0D\x0A				{\x0D\x0A				  case \x22border-radius\x22:\x0D\x0A				  case \x22border-top-left-radius\x22:\x0D\x0A				  case \x22border-top-right-radius\x22:\x0D\x0A				  case \x22border-bottom-left-radius\x22:\x0D\x0A				  case \x22border-bottom-right-radius\x22:\x0D\x0A					if(v.indexOf(\x22!important\x22)==-1)\x0D\x0A					  v=v+\x22!important\x22;\x0D\x0A					break;\x0D\x0A				  default:\x0D\x0A					break;\x0D\x0A				}\x0D\x0A				sb.push(p+\x22:\x22+v);\x0D\x0A			}\x0D\x0A			\x0D\x0A			element.style.cssText=sb.join(\x22;\x22);\x0D\x0A			\x0D\x0A			if(element.nodeName==\x22TEXTAREA\x22)\x0D\x0A			{\x0D\x0A				element.style.boxSizing=\x22border-box\x22;\x0D\x0A				element.style.paddingTop=\x224px\x22;\x0D\x0A				//element.style.height=parseInt(element.style.height)-2+\x22px\x22\x0D\x0A			}\x0D\x0A\x0D\x0A			var cs=element.childNodes||element.children;\x0D\x0A			for(var i=0;i\x3Ccs.length;i++)\x0D\x0A			{\x0D\x0A				var child=cs[i];\x0D\x0A				if(!child.style)\x0D\x0A					continue;\x0D\x0A				margestyle(child,map);\x0D\x0A			}\x0D\x0A		}\x0D\x0A		\x0D\x0A		var dofixit=true;\x0D\x0A		\x0D\x0A		if(window.location.href.indexOf(\x27fixinpagestyle=0\x27)!=-1)\x0D\x0A		{\x0D\x0A			dofixit=false;\x0D\x0A		}\x0D\x0A		if(window.location.href.indexOf(\x27fixinpagestyle=1\x27)!=-1)\x0D\x0A		{\x0D\x0A			dofixit=true;\x0D\x0A		}\x0D\x0A		\x0D\x0A		jsml.fixinpagestyle=function(ctrl)\x0D\x0A		{\x0D\x0A			if(!dofixit)\x0D\x0A				return;\x0D\x0A			var root=ctrl._element;\x0D\x0A			margestyle(root,rootmap);\x0D\x0A			ctrl.invoke_notify_content();\x0D\x0A			setTimeout(function()\x0D\x0A			{\x0D\x0A				margestyle(root,rootmap);\x0D\x0A				ctrl.invoke_notify_content();\x0D\x0A			},30);\x0D\x0A			setTimeout(function()\x0D\x0A			{\x0D\x0A				margestyle(root,rootmap);\x0D\x0A				ctrl.invoke_notify_content();\x0D\x0A			},100);\x0D\x0A		}\x0D\x0A		\x0D\x0A		]]\x3E\x3C/execute\x3E\x3Cpanel jsml-class=\x22inpageofflineframe\x22 dock=\x22fill\x22 xmlns=\x22http://cutesoft.net/jsml\x22\x3E\x3Cpanel jsml-base=\x22inlineview_offline\x22 jsml-local=\x22viewframe\x22 dock=\x22fill\x22 /\x3E\x3Cinitialize\x3E\x0D\x0A			viewframe.tb_name._input.style.lineHeight=\x221.3em\x22;\x0D\x0A			viewframe.tb_name._input.style.fontSize=\x2212px\x22;\x0D\x0A			viewframe.tb_name._input.style.fontFamily = \x22\x27Helvetica Neue\x27,Arial,sans-serif\x22;\x0D\x0A			viewframe.tb_email._input.style.lineHeight=\x221.3em\x22;\x0D\x0A			viewframe.tb_email._input.style.fontSize=\x2212px\x22;\x0D\x0A			viewframe.tb_email._input.style.fontFamily = \x22\x27Helvetica Neue\x27,Arial,sans-serif\x22;\x0D\x0A			viewframe.tb_subject._input.style.lineHeight=\x221.3em\x22;\x0D\x0A			viewframe.tb_subject._input.style.fontSize=\x2212px\x22;\x0D\x0A			viewframe.tb_subject._input.style.fontFamily = \x22\x27Helvetica Neue\x27,Arial,sans-serif\x22;\x0D\x0A			viewframe.tb_enquiry._input.style.lineHeight=\x221.3em\x22;\x0D\x0A			viewframe.tb_enquiry._input.style.fontSize=\x2212px\x22;\x0D\x0A			viewframe.tb_enquiry._input.style.fontFamily = \x22\x27Helvetica Neue\x27,Arial,sans-serif\x22;\x0D\x0A\x0D\x0A			viewframe.tb_name.set_text(MyLiveChat.SourceName);\x0D\x0A			viewframe.tb_email.set_text(MyLiveChat.SourceEmail);\x0D\x0A			viewframe.tb_subject.set_text(MyLiveChat.SourceSubject);\x0D\x0A			viewframe.tb_enquiry.set_text(MyLiveChat.SourceQuestion);\x0D\x0A			viewframe.buttonsend.attach_event(\x22click\x22,function()\x0D\x0A			{\x0D\x0A			self.invoke_event(\x22sendclick\x22);\x0D\x0A			});\x0D\x0A\x0D\x0A\x0D\x0A		\x3C/initialize\x3E\x3Cattach name=\x22sendclick\x22\x3E\x3C![CDATA[\x0D\x0A			\x0D\x0A			var tb_name=viewframe.tb_name;\x0D\x0A			var tb_email=viewframe.tb_email;\x0D\x0A			var tb_subject=viewframe.tb_subject;\x0D\x0A			var tb_enquiry=viewframe.tb_enquiry;\x0D\x0A			var customdatapanel=viewframe.customdatapanel;\x0D\x0A			\x0D\x0A			var name = tb_name.get_text();\x0D\x0A			var email = tb_email.get_text();\x0D\x0A			var subject = tb_subject.get_text();\x0D\x0A			var question = tb_enquiry.get_text();\x0D\x0A\x0D\x0A			MyLiveChat_SetUserName(name);\x0D\x0A			MyLiveChat_SetEmail(email);\x0D\x0A			MyLiveChat_SetSubject(subject);\x0D\x0A			MyLiveChat_SetQuestion(question);\x0D\x0A						\x0D\x0A			if(!MyLiveChat.SourceName)\x0D\x0A			{\x0D\x0A				instance.inlinealert(MyLiveChat._GetText(\x22SS_MESSAGE_PLEASETYPENAME\x22));\x0D\x0A				tb_name.focus();\x0D\x0A				return;\x0D\x0A			}\x0D\x0A			if(!MyLiveChat.SourceEmail)\x0D\x0A			{\x0D\x0A				instance.inlinealert(MyLiveChat._GetText(\x22SS_MESSAGE_PLEASETYPEEMAIL\x22));\x0D\x0A				tb_email.focus();\x0D\x0A				return;\x0D\x0A			}\x0D\x0A			if(!MyLiveChat.SourceSubject)\x0D\x0A			{\x0D\x0A					instance.inlinealert(MyLiveChat._GetText(\x22SS_MESSAGE_PLEASETYPEQUESTION\x22));\x0D\x0A					tb_subject.focus();\x0D\x0A					return;\x0D\x0A			}\x0D\x0A			if(!MyLiveChat.SourceQuestion)\x0D\x0A			{ \x0D\x0A				instance.inlinealert(MyLiveChat._GetText(\x22SS_MESSAGE_PLEASETYPEQUESTION\x22));\x0D\x0A				tb_enquiry.focus();\x0D\x0A				return;\x0D\x0A			}\x0D\x0A						\x0D\x0A			var errmsg=customdatapanel.validate_customdata();\x0D\x0A			if(errmsg)\x0D\x0A			{\x0D\x0A				instance.inlinealert(errmsg)\x0D\x0A				return;\x0D\x0A			}\x0D\x0A						\x0D\x0A			MyLiveChat_AddCustomData(customdatapanel.get_json());\x0D\x0A				\x0D\x0A			instance.invoke_event(\x22submitit\x22,\x22offline\x22);\x0D\x0A			self._element.disabled=true;\x0D\x0A			]]\x3E\x3C/attach\x3E\x3Cmethod name=\x22inlinealert\x22 arguments=\x22msg\x22\x3E\x3C![CDATA[\x0D\x0A			return mlcalert({message:msg,container:instance._element});\x0D\x0A			]]\x3E\x3C/method\x3E\x3Cattach name=\x22initialize\x22\x3E\x0D\x0A\x0D\x0A			jsml.fixinpagestyle(self)\x0D\x0A\x0D\x0A		\x3C/attach\x3E\x3C/panel\x3E\x3Cpanel jsml-class=\x22inpagewaitframe\x22 dock=\x22fill\x22 xmlns=\x22http://cutesoft.net/jsml\x22\x3E\x3Cpanel jsml-base=\x22inlineview_wait\x22 jsml-local=\x22viewframe\x22 dock=\x22fill\x22 /\x3E\x3Cinitialize\x3E\x0D\x0A\x0D\x0A			viewframe.tb_name._input.style.lineHeight=\x221.3em\x22;\x0D\x0A			viewframe.tb_name._input.style.fontSize=\x2212px\x22;\x0D\x0A			viewframe.tb_name._input.style.fontFamily = \x22\x27Helvetica Neue\x27,Arial,sans-serif\x22;\x0D\x0A			viewframe.tb_email._input.style.lineHeight=\x221.3em\x22;\x0D\x0A			viewframe.tb_email._input.style.fontSize=\x2212px\x22;\x0D\x0A			viewframe.tb_email._input.style.fontFamily = \x22\x27Helvetica Neue\x27,Arial,sans-serif\x22;\x0D\x0A			viewframe.tb_question._input.style.lineHeight=\x221.3em\x22;\x0D\x0A			viewframe.tb_question._input.style.fontSize=\x2212px\x22;\x0D\x0A			viewframe.tb_question._input.style.fontFamily = \x22\x27Helvetica Neue\x27,Arial,sans-serif\x22;\x0D\x0A\x0D\x0A			viewframe.tb_name.set_text(MyLiveChat.SourceName);\x0D\x0A			viewframe.tb_email.set_text(MyLiveChat.SourceEmail);\x0D\x0A			viewframe.tb_question.set_text(MyLiveChat.SourceQuestion);\x0D\x0A			if(MyLiveChat.InlineChatWaitingFieldEmail==3)viewframe.tb_email._input.readOnly = true;\x0D\x0A			if(MyLiveChat.InlineChatWaitingFieldQuestion==3)viewframe.tb_question._input.readOnly = true;\x0D\x0A			viewframe.buttonsend.attach_event(\x22click\x22,function()\x0D\x0A			{\x0D\x0A			self.invoke_event(\x22sendclick\x22);\x0D\x0A			});\x0D\x0A		\x3C/initialize\x3E\x3Cinitialize\x3E\x3C![CDATA[\x0D\x0A			var sel_department=viewframe.sel_department;\x0D\x0A			sel_department._sel.style.lineHeight=\x221.3em\x22;\x0D\x0A			if(!(sel_department._element.style.font||sel_department._element.style.fontFamily))\x0D\x0A			{\x0D\x0A				sel_department._sel.style.fontSize=\x2212px\x22;\x0D\x0A				sel_department._sel.style.fontFamily = \x22\x27Helvetica Neue\x27,Arial,sans-serif\x22;\x0D\x0A			}\x0D\x0A			//sel_department._sel.style.border=\x221px solid rgb(46, 141, 199)\x22;\x0D\x0A			//sel_department._sel.style.borderRadius = \x223px\x22;\x0D\x0A			//sel_department._sel.style.boxShadow=\x22none\x22;\x0D\x0A			sel_department._sel.style.padding=\x220px\x22;\x0D\x0A			\x0D\x0A			var text = \x22\x22\x0D\x0A			var ict = parseInt(MyLiveChat.InlineChatTemplate) || 2;\x0D\x0A			if (ict == 1 || ict == 3)\x0D\x0A				text = MyLiveChat._GetText(\x27Department\x27);\x0D\x0A			\x0D\x0A			sel_department.add_item(\x22\x22,MyLiveChat.TEXT_DEPARTMENTPLACEHOLDER||text);\x0D\x0A			sel_department._sel.style.color = MyLiveChat.InlineChatTextColor||\x27#aaaaaa\x27;\x0D\x0A			sel_department._sel.options[0].style.color=MyLiveChat.InlineChatTextColor||\x27#aaaaaa\x27;\x0D\x0A			for(var i=0;i\x3CMyLiveChat.Departments.length;i++)\x0D\x0A			{\x0D\x0A				var dep=MyLiveChat.Departments[i]\x0D\x0A				if(MyLiveChat.WaitingShowDepartments==\x22Online\x22\x26\x26!dep.Online)\x0D\x0A					continue;\x0D\x0A				var text=dep.Name;\x0D\x0A				if(!dep.Online)\x0D\x0A					text+=\x22 \x22+MyLiveChat.WaitingShowOfflineText;\x0D\x0A				sel_department.add_item(dep.Name,text);\x0D\x0A				sel_department._sel.options[i+1].style.color=MyLiveChat.InlineChatEmbedColor||\x27black\x27;\x0D\x0A			}\x0D\x0A			sel_department._sel.onchange=function()\x0D\x0A			{\x0D\x0A				if(sel_department._sel.selectedIndex==0)\x0D\x0A				{\x0D\x0A					sel_department._sel.style.color = MyLiveChat.InlineChatTextColor||\x27#aaaaaa\x27;\x0D\x0A				}\x0D\x0A				else\x0D\x0A				{\x0D\x0A					sel_department._sel.style.color = MyLiveChat.InlineChatEmbedColor||\x27black\x27;\x0D\x0A				}\x0D\x0A			}\x0D\x0A							\x0D\x0A			if(MyLiveChat.SourceDepartment)sel_department.set_text(MyLiveChat.SourceDepartment);\x0D\x0A			if(MyLiveChat.InlineChatWaitingFieldDepartment==3)sel_department._sel.disabled = true;\x0D\x0A			\x0D\x0A			]]\x3E\x3C/initialize\x3E\x3Cmethod name=\x22inlinealert\x22 arguments=\x22msg\x22\x3E\x3C![CDATA[\x0D\x0A			return mlcalert({message:msg,container:instance._element});\x0D\x0A			]]\x3E\x3C/method\x3E\x3Cattach name=\x22sendclick\x22\x3E\x0D\x0A			self.startchat();\x0D\x0A		\x3C/attach\x3E\x3Cmethod name=\x22startchat\x22 arguments=\x22tryit\x22\x3E\x3C![CDATA[\x0D\x0A			\x0D\x0A			var tb_name=viewframe.tb_name;\x0D\x0A			var tb_email=viewframe.tb_email;\x0D\x0A			var tb_question=viewframe.tb_question;\x0D\x0A			var sel_department=viewframe.sel_department;\x0D\x0A			var customdatapanel=viewframe.customdatapanel;\x0D\x0A			\x0D\x0A			tb_name.set_border_color(\x22#cccccc\x22);\x0D\x0A			tb_email.set_border_color(\x22#cccccc\x22);\x0D\x0A			tb_question.set_border_color(\x22#cccccc\x22);\x0D\x0A			sel_department.set_border_color(\x22#cccccc\x22);\x0D\x0A			\x0D\x0A			var name=tb_name.get_text();\x0D\x0A			var email=tb_email.get_text();\x0D\x0A			var department=sel_department._sel.selectedIndex==0?\x22\x22:sel_department.get_text();\x0D\x0A			var customdata=customdatapanel.get_json();\x0D\x0A			var question=tb_question.get_text();\x0D\x0A\x0D\x0A			if(MyLiveChat.WaitingOfflineDepartment==\x22Disable\x22)\x0D\x0A			{\x0D\x0A				for(var i=0;i\x3CMyLiveChat.Departments.length;i++)\x0D\x0A				{\x0D\x0A					var dep=MyLiveChat.Departments[i]\x0D\x0A					if(dep.Name==department)\x0D\x0A					{\x0D\x0A						if(!dep.Online)\x0D\x0A						{\x0D\x0A							//if(!tryit)alert(MyLiveChat._GetText(\x22SS_MESSAGE_NODEPONLINEAGENT\x22,dep.Name));\x0D\x0A							if(!tryit)instance.inlinealert(MyLiveChat._GetText(\x22SS_MESSAGE_NODEPONLINEAGENT\x22,dep.Name));\x0D\x0A							return;\x0D\x0A						}\x0D\x0A					}\x0D\x0A				}\x0D\x0A			}\x0D\x0A			\x0D\x0A			if(self.get_visible())\x0D\x0A			{\x0D\x0A				if(!name || name==MyLiveChat._GetText(\x27Name\x27))\x0D\x0A				{\x0D\x0A					//if(!tryit)instance.inlinealert(MyLiveChat._GetText(\x22SS_MESSAGE_PLEASETYPENAME\x22));\x0D\x0A					tb_name.set_border_color(\x22red\x22);\x0D\x0A					tb_name.focus();\x0D\x0A					return;\x0D\x0A				}\x0D\x0A				if(name.length\x3C3)\x0D\x0A				{\x0D\x0A					if(!tryit)instance.inlinealert(MyLiveChat._GetText(\x22SS_MESSAGE_NAMEWRONGLENGTH\x22));\x0D\x0A					tb_name.set_border_color(\x22red\x22);\x0D\x0A					tb_name.focus();\x0D\x0A					return;\x0D\x0A				}\x0D\x0A				if(name.length\x3E50)\x0D\x0A				{\x0D\x0A					if(!tryit)instance.inlinealert(MyLiveChat._GetText(\x22SS_MESSAGE_NAMEWRONGLENGTH\x22));\x0D\x0A					tb_name.set_border_color(\x22red\x22);\x0D\x0A					tb_name.focus();\x0D\x0A					return;\x0D\x0A				}\x0D\x0A				if(MyLiveChat.InlineChatWaitingFieldEmail==2 \x26\x26 (email==\x22\x22||email==MyLiveChat._GetText(\x27Email\x27)))\x0D\x0A				{\x0D\x0A					//if(!tryit)instance.inlinealert(MyLiveChat._GetText(\x22SS_MESSAGE_PLEASETYPEEMAIL\x22));\x0D\x0A					tb_email.set_border_color(\x22red\x22);\x0D\x0A					tb_email.focus();\x0D\x0A					return;\x0D\x0A				}\x0D\x0A				if(email)\x0D\x0A				{\x0D\x0A					var exp = /^[a-zA-Z0-9._%-]+@[a-zA-Z0-9.-]+\x5C.[a-zA-Z0-9_\x5C-]{2,4}$/;\x0D\x0A					if(!exp.test(email))\x0D\x0A					{\x0D\x0A						//if(!tryit)instance.inlinealert(MyLiveChat._GetText(\x22SS_MESSAGE_PLEASETYPEEMAIL\x22));\x0D\x0A						tb_email.set_border_color(\x22red\x22);\x0D\x0A						tb_email.focus();\x0D\x0A						return;\x0D\x0A					}\x0D\x0A				}\x0D\x0A				\x0D\x0A				if(MyLiveChat.InlineChatWaitingFieldQuestion==2 \x26\x26 (question==\x22\x22||question==MyLiveChat._GetText(\x27Question\x27)))\x0D\x0A				{\x0D\x0A					//if(!tryit)instance.inlinealert(MyLiveChat._GetText(\x22SS_MESSAGE_PLEASETYPEQUESTION\x22));\x0D\x0A					tb_question.set_border_color(\x22red\x22);\x0D\x0A					tb_question.focus();\x0D\x0A					return;\x0D\x0A				}\x0D\x0A\x0D\x0A				if(MyLiveChat.InlineChatWaitingFieldDepartment==2 \x26\x26 department==\x22\x22)\x0D\x0A				{\x0D\x0A					//if(!tryit)instance.inlinealert(MyLiveChat._GetText(\x22SS_MESSAGE_SELECTDEPARTMENT\x22));\x0D\x0A					sel_department.set_border_color(\x22red\x22);\x0D\x0A					sel_department._sel.focus();\x0D\x0A					return;\x0D\x0A				}\x0D\x0A				\x0D\x0A				var errmsg=customdatapanel.validate_customdata();\x0D\x0A				if(errmsg)\x0D\x0A				{\x0D\x0A					if(!tryit)instance.inlinealert(errmsg)\x0D\x0A					return;\x0D\x0A				}\x0D\x0A			}\x0D\x0A			\x0D\x0A			MyLiveChat_SetUserName(name);\x0D\x0A			MyLiveChat_SetEmail(email);\x0D\x0A			MyLiveChat_SetQuestion(question);\x0D\x0A			MyLiveChat_SetDepartment(department);\x0D\x0A			MyLiveChat_AddCustomData(customdata);\x0D\x0A			instance.invoke_event(\x22submitit\x22,\x22online\x22);\x0D\x0A			]]\x3E\x3C/method\x3E\x3Cattach name=\x22initialize\x22\x3E\x0D\x0A\x0D\x0A			jsml.fixinpagestyle(self)\x0D\x0A\x0D\x0A		\x3C/attach\x3E\x3C/panel\x3E\x3Cpanel jsml-class=\x22inpageframepanel\x22 xmlns=\x22http://cutesoft.net/jsml\x22\x3E\x3Cpanel dock=\x22fill\x22 jsml-local=\x22thecontainer\x22\x3E\x3C/panel\x3E\x3Cinitialize\x3E\x0D\x0A			self.onlineframeclass=\x22inpagewaitframe\x22;\x0D\x0A			self.offlineframeclass=\x22inpageofflineframe\x22;\x0D\x0A		\x3C/initialize\x3E\x3Cattach name=\x22disposechat\x22\x3E\x0D\x0A			self.chatframeshowed=false;\x0D\x0A			self.removeframe();\x0D\x0A		\x3C/attach\x3E\x3Cattach name=\x22startchat\x22\x3E\x3C![CDATA[\x0D\x0A			if(self.chatframeshowed)\x0D\x0A				return;\x0D\x0A			self.removeframe();\x0D\x0A			self.addframe_iframemode(\x22Send\x22);\x0D\x0A			thecontainer.set_visible(false);\x0D\x0A			self.frameelement.style.display=\x22\x22;\x0D\x0A			]]\x3E\x3C/attach\x3E\x3Cattach name=\x22attach_dom\x22\x3E\x3C![CDATA[\x0D\x0A			if(!MyLiveChat.IsDesignMode)return;\x0D\x0A			if(window.qs.preview==\x22Support\x22)\x0D\x0A			{\x0D\x0A				self.invoke_event(\x22startchat\x22);\x0D\x0A			}\x0D\x0A			if(window.qs.preview==\x22Survey\x22)\x0D\x0A			{\x0D\x0A				self.invoke_event(\x22startchat\x22);\x0D\x0A			}\x0D\x0A			]]\x3E\x3C/attach\x3E\x3Cmethod name=\x22addframe\x22\x3E\x3C![CDATA[\x0D\x0A			\x0D\x0A			if(self.chatframeshowed)\x0D\x0A				return;\x0D\x0A			\x0D\x0A			self.removeframe();\x0D\x0A			self.inpageframe=jsml.class_create_instance(MyLiveChat.HasReadyAgents?self.onlineframeclass:self.offlineframeclass)\x0D\x0A			self.inpageframe.attach_event(\x22submitit\x22,function(je,submittype)\x0D\x0A			{\x0D\x0A				self.removeframe();\x0D\x0A				\x0D\x0A				self.addframe_iframemode(\x22Send\x22,submittype);\x0D\x0A				thecontainer.set_visible(false);\x0D\x0A				self.frameelement.style.display=\x22\x22;\x0D\x0A			});\x0D\x0A			\x0D\x0A			if(MyLiveChat.HasReadyAgents\x26\x26MyLiveChat.InlineChatWaitingShowForClick===false)\x0D\x0A			{\x0D\x0A				setTimeout(function()\x0D\x0A				{\x0D\x0A					self.removeframe();\x0D\x0A				\x0D\x0A					self.addframe_iframemode(\x22Send\x22,\x22online\x22);\x0D\x0A					thecontainer.set_visible(false);\x0D\x0A					self.frameelement.style.display=\x22\x22;\x0D\x0A				},10);\x0D\x0A			}\x0D\x0A			\x0D\x0A			self.append_child(self.inpageframe);				\x0D\x0A				\x0D\x0A			self.addframe_iframemode();\x0D\x0A			\x0D\x0A			]]\x3E\x3C/method\x3E\x3Cattach name=\x22resize\x22\x3E\x3C![CDATA[\x0D\x0A			if(self.frameelement)\x0D\x0A			{\x0D\x0A				self.frameelement.style.height=self.get_current_height()+\x22px\x22;\x0D\x0A			}\x0D\x0A			]]\x3E\x3C/attach\x3E\x3Cmethod name=\x22removeframe\x22\x3E\x3C![CDATA[\x0D\x0A			\x0D\x0A			if(self.chatframeshowed)\x0D\x0A				return;\x0D\x0A			\x0D\x0A			self.removeframe_iframemode();\x0D\x0A			if(!self.inpageframe)\x0D\x0A				return;\x0D\x0A			self.remove_child(self.inpageframe);\x0D\x0A			self.inpageframe = null;\x0D\x0A			]]\x3E\x3C/method\x3E\x3Cmethod name=\x22addframe_iframemode\x22 arguments=\x22mode,submittype\x22\x3E\x3C![CDATA[\x0D\x0A			\x0D\x0A			self.removeframe_iframemode();\x0D\x0A\x0D\x0A			var frm = document.createElement(\x22iframe\x22);\x0D\x0A			frm.setAttribute(\x22name\x22,\x22mylivechatinpageframe\x22);\x0D\x0A			frm.style.cssText = \x22height:420px;width:100%;display:none;\x22;\x0D\x0A			frm.setAttribute(\x22frameborder\x22,\x220\x22);\x0D\x0A			self.frameelement = frm;\x0D\x0A			self.frameelement.style.height=self.get_current_height()+\x22px\x22;\x0D\x0A			\x0D\x0A			frm.setAttribute(\x22src\x22, \x22about:blank\x22);\x0D\x0A			self.get_element().appendChild(frm);\x0D\x0A			\x0D\x0A			var sb=[];\x0D\x0A			sb.push(\x22\x3Chtml\x3E\x3Chead\x3E\x3C/head\x3E\x3Cbody\x3E\x3C/body\x3E\x22);\x0D\x0A			\x0D\x0A			sb.push(\x22\x3Clink rel=stylesheet href=\x27\x22+jsml.html_encode(MyLiveChat.UrlBase+\x22chat.css\x22)+\x22\x27 /\x3E\x22);\x0D\x0A			if(mode==\x22Send\x22)\x0D\x0A			{\x0D\x0A				sb.push(\x22\x3Cscript\x3Evar inlinechatparams={};\x22);\x0D\x0A				var props=[\x22SourceName\x22,\x22SourceEmail\x22,\x22SourceDepartment\x22,\x22SourceSubject\x22,\x22SourceQuestion\x22,\x22SourceCustomData\x22];\x0D\x0A				for(var i=0;i\x3Cprops.length;i++)\x0D\x0A				{\x0D\x0A					var prop=props[i];\x0D\x0A					var val=MyLiveChat[prop];\x0D\x0A					if(!val)continue;\x0D\x0A					sb.push(\x22inlinechatparams.\x22+prop+\x22=\x22+ConvertToJson(val)+\x22;\x22);\x0D\x0A				}\x0D\x0A				sb.push(\x22\x3C/script\x3E\x22);\x0D\x0A			\x0D\x0A				var url=MyLiveChat.UrlBase+\x22livechat.aspx?apimode=chatdialog\x26HCCID=\x22+MyLiveChat.HCCID\x0D\x0A					+\x22\x26CCCustomerId=\x22+MyLiveChat.CCCustomerId\x0D\x0A					+\x22\x26ChatType=inpage\x22\x0D\x0A				if(submittype==\x22online\x22)\x0D\x0A					url+=\x22\x26Mode=Send\x22;\x0D\x0A				if(submittype==\x22offline\x22)\x0D\x0A					url+=\x22\x26Mode=SendOffline\x22;\x0D\x0A				\x0D\x0A				var urllower=url.toLowerCase();\x0D\x0A				for(var prop in MyLiveChat.RawQuery)\x0D\x0A				{\x0D\x0A					if(prop==\x22apimode\x22||urllower.indexOf(prop.toLowerCase()+\x27=\x27)!=-1)\x0D\x0A						continue;\x0D\x0A					url=url+\x22\x26\x22+prop+\x22=\x22+encodeURIComponent(MyLiveChat.RawQuery[prop]||\x22\x22);\x0D\x0A				}\x0D\x0A					\x0D\x0A				//url=MyLiveChat_AppendToUrl(url);\x0D\x0A				sb.push(\x22\x3Cscript src=\x27\x22+jsml.html_encode(url)+\x22\x27\x3E\x3C/script\x3E\x22);\x0D\x0A				\x0D\x0A				self.chatframeshowed=true;\x0D\x0A			}\x0D\x0A			else\x0D\x0A			{\x0D\x0A				sb.push(\x22\x3Clink rel=stylesheet href=\x27\x22+jsml.html_encode(MyLiveChat.UrlBase+\x22script/dialoginit.js\x22)+\x22\x27 /\x3E\x22);\x0D\x0A			}\x0D\x0A			sb.push(\x22\x3C/html\x3E\x22);\x0D\x0A			\x0D\x0A			var doc=frm.contentWindow.document;\x0D\x0A			doc.open(\x22text/html\x22,false);\x0D\x0A			doc.write(sb.join(\x22\x5Cr\x5Cn\x22));\x0D\x0A			doc.close();\x0D\x0A			\x0D\x0A			\x0D\x0A			]]\x3E\x3C/method\x3E\x3Cmethod name=\x22removeframe_iframemode\x22\x3E\x3C![CDATA[\x0D\x0A			if(!self.frameelement)\x0D\x0A				return;\x0D\x0A			var frame=self.frameelement;\x0D\x0A			self.frameelement = null;\x0D\x0A			frame.style.display=\x27none\x27;\x0D\x0A			setTimeout(function()\x0D\x0A			{\x0D\x0A				frame.parentNode.removeChild(frame);\x0D\x0A			},5000);\x0D\x0A			]]\x3E\x3C/method\x3E\x3C/panel\x3E\x3Cpanel jsml-class=\x22inpagebase\x22 css_class=\x22inpagebase\x22 width=\x22260\x22 height=\x2230\x22 xmlns=\x22http://cutesoft.net/jsml\x22\x3E\x3Cmethod name=\x22replace_background\x22 arguments=\x22ctrl\x22\x3E\x3C![CDATA[\x0D\x0A			var bg=ctrl.get_background();\x0D\x0A			if(bg\x26\x26bg.indexOf(\x22../\x22)!=-1)\x0D\x0A			{\x0D\x0A				bg=bg.split(\x22../\x22).join(MyLiveChat.UrlBase+\x22../\x22);\x0D\x0A				ctrl.set_background(bg);\x0D\x0A			}\x0D\x0A			var cs=ctrl.get_children();\x0D\x0A			for(var i=0;i\x3Ccs.length;i++)\x0D\x0A				self.replace_background(cs[i]);\x0D\x0A			]]\x3E\x3C/method\x3E\x3Cattach name=\x22initialize\x22\x3E\x3C![CDATA[\x0D\x0A			\x0D\x0A			if(!MyLiveChat.HasReadyAgents \x26\x26 MyLiveChat.InlineChatFeedbackBehavior==\x22Hide\x22)\x0D\x0A			{\x0D\x0A				self.dispose();\x0D\x0A				return;\x0D\x0A			}\x0D\x0A			\x0D\x0A			self._config_position=MyLiveChat.InPagePosition || \x22bottomright\x22;\x0D\x0A			self._config_startpos=MyLiveChat.InPageStartPos || \x22bottomright\x22;\x0D\x0A			self._config_offsetx=MyLiveChat.InPageOffsetX || 0;\x0D\x0A			self._config_offsety=MyLiveChat.InPageOffsetY || 0;\x0D\x0A			if(self._config_position.indexOf(\x22right\x22)\x3E=0)self._config_offsetx=self._config_offsetx||-1;\x0D\x0A			if(self._config_position.indexOf(\x22left\x22)\x3E=0)self._config_offsetx=self._config_offsetx||1;\x0D\x0A			\x0D\x0A			self.replace_background(self);\x0D\x0A\x0D\x0A			self.waitcompleted();\x0D\x0A			\x0D\x0A			]]\x3E\x3C/attach\x3E\x3Cmethod name=\x22waitcompleted\x22\x3E\x3C![CDATA[\x0D\x0A			\x0D\x0A			//||document.readyState==\x22loading\x22||(jsml.msie5678\x26\x26document.readyState==\x22interactive\x22)			\x0D\x0A			if(!document.body)\x0D\x0A			{\x0D\x0A				return setTimeout(function()\x0D\x0A				{\x0D\x0A					self.waitcompleted();\x0D\x0A				},1);\x0D\x0A			}\x0D\x0A			\x0D\x0A			try\x0D\x0A			{\x0D\x0A				self.set_parent(document.body,true);\x0D\x0A			}\x0D\x0A			catch(x)\x0D\x0A			{\x0D\x0A				return setTimeout(function()\x0D\x0A				{\x0D\x0A					self.waitcompleted();\x0D\x0A				},1);\x0D\x0A			}\x0D\x0A			\x0D\x0A			var style=self._element.style;\x0D\x0A\x0D\x0A			if(jsml.msie\x26\x26document.compatMode==\x22BackCompat\x22)\x0D\x0A			{\x0D\x0A				style.position=\x22absolute\x22;\x0D\x0A			}\x0D\x0A			else\x0D\x0A			{\x0D\x0A				style.position=\x22fixed\x22;\x0D\x0A			}\x0D\x0A			style.zIndex=\x2216543210\x22;\x0D\x0A			\x0D\x0A			self.drag_left=0;\x0D\x0A			self.drag_top=0;\x0D\x0A			\x0D\x0A			function getrect()\x0D\x0A			{\x0D\x0A				var rect=jsml.get_body_rect();\x0D\x0A				if(style.position==\x22fixed\x22)\x0D\x0A				{\x0D\x0A					rect.left=0;\x0D\x0A					rect.top=0;\x0D\x0A				}\x0D\x0A				return rect;\x0D\x0A			}\x0D\x0A\x0D\x0A			new function()\x0D\x0A			{\x0D\x0A				var rect=getrect()\x0D\x0A				var bp=MyLiveChat_CalcBodyPoint(self._config_startpos, 0)\x0D\x0A				var pp=MyLiveChat_CalcPoint(self._config_startpos,self.get_current_width(),self.get_current_height())\x0D\x0A				\x0D\x0A				style.left=bp.left-pp.left+rect.left + self._config_offsetx+\x22px\x22;\x0D\x0A				style.top=bp.top-pp.top+rect.top + self._config_offsety+\x22px\x22;\x0D\x0A			}\x0D\x0A\x0D\x0A			function adjustposition()\x0D\x0A			{\x0D\x0A				if(self._jsml_disposed)return;\x0D\x0A				setTimeout(adjustposition,1);\x0D\x0A				\x0D\x0A				if(self._stopautomove)return;\x0D\x0A				\x0D\x0A				var rect=getrect()\x0D\x0A				var bp=MyLiveChat_CalcBodyPoint(self._config_position, 0)\x0D\x0A				var pp=MyLiveChat_CalcPoint(self._config_position,self.get_current_width(),self.get_current_height())\x0D\x0A				\x0D\x0A				var tl=bp.left-pp.left+rect.left + self._config_offsetx;\x0D\x0A				var tt=bp.top-pp.top+rect.top + self._config_offsety;\x0D\x0A\x0D\x0A				var cl=parseInt(style.left)-self.drag_left;\x0D\x0A				\x0D\x0A				var ct=parseInt(style.top)-self.drag_top;\x0D\x0A				var nl=(tl-cl);\x0D\x0A				var nt=(tt-ct);\x0D\x0A				if(nl\x3E0)\x0D\x0A				{\x0D\x0A					nl=Math.min(tl-cl,Math.max(6,nl));\x0D\x0A				}\x0D\x0A				else\x0D\x0A				{\x0D\x0A					nl=-Math.min(cl-tl,Math.max(6,-nl));\x0D\x0A				}\x0D\x0A				if(nt\x3E0)\x0D\x0A				{\x0D\x0A					nt=Math.min(tt-ct,Math.max(6,nt));\x0D\x0A				}\x0D\x0A				else\x0D\x0A				{\x0D\x0A					nt=-Math.min(ct-tt,Math.max(6,-nt));\x0D\x0A				}\x0D\x0A				nl=cl+nl;\x0D\x0A				nt=ct+nt;\x0D\x0A				\x0D\x0A				nl=Math.max(0,nl+self.drag_left)+\x22px\x22;\x0D\x0A				nt=Math.max(0,nt+self.drag_top)+\x22px\x22;\x0D\x0A				if(style.left!=nl)style.left=nl;\x0D\x0A				if(style.top!=nt)style.top=nt;\x0D\x0A				\x0D\x0A			}\x0D\x0A			\x0D\x0A			setTimeout(adjustposition,0);\x0D\x0A			\x0D\x0A			\x0D\x0A			\x0D\x0A			MyLiveChat.InPagePanel=self;\x0D\x0A			MyLiveChat_InvokeEvent(\x22InPagePanelLoad\x22,self);\x0D\x0A			\x0D\x0A			CreateCrossPageManager(self);\x0D\x0A			\x0D\x0A			\x0D\x0A\x0D\x0A			]]\x3E\x3C/method\x3E\x3Cxmldata\x3E\x3C![CDATA[\x0D\x0A			body\x0D\x0A			{\x0D\x0A				background-color:gray;\x0D\x0A			}\x0D\x0A			.inpagebase,.inpagebase *\x0D\x0A			{\x0D\x0A				margin:0px;\x0D\x0A				padding:0px;\x0D\x0A				border:0px;\x0D\x0A				color:black;\x0D\x0A				background-color:white;\x0D\x0A				font-size:1em;\x0D\x0A				rline-height:1em;\x0D\x0A				text-indent:0px;\x0D\x0A			}\x0D\x0A			]]\x3E\x3C/xmldata\x3E\x3Cmethod name=\x22jsml_append_xmldata\x22\x3E\x0D\x0A			self.__styledata=jsml.get_node_innertext(value);\x0D\x0A		\x3C/method\x3E\x3Cattach name=\x22mousedown\x22 arguments=\x22jevent,event\x22\x3E\x3C![CDATA[\x0D\x0A			var src=event.get_element();\x0D\x0A			switch(src.nodeName)\x0D\x0A			{\x0D\x0A				case \x22INPUT\x22:\x0D\x0A				case \x22BUTTON\x22:\x0D\x0A				case \x22TEXTAREA\x22:\x0D\x0A					self._element.onselectstart=new Function(\x22\x22,\x22return event.returnValue=true;\x22);\x0D\x0A					return;\x0D\x0A			}\x0D\x0A			self._element.onselectstart=new Function(\x22\x22,\x22return event.returnValue=false;\x22);\x0D\x0A			//self.startmove(event);\x0D\x0A			]]\x3E\x3C/attach\x3E\x3Cmethod name=\x22startmove\x22 arguments=\x22event\x22\x3E\x3C![CDATA[\x0D\x0A			var rect=jsml.get_body_rect();\x0D\x0A			var _x=event.clientX;\x0D\x0A			var _y=event.clientY;\x0D\x0A			var _l=self.drag_left;\x0D\x0A			var _t=self.drag_top;\x0D\x0A			var cl=parseInt(self._element.style.left)-_l-rect.left;\x0D\x0A			var ct=parseInt(self._element.style.top)-_t-rect.top;\x0D\x0A			\x0D\x0A			function update_position(moveevent)\x0D\x0A			{\x0D\x0A				var rect=jsml.get_body_rect();\x0D\x0A				var l=_l+moveevent.clientX-_x;\x0D\x0A				var t=_t+moveevent.clientY-_y;\x0D\x0A				var tl=cl+l+rect.left;\x0D\x0A				var tt=ct+t+rect.top;\x0D\x0A				if(tl\x3C0)l-=tl;\x0D\x0A				if(tt\x3C0)t-=tt;\x0D\x0A				self.drag_left=l;\x0D\x0A				self.drag_top=t;\x0D\x0A				self._element.style.left=Math.max(0,tl)+\x22px\x22;\x0D\x0A				self._element.style.top=Math.max(0,tt)+\x22px\x22;\x0D\x0A			}\x0D\x0A			\x0D\x0A			if(window.captureEvents)\x0D\x0A			{\x0D\x0A				function handle_mouse_move(moveevent)\x0D\x0A				{\x0D\x0A					update_position(moveevent);\x0D\x0A				}\x0D\x0A				function handle_mouse_up(event)\x0D\x0A				{\x0D\x0A					self._stopautomove=false;\x0D\x0A					window.releaseEvents(Event.MOUSEMOVE);\x0D\x0A					window.releaseEvents(Event.MOUOSEUP);\x0D\x0A					document.body.removeEventListener(\x22mousemove\x22,handle_mouse_move,true);\x0D\x0A					document.body.removeEventListener(\x22mouseup\x22,handle_mouse_up,true);\x0D\x0A				}\x0D\x0A\x0D\x0A				document.body.addEventListener(\x22mousemove\x22,handle_mouse_move,true);\x0D\x0A				document.body.addEventListener(\x22mouseup\x22,handle_mouse_up,true);\x0D\x0A				window.captureEvents(Event.MOUSEMOVE);\x0D\x0A				window.captureEvents(Event.MOUOSEUP);\x0D\x0A				self._stopautomove=true;\x0D\x0A			}\x0D\x0A			else\x0D\x0A			{\x0D\x0A				var me=document.body;//ctrl._element\x0D\x0A				function ie_mouse_move()\x0D\x0A				{\x0D\x0A					update_position(window.event);\x0D\x0A				}\x0D\x0A				function ie_mouse_up()\x0D\x0A				{\x0D\x0A					me.releaseCapture();\x0D\x0A					self._stopautomove=false;\x0D\x0A					detach_events();\x0D\x0A				}\x0D\x0A				function ie_losecapture()\x0D\x0A				{\x0D\x0A					self._stopautomove=false;\x0D\x0A					detach_events();\x0D\x0A				}\x0D\x0A				function detach_events()\x0D\x0A				{\x0D\x0A					me.detachEvent(\x22onmousemove\x22,ie_mouse_move);\x0D\x0A					me.detachEvent(\x22onmouseup\x22,ie_mouse_up);\x0D\x0A					me.detachEvent(\x22onlosecapture\x22,ie_losecapture);\x0D\x0A				}\x0D\x0A				me.attachEvent(\x22onmousemove\x22,ie_mouse_move);\x0D\x0A				me.attachEvent(\x22onmouseup\x22,ie_mouse_up);\x0D\x0A				me.attachEvent(\x22onlosecapture\x22,ie_losecapture);\x0D\x0A				me.setCapture();\x0D\x0A				self._stopautomove=true;\x0D\x0A			}\x0D\x0A			]]\x3E\x3C/method\x3E\x3Cattach name=\x22initialize\x22\x3E\x0D\x0A\x0D\x0A			jsml.fixinpagestyle(self)\x0D\x0A\x0D\x0A		\x3C/attach\x3E\x3C/panel\x3E\x3Cexecute xmlns=\x22http://cutesoft.net/jsml\x22\x3E\x3C![CDATA[\x0D\x0A		window.cobrowsedialog=null;\x0D\x0A		window.create_cobrowsedialog=function()\x0D\x0A		{\x0D\x0A			if(window.cobrowsedialog)return;\x0D\x0A			window.cobrowsedialog=jsml.new_cobrowsedialog();\x0D\x0A		}\x0D\x0A		window.dispose_cobrowsedialog=function()\x0D\x0A		{\x0D\x0A			if(!window.cobrowsedialog)return;\x0D\x0A			window.cobrowsedialog.dispose();\x0D\x0A			window.cobrowsedialog=null;\x0D\x0A		}\x0D\x0A		]]\x3E\x3C/execute\x3E\x3Cpanel jsml-class=\x22cobrowsedialog\x22 back_color=\x22white\x22 xmlns=\x22http://cutesoft.net/jsml\x22\x3E\x3C!--a button for form default..--\x3E\x3Cbutton text=\x22default\x22 width=\x221px\x22 height=\x221px\x22 left=\x22-10\x22 top=\x22-10\x22 /\x3E\x3Cpanel jsml-local=\x22dialogframe\x22 dock=\x22fill\x22\x3E\x3Cinitialize\x3E\x3C![CDATA[\x0D\x0A				self._estyle.cssText+=\x22border-radius:5px;box-shadow:0px 4px 7px #333;\x22;\x0D\x0A				self._estyle.border=\x22solid 1px gray\x22;\x0D\x0A				]]\x3E\x3C/initialize\x3E\x3C!--rem-jsml-base=\x22frameskin_default\x22 --\x3E\x3Cpanel jsml-local=\x22skin\x22 dock=\x22over\x22\x3E\x3Cattach name=\x22clickclose\x22\x3E\x0D\x0A					if(instance._panel)instance._panel.invoke_event(\x22clickclose\x22);\x0D\x0A				\x3C/attach\x3E\x3C/panel\x3E\x3Cpanel jsml-local=\x22cobrowsediv\x22 dock=\x22fill\x22\x3E\x3C/panel\x3E\x3C/panel\x3E\x3Cconstructor arguments=\x22option\x22\x3E\x0D\x0A			self.option=option;\x0D\x0A			self.panel_constructor();\x0D\x0A		\x3C/constructor\x3E\x3Cmethod name=\x22get_panel\x22\x3E\x0D\x0A			return cobrowsediv;\x0D\x0A		\x3C/method\x3E\x3Cinitialize\x3E\x3C![CDATA[\x0D\x0A			skin.set_css_class(\x22jsml_dialogskin\x22);\x0D\x0A			//dialogframe.set_padding(skin.get_framepadding());\x0D\x0A			skin._skinmovetarget=dialogframe;\x0D\x0A			skin._skinsizetarget=dialogframe;\x0D\x0A\x0D\x0A			//self._element.onmousedown=jsml.cancel_bubble_function;\x0D\x0A			\x0D\x0A			self.set_parent(document.body);\x0D\x0A			var style=self._estyle;\x0D\x0A			style.zIndex=16543210-100;\x0D\x0A			style.position=\x22absolute\x22;\x0D\x0A\x0D\x0A			function repos()\x0D\x0A			{\x0D\x0A				if(self._jsml_disposed)return;\x0D\x0A\x0D\x0A				var rect=jsml.get_body_rect();\x0D\x0A				if(jsml.mobile)\x0D\x0A				{\x0D\x0A					rect.top=0;\x0D\x0A					rect.left=0;\x0D\x0A				}\x0D\x0A				else\x0D\x0A				{\x0D\x0A					setTimeout(repos,100);\x0D\x0A				}\x0D\x0A				style.top=\x220px\x22;\x0D\x0A				style.left=\x220px\x22;\x0D\x0A				self.set_width(rect.width);\x0D\x0A				self.set_height(rect.height);\x0D\x0A			}\x0D\x0A			repos();\x0D\x0A			]]\x3E\x3C/initialize\x3E\x3Cproperty name=\x22title\x22\x3E\x3Cget\x3E\x0D\x0A				return skin.get_text();\x0D\x0A			\x3C/get\x3E\x3Cset\x3E\x0D\x0A				skin.set_text(value);\x0D\x0A			\x3C/set\x3E\x3C/property\x3E\x3Cattach name=\x22disposing\x22\x3E\x0D\x0A			if(!self._timeline)return\x0D\x0A			self._timeline.pause();\x0D\x0A			self._timeline.dispose();\x0D\x0A		\x3C/attach\x3E\x3C/panel\x3E\x3Cpanel jsml-class=\x22inpagepanel\x22 jsml-base=\x22inpagebase\x22 width=\x22260\x22 height=\x2230\x22 overflow=\x22visible\x22 xmlns=\x22http://cutesoft.net/jsml\x22\x3E\x3Cpanel jsml-local=\x22part_1\x22 dock=\x22top\x22 height=\x221\x22 overflow_y=\x22visible\x22 jsml-enable=\x22^MyLiveChat.InPageUseBubbleTop\x22\x3E\x3Cpanel dock=\x22left\x22 overflow_x=\x22visible\x22 width=\x221\x22\x3E\x3Cimage zoom=\x22out\x22 max_width=\x22260\x22 vertical_align=\x22bottom\x22 src=\x22^MyLiveChat.InPageBubbleTopUrl\x22\x3E\x3Cattach name=\x22click\x22\x3E\x3C![CDATA[\x0D\x0A							if(MyLiveChat.IsMobile)\x0D\x0A								return window.open(MyLiveChat_GetDialogUrl(\x22Click\x22));\x0D\x0A							if(!MyLiveChat.HasReadyAgents \x26\x26 MyLiveChat.InlineChatFeedbackBehavior==\x22Redirect\x22 \x26\x26 MyLiveChat.InlineChatFeedbackRedirectUrl)\x0D\x0A								return window.open(MyLiveChat.InlineChatFeedbackRedirectUrl);	\x0D\x0A							if(inpagepanel._maxed==false)\x0D\x0A								inpagepanel.maxdialog();\x0D\x0A							]]\x3E\x3C/attach\x3E\x3C/image\x3E\x3Cpanel right=\x2210\x22 top=\x2216\x22 width=\x2213\x22 height=\x2213\x22 css_text=\x22font-family:\x27Helvetica Neue\x27,Arial,sans-serif; border-radius:3px;\x22 cursor=\x22pointer\x22\x3E\x3Cimage dock=\x22fill\x22 vertical_align=\x22middle\x22 horizontal_align=\x22center\x22 src=\x22^MyLiveChat.SiteUrl+\x27livechat/template/images/inpage_bubbletop_close.png\x27\x22\x3E\x3C/image\x3E\x3Cattach name=\x22mousehover\x22\x3E\x0D\x0A						self.set_back_color(\x22#efefef\x22);\x0D\x0A					\x3C/attach\x3E\x3Cattach name=\x22mouseleave\x22\x3E\x0D\x0A						self.set_back_color(\x22\x22);\x0D\x0A					\x3C/attach\x3E\x3Cattach name=\x22click\x22\x3E\x0D\x0A						part_1.set_visible(0);\x0D\x0A						MyLiveChat.InPageBubbleTopClosed = true;\x0D\x0A					\x3C/attach\x3E\x3C/panel\x3E\x3C/panel\x3E\x3C/panel\x3E\x3Cpanel jsml-local=\x22part_2\x22 dock=\x22top\x22 height=\x2230\x22 overflow_x=\x22visible\x22\x3E\x3Cpanel dock=\x22fill\x22 overflow_x=\x22visible\x22 back_color=\x22^MyLiveChat.InPageHeadBgColor||\x27#2E8DC7\x27\x22 css_text=\x22border-radius:5px 5px 0px 0px;\x22\x3E\x3Cpanel dock=\x22top\x22 height=\x2230\x22 overflow_x=\x22visible\x22 cursor=\x22pointer\x22 back_color=\x22^MyLiveChat.InPageHeadBgColor||\x27#2E8DC7\x27\x22 border_color=\x22^MyLiveChat.InPageHeadBorderColor||\x27#3D7AAD\x27\x22 border_width=\x22^MyLiveChat.InPageHeadBorderWidth\x22 css_text=\x22border-radius:5px 5px 0px 0px;\x22\x3E\x3Cpanel jsml-local=\x22inpage_head\x22 dock=\x22right\x22 width=\x2230\x22\x3E\x3Cinitialize\x3E\x3C![CDATA[\x0D\x0A						self.set_background(MyLiveChat.InPageHeadBgColor + \x27 url(\x27+MyLiveChat.SiteUrl+\x27livechat/template/images/inpage_1_up.png) no-repeat 6px 9px\x27);\x0D\x0A						]]\x3E\x3C/initialize\x3E\x3C/panel\x3E\x3Clabel jsml-local=\x22inpage_title\x22 cursor=\x22pointer\x22 dock=\x22fill\x22 overflow_x=\x22visible\x22 margin=\x220,0,0,10\x22 css_text=\x22line-height:26px;\x22\x3E\x3Cinitialize\x3E\x0D\x0A							if(MyLiveChat.InPageHeadSize)self._element.style.fontSize=MyLiveChat.InPageHeadSize;\x0D\x0A							if(MyLiveChat.InPageHeadFont)self._element.style.fontFamily=MyLiveChat.InPageHeadFont;\x0D\x0A							if(MyLiveChat.InPageHeadColor)self._element.style.color=MyLiveChat.InPageHeadColor;\x0D\x0A						\x3C/initialize\x3E\x3C/label\x3E\x3Cattach name=\x22click\x22\x3E\x3C![CDATA[\x0D\x0A						if(MyLiveChat.IsMobile)\x0D\x0A							return window.open(MyLiveChat_GetDialogUrl(\x22Click\x22));\x0D\x0A						if(!MyLiveChat.HasReadyAgents \x26\x26 MyLiveChat.InlineChatFeedbackBehavior==\x22Redirect\x22 \x26\x26 MyLiveChat.InlineChatFeedbackRedirectUrl)\x0D\x0A							return window.open(MyLiveChat.InlineChatFeedbackRedirectUrl);	\x0D\x0A						if(inpagepanel._maxed==false)\x0D\x0A							inpagepanel.maxdialog();\x0D\x0A						else\x0D\x0A							inpagepanel.mindialog();\x0D\x0A						]]\x3E\x3C/attach\x3E\x3C/panel\x3E\x3Cpanel jsml-local=\x22frmpanel\x22 jsml-base=\x22inpageframepanel\x22 dock=\x22fill\x22 back_color=\x22white\x22 overflow_y=\x22visible\x22 visible=\x220\x22 border_color=\x22^MyLiveChat.InPageHeadBorderColor||\x27#3D7AAD\x27\x22 border_width=\x22^[0,MyLiveChat.InPageHeadBorderWidth,MyLiveChat.InPageHeadBorderWidth,MyLiveChat.InPageHeadBorderWidth]\x22\x3E\x3C/panel\x3E\x3C/panel\x3E\x3C/panel\x3E\x3Cinitialize\x3E\x3C![CDATA[\x0D\x0A			self._maxed = false;\x0D\x0A			self._status = null;\x0D\x0A			var ins = self;\x0D\x0A			function autocheck()\x0D\x0A			{\x0D\x0A				if(self._status !=null \x26\x26 self._status == MyLiveChat.HasReadyAgents)\x0D\x0A					return;\x0D\x0A				self._status = MyLiveChat.HasReadyAgents;\x0D\x0A				if(MyLiveChat.HasReadyAgents)\x0D\x0A				{\x0D\x0A					inpage_title.set_text(MyLiveChat.InPageHeadOnline);\x0D\x0A				}\x0D\x0A				else\x0D\x0A				{			\x0D\x0A					inpage_title.set_text(MyLiveChat.InPageHeadOffline);\x0D\x0A				}\x0D\x0A			}\x0D\x0A			setInterval(autocheck,1000);\x0D\x0A			autocheck();\x0D\x0A			\x0D\x0A			MyLiveChat.InPageMinDialog = self.mindialog;\x0D\x0A			]]\x3E\x3C/initialize\x3E\x3Cmethod name=\x22maxdialog\x22\x3E\x3C![CDATA[\x0D\x0A			MyLiveChat.ShowSmart=false;\x0D\x0A			self._maxed = true;\x0D\x0A			self.set_width(360);\x0D\x0A			part_2.set_height(400+(self._addheight||0));\x0D\x0A			if(MyLiveChat.InPageUseBubbleTop)part_1.set_visible(0);\x0D\x0A			inpage_head.set_background(MyLiveChat.InPageHeadBgColor + \x22 url(\x22+MyLiveChat.SiteUrl+\x22livechat/template/images/inpage_1_down.png) no-repeat 6px 9px\x22);\x0D\x0A			frmpanel.set_visible(1);\x0D\x0A			frmpanel.addframe();\x0D\x0A			]]\x3E\x3C/method\x3E\x3Cattach name=\x22addheight\x22 arguments=\x22je,value\x22\x3E\x0D\x0A			self.addheight(value);\x0D\x0A		\x3C/attach\x3E\x3Cmethod name=\x22addheight\x22\x3E\x0D\x0A			self._addheight=value+(self._addheight||0);\x0D\x0A			if(self._maxed)part_2.set_height(part_2.get_height()+value);\x0D\x0A		\x3C/method\x3E\x3Cmethod name=\x22mindialog\x22\x3E\x3C![CDATA[			\x0D\x0A				self._maxed = false;\x0D\x0A				self.set_width(260);\x0D\x0A				part_2.set_height(30);\x0D\x0A				if(MyLiveChat.InPageUseBubbleTop \x26\x26 !MyLiveChat.InPageBubbleTopClosed)part_1.set_visible(1);\x0D\x0A				inpage_head.set_background(MyLiveChat.InPageHeadBgColor + \x22 url(\x22+MyLiveChat.SiteUrl+\x22livechat/template/images/inpage_1_up.png) no-repeat 6px 9px\x22);\x0D\x0A				frmpanel.set_visible(0);\x0D\x0A				frmpanel.removeframe();\x0D\x0A			]]\x3E\x3C/method\x3E\x3C/panel\x3E\x3C/jsml\x3E";

   	
for (var p in MyLiveChat.RawLangJson) {
	MyLiveChat["TEXT_" + p.toUpperCase()] = MyLiveChat.RawLangJson[p];
}

MyLiveChat._GetText = function (key) {
	key = key.toUpperCase();
	return MyLiveChat["TEXT_" + key] || key;
}

MyLiveChat._GetNumber=function(str, defval)
{
	var val = parseInt(str);
	if (isNaN(val))
		return defval;
	return val;
}



function MyLiveChat_InitOnce() {

	if (!MyLiveChat.HomePage) MyLiveChat.HomePage = MyLiveChat.SiteUrl.replace(/\/\/[a-z0-9]+\.([^\/]+\/).*$/gi, "//www.$1");

	MyLiveChat.IsMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);

	MyLiveChat.MobileDisabled = (MyLiveChat.MobileDisabled || "") == "1";

	MyLiveChat.SoundInvitation = MyLiveChat.SoundInvitation || "alarm";
	MyLiveChat.SoundInvitationVolume = MyLiveChat.SoundInvitationVolume || "50";
	MyLiveChat.SoundNudge = MyLiveChat.SoundNudge || "msn_nudge";
	MyLiveChat.SoundNudgeVolume = MyLiveChat.SoundNudgeVolume || "50";
	MyLiveChat.SoundMessage = MyLiveChat.SoundMessage || "msn_message";
	MyLiveChat.SoundMessageVolume = MyLiveChat.SoundMessageVolume || "50";
	MyLiveChat.SoundJoin = MyLiveChat.SoundJoin || "";
	MyLiveChat.SoundJoinVolume = MyLiveChat.SoundJoinVolume || "50";

	MyLiveChat.OperatingHoursEnable = (MyLiveChat.OperatingHoursEnable || "") == "1";
	MyLiveChat.OperatingHoursForceOffline = MyLiveChat.OperatingHoursForceOffline == "1";
	MyLiveChat.OperatingHoursSchedule = MyLiveChat.OperatingHoursSchedule || "0";
	MyLiveChat.OperatingHoursTimeZone = MyLiveChat.AgentTimeZone;
	MyLiveChat.OperatingHoursCheckWeekday = (MyLiveChat.OperatingHoursCheckWeekday || "") == "1";
	MyLiveChat.OperatingHoursValWeekday = MyLiveChat.OperatingHoursValWeekday || "";
	MyLiveChat.OperatingHoursCheckWeekend = (MyLiveChat.OperatingHoursCheckWeekend || "") == "1";
	MyLiveChat.OperatingHoursValWeekend = MyLiveChat.OperatingHoursValWeekend || "";
	MyLiveChat.OperatingHoursCheckDay0 = (MyLiveChat.OperatingHoursCheckDay0 || "") == "1";
	MyLiveChat.OperatingHoursValDay0 = MyLiveChat.OperatingHoursValDay0 || "";
	MyLiveChat.OperatingHoursCheckDay1 = (MyLiveChat.OperatingHoursCheckDay1 || "") == "1";
	MyLiveChat.OperatingHoursValDay1 = MyLiveChat.OperatingHoursValDay1 || "";
	MyLiveChat.OperatingHoursCheckDay2 = (MyLiveChat.OperatingHoursCheckDay2 || "") == "1";
	MyLiveChat.OperatingHoursValDay2 = MyLiveChat.OperatingHoursValDay2 || "";
	MyLiveChat.OperatingHoursCheckDay3 = (MyLiveChat.OperatingHoursCheckDay3 || "") == "1";
	MyLiveChat.OperatingHoursValDay3 = MyLiveChat.OperatingHoursValDay3 || "";
	MyLiveChat.OperatingHoursCheckDay4 = (MyLiveChat.OperatingHoursCheckDay4 || "") == "1";
	MyLiveChat.OperatingHoursValDay4 = MyLiveChat.OperatingHoursValDay4 || "";
	MyLiveChat.OperatingHoursCheckDay5 = (MyLiveChat.OperatingHoursCheckDay5 || "") == "1";
	MyLiveChat.OperatingHoursValDay5 = MyLiveChat.OperatingHoursValDay5 || "";
	MyLiveChat.OperatingHoursCheckDay6 = (MyLiveChat.OperatingHoursCheckDay6 || "") == "1";
	MyLiveChat.OperatingHoursValDay6 = MyLiveChat.OperatingHoursValDay6 || "";

	MyLiveChat.ButtonOnlineTooltip = MyLiveChat.ButtonOnlineTooltip || "";
	MyLiveChat.ButtonOfflineTooltip = MyLiveChat.ButtonOfflineTooltip || "";

	MyLiveChat.LinkOnlineTooltip = MyLiveChat.LinkOnlineTooltip || "";
	MyLiveChat.LinkOfflineTooltip = MyLiveChat.LinkOfflineTooltip || "";
	MyLiveChat.LinkOnlineCode = MyLiveChat.LinkOnlineCode || "Click here to chat";
	MyLiveChat.LinkOfflineCode = MyLiveChat.LinkOfflineCode || "Click here to leave a message";

	MyLiveChat.BoxOnlineCode = MyLiveChat.BoxOnlineCode || "Online";
	MyLiveChat.BoxOfflineCode = MyLiveChat.BoxOfflineCode || "Leave a message";
	MyLiveChat.BoxOnlineTooltip = MyLiveChat.BoxOnlineTooltip || "";
	MyLiveChat.BoxOfflineTooltip = MyLiveChat.BoxOfflineTooltip || "";

	MyLiveChat.BoxMessage = MyLiveChat.BoxMessage || MyLiveChat.BoxPrompt;


	MyLiveChat.DialogWidth = MyLiveChat._GetNumber(MyLiveChat.DialogWidth, 580);
	MyLiveChat.DialogHeight = MyLiveChat._GetNumber(MyLiveChat.DialogHeight, 420);


	MyLiveChat.InviteTemplate = MyLiveChat.InviteTemplate || "5";
	MyLiveChat.InvitePosition = MyLiveChat.InvitePosition || "middlecenter";
	MyLiveChat.InviteStartPos = MyLiveChat.InviteStartPos || "topcenter";
	MyLiveChat.InviteOffsetX = MyLiveChat._GetNumber(MyLiveChat.InviteOffsetX, 0);
	MyLiveChat.InviteOffsetY = MyLiveChat._GetNumber(MyLiveChat.InviteOffsetY, -100);
	MyLiveChat.InviteHeadline = MyLiveChat.InviteHeadline || "Chat Invitation";
	MyLiveChat.InviteMessage = MyLiveChat.InviteMessage || "Hello, my name is (AGENT). How may I help you today?";

	MyLiveChat.InviteUseAgentPhoto = MyLiveChat.InviteUseAgentPhoto == "1" ? true : false;

	MyLiveChat.InviteAcceptText = MyLiveChat.TEXT_ACCEPTINVITE || "Chat Now";
	MyLiveChat.InviteRejectText = MyLiveChat.TEXT_REJECTINVITE || "No Thanks";

	MyLiveChat.InviteShowTimeout = MyLiveChat._GetNumber(MyLiveChat.InviteShowTimeout, 0);

	MyLiveChat.SmartTemplate = MyLiveChat.SmartTemplate || "1";
	MyLiveChat.SmartPosition = MyLiveChat.SmartPosition || "bottomright";
	MyLiveChat.SmartStartPos = MyLiveChat.SmartStartPos || "topright";
	MyLiveChat.SmartOffsetX = MyLiveChat._GetNumber(MyLiveChat.SmartOffsetX, 0);
	MyLiveChat.SmartOffsetY = MyLiveChat._GetNumber(MyLiveChat.SmartOffsetY, -30);
	MyLiveChat.SmartCondition = MyLiveChat.SmartCondition || "always";
	MyLiveChat.SmartHeadline = MyLiveChat.SmartHeadline || "Chat Invitation";
	MyLiveChat.SmartMessage = MyLiveChat.SmartMessage || "May I help you?";

	MyLiveChat.SmartShowDepartments = MyLiveChat.SmartShowDepartments || "All";
	MyLiveChat.SmartClickOfflineItem = MyLiveChat.SmartClickOfflineItem || "PreChat";
	MyLiveChat.SmartShowOfflineText = MyLiveChat.SmartShowOfflineText || "";



	MyLiveChat.SmartAcceptText = MyLiveChat.TEXT_ACCEPTSMART || "Chat Now";
	MyLiveChat.SmartRejectText = MyLiveChat.TEXT_REJECTSMART || "No Thanks";

	MyLiveChat.SmartMaxReject = MyLiveChat._GetNumber(MyLiveChat.SmartMaxReject, 2);
	MyLiveChat.SmartUseMaxReject = ("0" != MyLiveChat.SmartUseMaxReject);
	MyLiveChat.SmartMaxIgnore = MyLiveChat._GetNumber(MyLiveChat.SmartMaxIgnore, 2);
	MyLiveChat.SmartUseMaxIgnore = ("0" != MyLiveChat.SmartUseMaxIgnore);
	MyLiveChat.SmartHideTimeout = 60 * (MyLiveChat._GetNumber(MyLiveChat.SmartHideTimeout,10));
	MyLiveChat.SmartUseHideTimeout = ("0" != MyLiveChat.SmartUseHideTimeout);

	MyLiveChat.SmartShowTimeout = MyLiveChat._GetNumber(MyLiveChat.SmartShowTimeout, 60);

	MyLiveChat.SmartUseShowTimeout = ("0" != MyLiveChat.SmartUseShowTimeout);
	MyLiveChat.SmartHideIfChatting = ("0" != MyLiveChat.SmartHideIfChatting);
	MyLiveChat.SmartPlaySound = ("0" != MyLiveChat.SmartPlaySound);
	MyLiveChat.SmartSoundFile = MyLiveChat._GetNumber(MyLiveChat.SmartSoundFile, 1);
	MyLiveChat.SmartUsePageCount = ("0" != MyLiveChat.SmartUsePageCount);
	MyLiveChat.SmartPageCount = MyLiveChat._GetNumber(MyLiveChat.SmartPageCount, 1);
	MyLiveChat.SmartUsePageTime = ("0" != MyLiveChat.SmartUsePageTime);
	MyLiveChat.SmartPageTime = MyLiveChat._GetNumber(MyLiveChat.SmartPageTime, 5);
	MyLiveChat.SmartUseStayTime = ("0" != MyLiveChat.SmartUseStayTime);
	MyLiveChat.SmartStayTime = MyLiveChat._GetNumber(MyLiveChat.SmartStayTime, 5);
	MyLiveChat.SmartUseVisitUrlFilter = ("0" != MyLiveChat.SmartUseVisitUrlFilter);
	MyLiveChat.SmartVisitUrlFilter = MyLiveChat.SmartVisitUrlFilter
	MyLiveChat.SmartUseEntryUrlFilter = ("0" != MyLiveChat.SmartUseEntryUrlFilter);
	MyLiveChat.SmartEntryUrlFilter = MyLiveChat.SmartEntryUrlFilter
	MyLiveChat.SmartUseReferUrlFilter = ("0" != MyLiveChat.SmartUseReferUrlFilter);
	MyLiveChat.SmartReferUrlFilter = MyLiveChat.SmartReferUrlFilter
	MyLiveChat.SmartUseKeywordsFilter = ("0" != MyLiveChat.SmartUseKeywordsFilter);
	MyLiveChat.SmartKeywordsFilter = MyLiveChat.SmartKeywordsFilter

	MyLiveChat.SmartAcceptTooltip = MyLiveChat.SmartAcceptTooltip
	MyLiveChat.SmartRejectTooltip = MyLiveChat.SmartRejectTooltip

	MyLiveChat.InviteAcceptTooltip = MyLiveChat.InviteAcceptTooltip
	MyLiveChat.InviteRejectTooltip = MyLiveChat.InviteRejectTooltip
	MyLiveChat.InvitePlaySound = ("0" != MyLiveChat.InvitePlaySound);
	MyLiveChat.InviteSoundFile = MyLiveChat.InviteSoundFile || "1";


	MyLiveChat.InPageTemplate = MyLiveChat.InPageTemplate || "1";
	MyLiveChat.InPagePosition = MyLiveChat.InPagePosition || "bottomright";
	MyLiveChat.InPageStartPos = MyLiveChat.InPageStartPos || "bottomright";
	MyLiveChat.InPageOffsetX = MyLiveChat._GetNumber(MyLiveChat.InPageOffsetX, 0);
	MyLiveChat.InPageOffsetY = MyLiveChat._GetNumber(MyLiveChat.InPageOffsetY, 0);
	MyLiveChat.InPageHeadBgColor = MyLiveChat.InPageHeadBgColor || "";
	MyLiveChat.InPageHeadBorderColor = MyLiveChat.InPageHeadBorderColor || "";
	MyLiveChat.InPageHeadBorderWidth = MyLiveChat.InPageHeadBorderWidth || "1";
	MyLiveChat.InPageHeadColor = MyLiveChat.InPageHeadColor || "white";
	MyLiveChat.InPageHeadFont = MyLiveChat.InPageHeadFont || "";
	MyLiveChat.InPageHeadOffline = MyLiveChat.InPageHeadOffline || MyLiveChat._GetText("UI_Inline_Offline") || "Leave a message";
	MyLiveChat.InPageHeadOnline = MyLiveChat.InPageHeadOnline || MyLiveChat._GetText("UI_Inline_Online") || "Chat now";
	MyLiveChat.InPageHeadSize = MyLiveChat.InPageHeadSize || "15px";
	MyLiveChat.InPageImageOnline = MyLiveChat.InPageImageOnline || "1";
	MyLiveChat.InPageImageOffline = MyLiveChat.InPageImageOffline || "1";
	MyLiveChat.InPageImageUrlOnline = MyLiveChat.InPageImageUrlOnline || "";
	MyLiveChat.InPageImageUrlOffline = MyLiveChat.InPageImageUrlOffline || "";

	MyLiveChat.InPageBubbleTopClosed = false;
	MyLiveChat.InPageUseBubbleTop = MyLiveChat.InPageUseBubbleTop == "1";
	MyLiveChat.InPageBubbleTop = MyLiveChat.InPageBubbleTop || "1";
	MyLiveChat.InPageBubbleTopUrl = MyLiveChat.InPageBubbleTopUrl || "";


	MyLiveChat.WidgetStartPos = MyLiveChat.WidgetStartPos || "middleleft";
	MyLiveChat.WidgetPosition = MyLiveChat.WidgetPosition || "middleleft";
	MyLiveChat.WidgetOffsetX = MyLiveChat._GetNumber(MyLiveChat.WidgetOffsetX, 0);
	MyLiveChat.WidgetOffsetY = MyLiveChat._GetNumber(MyLiveChat.WidgetOffsetY, 0);

	MyLiveChat.WidgetHoverOffsetX = MyLiveChat._GetNumber(MyLiveChat.WidgetHoverOffsetX, 0);
	MyLiveChat.WidgetHoverOffsetY = MyLiveChat._GetNumber(MyLiveChat.WidgetHoverOffsetY, 0);
	MyLiveChat.WidgetBodyPadding = MyLiveChat._GetNumber(MyLiveChat.WidgetBodyPadding, 0);
	MyLiveChat.WidgetOnlineImage = MyLiveChat.WidgetOnlineImage || '1';
	MyLiveChat.WidgetOfflineImage = MyLiveChat.WidgetOfflineImage || '1';
	MyLiveChat.WidgetOnlineImageUrl = MyLiveChat.WidgetOnlineImageUrl || '';
	MyLiveChat.WidgetOfflineImageUrl = MyLiveChat.WidgetOfflineImageUrl || '';
	MyLiveChat.WidgetHoverOnlineImage = MyLiveChat.WidgetHoverOnlineImage || '1';
	MyLiveChat.WidgetHoverOfflineImage = MyLiveChat.WidgetHoverOfflineImage || '1';
	MyLiveChat.WidgetHoverOnlineImageUrl = MyLiveChat.WidgetHoverOnlineImageUrl || '';
	MyLiveChat.WidgetHoverOfflineImageUrl = MyLiveChat.WidgetHoverOfflineImageUrl || '';

	MyLiveChat.BoxPrompt = "Type your question here and click below...";

	MyLiveChat.DialogOption = "status=1,width=" + MyLiveChat.DialogWidth + ",height=" + MyLiveChat.DialogHeight + ",resizable=1";
	MyLiveChat.DialogOption += ",left=" + Math.floor((screen.availWidth - MyLiveChat.DialogWidth) / 2)
	MyLiveChat.DialogOption += ",top=" + Math.floor((screen.availHeight - MyLiveChat.DialogHeight) / 2)

	MyLiveChat.PopupBlockedMsg = "Pop-up blocker detected.";

	MyLiveChat.SmartPhotoWidth = 128;

	if (!MyLiveChat.SmartUseHideTimeout) {
		MyLiveChat.SmartHideTimeout = 0;
	}


	if (MyLiveChat.OperatingHoursEnable) {
		if (MyLiveChat.OperatingHoursSchedule == "0" && !MyLiveChat.OperatingHoursCheckWeekday && !MyLiveChat.OperatingHoursCheckWeekend) {
			MyLiveChat.OperatingHoursEnable = false;
		}
		if (MyLiveChat.OperatingHoursSchedule == "1" && !MyLiveChat.OperatingHoursCheckDay0 &&
			!MyLiveChat.OperatingHoursCheckDay1 && !MyLiveChat.OperatingHoursCheckDay2 &&
			!MyLiveChat.OperatingHoursCheckDay3 && !MyLiveChat.OperatingHoursCheckDay4 &&
			!MyLiveChat.OperatingHoursCheckDay5 && !MyLiveChat.OperatingHoursCheckDay6) {
			MyLiveChat.OperatingHoursEnable = false;
		}
	}

	MyLiveChat.FeedbackTitle = MyLiveChat._GetText('UI_Feedback_Title') || "Offline Message";
	MyLiveChat.FeedbackHeadline = MyLiveChat._GetText('UI_Feedback_Headline') || "Leave a message";
	MyLiveChat.FeedbackMessage = MyLiveChat._GetText('UI_Feedback_Message') || "There are no agents available right now to take your call. Please leave a message and we will get back to you soon.";

	MyLiveChat.WaitingTitle = MyLiveChat.WaitingTitle || MyLiveChat._GetText("UI_Waiting_Title") || "LiveChat";
	MyLiveChat.WaitingHeadline = MyLiveChat._GetText("UI_Waiting_Headline") || "Live Chat";
	MyLiveChat.WaitingMessage = MyLiveChat._GetText("UI_Waiting_Message") || "Thank you for contacting us. To serve you better please provide the following information:";

	MyLiveChat.WaitingOfflineDepartment = MyLiveChat.WaitingOfflineDepartment || "Enable";
	MyLiveChat.WaitingShowOfflineText = MyLiveChat.WaitingShowOfflineText || "";

	MyLiveChat.WaitingPhoto = MyLiveChat.WaitingPhoto || "1";

	MyLiveChat.SupportTitle = MyLiveChat.SupportTitle || MyLiveChat._GetText("UI_Support_Title") || "LiveChat";
	MyLiveChat.SupportAgentPhoto = MyLiveChat.SupportAgentPhoto || "images/livechat.jpg";


	MyLiveChat.WaitingShowForClick = MyLiveChat.WaitingShowForClick != "0";
	MyLiveChat.WaitingShowForSmart = MyLiveChat.WaitingShowForSmart != "0";
	MyLiveChat.WaitingShowForInvite = MyLiveChat.WaitingShowForInvite == "1";

	//0-hide,1-optional,2-required,3-readonly
	MyLiveChat.InlineChatWaitingFieldEmail = MyLiveChat._GetNumber(MyLiveChat.InlineChatWaitingFieldEmail, 1);
	MyLiveChat.InlineChatWaitingFieldQuestion = MyLiveChat._GetNumber(MyLiveChat.InlineChatWaitingFieldQuestion, 1);
	MyLiveChat.InlineChatWaitingFieldDepartment = MyLiveChat._GetNumber(MyLiveChat.InlineChatWaitingFieldDepartment, 1);

	MyLiveChat.InlineChatWaitingShowForClick = MyLiveChat.InlineChatWaitingShowForClick != "0";

	MyLiveChat.InlineChatFeedbackBehavior = MyLiveChat.InlineChatFeedbackBehavior || "Show";
	MyLiveChat.InlineChatFeedbackRedirectUrl = MyLiveChat.InlineChatFeedbackRedirectUrl || "";




	try {
		MyLiveChat.CustomDataDefinition = eval("_=" + (MyLiveChat.CustomDataDefinition || "null")) || [];
	}
	catch (x) {
		MyLiveChat.CustomDataDefinition = [];
	}

	try {
		var stag = document.createElement("style");
		stag.text = stag.innerText = ".jsml_label {font: normal 12px 'Helvetica Neue',Arial,sans-serif;line-height: 16px;color:black} .jsml_label divxx {font-size: inherit!important;line-height:inherit!important;color:inherit!important}";
		document.body.insertBefore(stag, document.body.firstChild);
	}
	catch (x) {
		//IE8
	}

	MyLiveChat.InlineChatIntroColor = MyLiveChat.InlineChatIntroColor || "";
	MyLiveChat.InlineChatIntroFont = MyLiveChat.InlineChatIntroFont || "";
	MyLiveChat.InlineChatIntroSize = MyLiveChat.InlineChatIntroSize || "";
	MyLiveChat.InlineChatIntroCssText = "line-height:1.3em;";
	if (MyLiveChat.InlineChatIntroFont) MyLiveChat.InlineChatIntroCssText += "font-family:" + MyLiveChat.InlineChatIntroFont + "!important;";
	if (MyLiveChat.InlineChatIntroSize) MyLiveChat.InlineChatIntroCssText += "font-size:" + MyLiveChat.InlineChatIntroSize + "!important;";

	MyLiveChat.InlineChatBackColor = MyLiveChat.InlineChatBackColor || "";
	MyLiveChat.InlineChatTextColor = MyLiveChat.InlineChatTextColor || "";
	MyLiveChat.InlineChatEmbedColor = MyLiveChat.InlineChatEmbedColor || "";
	MyLiveChat.InlineChatShowLogo = MyLiveChat.InlineChatShowLogo != "0";


	MyLiveChat_CalcImagePath("ButtonOnlineImage");
	MyLiveChat_CalcImagePath("ButtonOfflineImage");
	MyLiveChat_CalcImagePath("BoxOnlinePhoto");
	MyLiveChat_CalcImagePath("BoxOfflinePhoto");
	MyLiveChat_CalcImagePath("InvitePhoto");
	MyLiveChat_CalcImagePath("SmartPhoto");

	MyLiveChat_CalcImagePath("FeedbackLogo");
	MyLiveChat_CalcImagePath("FeedbackPhoto");

	MyLiveChat_CalcImagePath("WaitingLogo");
	MyLiveChat_CalcImagePath("WaitingPhoto");

	MyLiveChat_CalcImagePath("SupportLogo");
	MyLiveChat_CalcImagePath("SupportPhoto");

	MyLiveChat_CalcCustomUrl("WidgetOnlineImage");
	MyLiveChat_CalcCustomUrl("WidgetOfflineImage");
	MyLiveChat_CalcCustomUrl("WidgetHoverOnlineImage");
	MyLiveChat_CalcCustomUrl("WidgetHoverOfflineImage");
	MyLiveChat_CalcCustomUrl("InPageImage","Online");
	MyLiveChat_CalcCustomUrl("InPageImage","Offline");
	MyLiveChat_CalcCustomUrl("InPageBubbleTop");

	MyLiveChat_CalcImagePath("InlineChatOnlineLogo", "1", ".png");
	MyLiveChat_CalcImagePath("InlineChatOfflineLogo", "1", ".png");

}

function MyLiveChat_CalcImagePath(name, defval, ext) {
	if (MyLiveChat[name] == "upload") {
		MyLiveChat[name] = MyLiveChat.SiteUrl + "Customization/Customer/" + MyLiveChat.HCCID + "/" + name + (ext || ".gif");
	}
	else {
	    var pngFiles = ",invitephoto_1,buttononlineimage_2,buttononlineimage_3,buttononlineimage_4,buttonofflineimage_2,buttonofflineimage_3,buttonofflineimage_4,"
		var file = name + "_" + (MyLiveChat[name] || defval || "1");
	    //if (!ext && file.toLowerCase() == "invitephoto_1")
		if (!ext && pngFiles.indexOf("," + file.toLowerCase() + ",") >= 0)
		    ext = ".png";
		MyLiveChat[name] = MyLiveChat.SiteUrl + "Customization/Template/" + file + (ext || ".gif");
	}
}
function MyLiveChat_CalcCustomUrl(name, part2) {
	if (!part2) part2 = "";
	if (MyLiveChat[name + part2] != "custom") {
		MyLiveChat[name + "Url" + part2] = MyLiveChat.SiteUrl + "Customization/Template/" + name + part2 + "_" + (MyLiveChat[name + part2] || "1") + ".png";
	}
}

function MyLiveChat_InitOnceDialog() {
	//0-hide,1-optional,2-required,3-readonly
	MyLiveChat.WaitingFieldEmail = MyLiveChat._GetNumber(MyLiveChat.WaitingFieldEmail, 1);
	MyLiveChat.WaitingFieldQuestion = MyLiveChat._GetNumber(MyLiveChat.WaitingFieldQuestion, 1);
	MyLiveChat.WaitingFieldDepartment = MyLiveChat._GetNumber(MyLiveChat.WaitingFieldDepartment, 1);

	MyLiveChat.WaitingShowForClick = MyLiveChat.WaitingShowForClick != "0";

	MyLiveChat.FeedbackBehavior = MyLiveChat.FeedbackBehavior || "Show";
	MyLiveChat.FeedbackRedirectUrl = MyLiveChat.FeedbackRedirectUrl || "";

	MyLiveChat.SupportShowTopToolbar = MyLiveChat.SupportShowTopToolbar != "0";
	MyLiveChat.SupportShowSaveButton = MyLiveChat.SupportShowSaveButton != "0";
	MyLiveChat.SupportShowMailButton = MyLiveChat.SupportShowMailButton != "0";
	MyLiveChat.SupportShowPrintButton = MyLiveChat.SupportShowPrintButton != "0";
	MyLiveChat.SupportShowSoundButton = MyLiveChat.SupportShowSoundButton != "0";
	MyLiveChat.SupportShowUploadButton = MyLiveChat.SupportShowUploadButton != "0";
	MyLiveChat.SupportShowCloseButton = MyLiveChat.SupportShowCloseButton != "0";
	MyLiveChat.SupportShowEditToolbar = MyLiveChat.SupportShowEditToolbar != "0";
	MyLiveChat.SupportShowBoldButton = MyLiveChat.SupportShowBoldButton != "0";
	MyLiveChat.SupportShowItalicButton = MyLiveChat.SupportShowItalicButton != "0";
	MyLiveChat.SupportShowUnderlineButton = MyLiveChat.SupportShowUnderlineButton != "0";
	MyLiveChat.SupportShowEmotionButton = MyLiveChat.SupportShowEmotionButton != "0";

	MyLiveChat.SurveyVisible = MyLiveChat.SurveyVisible != "0";
	MyLiveChat.SurveyUseEmail = MyLiveChat.SurveyUseEmail != "0";
	MyLiveChat.SurveyUseRating = MyLiveChat.SurveyUseRating != "0";
	MyLiveChat.SurveyUseComment = MyLiveChat.SurveyUseComment != "0";
}
function MyLiveChat_InitOnceInline() {

	MyLiveChat.WaitingShowForClick = MyLiveChat.InlineChatWaitingShowForClick;

	MyLiveChat.SupportShowTopToolbar = MyLiveChat.InlineChatShowTopToolbar != "0";
	MyLiveChat.SupportShowSaveButton = MyLiveChat.InlineChatShowSaveButton != "0";
	MyLiveChat.SupportShowMailButton = MyLiveChat.InlineChatShowMailButton != "0";
	MyLiveChat.SupportShowPrintButton = MyLiveChat.InlineChatShowPrintButton != "0";
	MyLiveChat.SupportShowSoundButton = MyLiveChat.InlineChatShowSoundButton != "0";
	MyLiveChat.SupportShowUploadButton = MyLiveChat.InlineChatShowUploadButton != "0";
	MyLiveChat.SupportShowCloseButton = MyLiveChat.InlineChatShowCloseButton != "0";
	MyLiveChat.SupportShowEditToolbar = MyLiveChat.InlineChatShowEditToolbar != "0";
	MyLiveChat.SupportShowBoldButton = MyLiveChat.InlineChatShowBoldButton != "0";
	MyLiveChat.SupportShowItalicButton = MyLiveChat.InlineChatShowItalicButton != "0";
	MyLiveChat.SupportShowUnderlineButton = MyLiveChat.InlineChatShowUnderlineButton != "0";
	MyLiveChat.SupportShowEmotionButton = MyLiveChat.InlineChatShowEmotionButton != "0";


	MyLiveChat.SurveyVisible = MyLiveChat.InlineChatSurveyVisible != "0";
	MyLiveChat.SurveyUseEmail = MyLiveChat.InlineChatSurveyUseEmail != "0";
	MyLiveChat.SurveyUseRating = MyLiveChat.InlineChatSurveyUseRating != "0";
	MyLiveChat.SurveyUseComment = MyLiveChat.InlineChatSurveyUseComment != "0";

	MyLiveChat.maxWaitTime = MyLiveChat.InlineChatmaxWaitTime;

}

function MyLiveChat_InitOnceFinal() {


}
MyLiveChat_InitOnce();
if ( MyLiveChat.ChatType == "inpage") {
	MyLiveChat_InitOnceInline(); 
}
else {
	MyLiveChat_InitOnceDialog();
}
MyLiveChat_InitOnceFinal();


function MyLiveChat_IsDuringOperatingHours() {
	if (!MyLiveChat.OperatingHoursEnable)
		return false;

	var clientTimezone = parseInt(0 - new Date().getTimezoneOffset() / 60);
	var clientAdjustTime = new Date();
	clientAdjustTime.setTime(new Date().getTime() + (MyLiveChat.OperatingHoursTimeZone - clientTimezone) * 60 * 60 * 1000);
	var clientAdjustHour = clientAdjustTime.getHours();
	var clientAdjustMinute = clientAdjustTime.getMinutes();

	var scheduleRange = [];
	var scheduleDay = clientAdjustTime.getDay();
	if (MyLiveChat.OperatingHoursSchedule == "0") {
		if ((scheduleDay > 0 || scheduleDay < 6) && MyLiveChat.OperatingHoursCheckWeekday && MyLiveChat.OperatingHoursValWeekday)
			scheduleRange = MyLiveChat.OperatingHoursValWeekday.split("-");
		if ((scheduleDay == 0 || scheduleDay == 6) && MyLiveChat.OperatingHoursCheckWeekend && MyLiveChat.OperatingHoursValWeekend)
			scheduleRange = MyLiveChat.OperatingHoursValWeekend.split("-");
	}
	else {
		if (MyLiveChat["OperatingHoursCheckDay" + scheduleDay] && MyLiveChat["OperatingHoursValDay" + scheduleDay])
			scheduleRange = MyLiveChat["OperatingHoursValDay" + scheduleDay].split("-");
	}

	if (scheduleRange.length == 0)
		return false;
	var sceduleStart = new Date();
	sceduleStart.setTime(clientAdjustTime.getTime());
	sceduleStart.setHours(parseInt(scheduleRange[0].split(":")[0]));
	sceduleStart.setMinutes(parseInt(scheduleRange[0].split(":")[1]));
	sceduleStart.setSeconds(0);
	var sceduleEnd = new Date();
	sceduleEnd.setTime(clientAdjustTime.getTime());
	sceduleEnd.setHours(parseInt(scheduleRange[1].split(":")[0]));
	sceduleEnd.setMinutes(parseInt(scheduleRange[1].split(":")[1]));
	sceduleEnd.setSeconds(0);

	if (clientAdjustTime < sceduleStart || clientAdjustTime > sceduleEnd)
		return false;
	return true;
}

function IE_AddBehavior() {
	if (!document.body) {
		return setTimeout(IE_AddBehavior, 1);
	}
	var inp = document.createElement("input");
	inp.setAttribute("type", "hidden");
	document.body.insertBefore(inp, document.body.firstChild);
	MyLiveChat.userDataBehavior = inp;
	MyLiveChat.userDataBehavior.style.behavior = "url('#default#userData')";
}

(function () {
	if (MyLiveChat.localStorage || MyLiveChat.userDataBehavior)
		return;
	if (/MSIE [678]\./.test(navigator.userAgent)) {
		IE_AddBehavior();
	}
	MyLiveChat.localStorage = window.localStorage;

})();


function MyLiveChat_LoadUserDataBehavior(name) {
	try {
		if (MyLiveChat.userDataBehavior == null)
			return false;
		MyLiveChat.userDataBehavior.load("mlc-" + MyLiveChat.HCCID + "-" + name);
		return true;
	}
	catch (x) {
		return false;
	}
}

function MyLiveChat_SupportLocalData() {
	if (MyLiveChat_LoadUserDataBehavior("any"))
		return "userDataBehavior";
	if (MyLiveChat.localStorage)
		return "localStorage";
}

function MyLiveChat_GetLocalData(name) {
	if (MyLiveChat_LoadUserDataBehavior(name)) {
		var nam = MyLiveChat.userDataBehavior.getAttribute("n");
		if (nam != name)
			return null;
		var val = MyLiveChat.userDataBehavior.getAttribute("v");
		var exp = MyLiveChat.userDataBehavior.getAttribute("e");
		if (exp && new Date().getTime() > parseInt(exp))
			return null;
		return val;
	}
	if (MyLiveChat.localStorage) {
		var val = MyLiveChat.localStorage.getItem("mlcv-" + MyLiveChat.HCCID + "-" + name);
		var exp = MyLiveChat.localStorage.getItem("mlce-" + MyLiveChat.HCCID + "-" + name);
		if (exp && new Date().getTime() > exp)
			return null;
		return val;
	}

	var cookies = document.cookie.split(';');
	for (var i = 0; i < cookies.length; i++) {
		var parts = cookies[i].split('=');
		if (name == parts[0].replace(/\s/g, ''))
			return unescape(parts[1])
	}
}
function MyLiveChat_SetLocalData(name, value, seconds) {
	if (MyLiveChat_LoadUserDataBehavior()) {
		MyLiveChat.userDataBehavior.setAttribute("n", name);
		if (value)
			MyLiveChat.userDataBehavior.setAttribute("v", value);
		else
			MyLiveChat.userDataBehavior.removeAttribute("v");
		if (seconds)
			MyLiveChat.userDataBehavior.setAttribute("e", String(new Date().getTime() + seconds * 1000));
		else
			MyLiveChat.userDataBehavior.removeAttribute("e");
		MyLiveChat.userDataBehavior.save("mlc-" + MyLiveChat.HCCID + "-" + name);
		return;
	}
	if (MyLiveChat.localStorage) {
		if (value)
			MyLiveChat.localStorage.setItem("mlcv-" + MyLiveChat.HCCID + "-" + name, value);
		else
			MyLiveChat.localStorage.removeItem("mlcv-" + MyLiveChat.HCCID + "-" + name);
		if (seconds)
			MyLiveChat.localStorage.setItem("mlce-" + MyLiveChat.HCCID + "-" + name, String(new Date().getTime() + seconds * 1000));
		else
			MyLiveChat.localStorage.removeItem("mlce-" + MyLiveChat.HCCID + "-" + name);
		return;
	}

	var cookie = name + "=" + escape(value) + "; path=/;";
	if (seconds) {
		var d = new Date();
		d.setSeconds(d.getSeconds() + seconds);
		cookie += " expires=" + d.toUTCString() + ";";
	}
	document.cookie = cookie;
}



function MyLiveChat_SyncToCPR() {
	var arr = MyLiveChat.CPRFIELDS;
	for (var i = 0; i < arr.length; i++)
		MyLiveChat_SetLocalData("MLC" + arr[i], MyLiveChat_CPREncode(MyLiveChat[arr[i]]));
	MyLiveChat_SetLocalData("MLCCPRDT", String(new Date().getTime()));
	MyLiveChat_SetLocalData("MLCCPPBT", String(MyLiveChat.PageBeginTime));
	MyLiveChat_SetLocalData("MLCCPAPT", String(MyLiveChat.PageBeginTime));

}

function MyMyLiveChat_SmartTriggers() {
	//for this page
	if (MyLiveChat.SmartAccepted)
		return false;
	if (MyLiveChat.SmartRejected)
		return false;

	if (MyLiveChat.SmartHideIfChatting) {
		if (MyLiveChat.VisitorStatus != "VISIT") {
			return false;
		}
	}

	if (MyLiveChat_GetLocalData("MLCSmart")) {
		if (new Date().getTime() / 1000 - (parseFloat(MyLiveChat_GetLocalData("MLCSmartTime")) || 0) / 1000 < MyLiveChat.SmartHideTimeout) {
			if (MyLiveChat.SmartUseMaxReject && MyLiveChat.SmartMaxReject > 0) {
				if ((parseInt(MyLiveChat_GetLocalData("MLCSmartRejectCount")) || 0) >= MyLiveChat.SmartMaxReject) {
					return false;
				}
			}
			if (MyLiveChat.SmartUseMaxIgnore && MyLiveChat.SmartMaxIgnore > 0) {
				if ((parseInt(MyLiveChat_GetLocalData("MLCSmartIgnoreCount")) || 0) >= MyLiveChat.SmartMaxIgnore) {
					return false;
				}
			}
		}
	}

	if (MyLiveChat.SmartUsePageCount && MyLiveChat.VisitorUrls.length >= MyLiveChat.SmartPageCount) {
		return true;
	}

	if (MyLiveChat.SmartUseStayTime && MyLiveChat.VisitorDuration > MyLiveChat.SmartStayTime) {
		return true;
	}

	if (MyLiveChat.SmartUsePageTime) {
		var pagetime = new Date().getTime() / 1000 - MyLiveChat.PageBeginTime / 1000;
		if (pagetime > MyLiveChat.SmartPageTime) {
			return true;
		}
	}

	if (MyLiveChat.SmartUseVisitUrlFilter && MyLiveChat.SmartVisitUrlFilter) {
		if (MyLiveChat_SmartIsMatch(window.location.href, MyLiveChat.SmartVisitUrlFilter))
			return true;
	}
	if (MyLiveChat.SmartUseEntryUrlFilter && MyLiveChat.SmartEntryUrlFilter) {
		if (MyLiveChat_SmartIsMatch(MyLiveChat.VisitorEntryUrl, MyLiveChat.SmartEntryUrlFilter))
			return true;
	}
	if (MyLiveChat.SmartUseReferUrlFilter && MyLiveChat.SmartReferUrlFilter) {
		if (MyLiveChat_SmartIsMatch(MyLiveChat.VisitorReferUrl, MyLiveChat.SmartReferUrlFilter))
			return true;
	}
	if (MyLiveChat.SmartUseKeywordsFilter && MyLiveChat.SmartKeywordsFilter) {
		if (MyLiveChat.VisitorReferUrl) {
			var qs = MyLiveChat.VisitorReferUrl.split('#')[0].split('?')[1];
			if (qs) {
				qs = qs.split('&');
				for (var i = 0; i < qs.length; i++) {
					var value = qs[i].split('=')[1];

					if (MyLiveChat_SmartIsMatch(value, MyLiveChat.SmartKeywordsFilter))
						return true;
					//alert([value,MyLiveChat.SmartKeywordsFilter])
				}
			}
		}
	}

	return false;
}

function MyLiveChat_SmartIsMatch(data, filter) {
	if (!data) return false;
	if (!filter) return false;

	var arr = filter.toLowerCase().split(',');
	for (var i = 0; i < arr.length; i++) {
		var item = arr[i].replace(/(^\s+)|(\s+$)/g, "");
		if (!item) continue;

		if (data.toLowerCase().indexOf(item) != -1)
			return true;
	}
}

function MyLiveChat_HtmlEncode(text) {
	if (!text) return "";
	return text.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/\x22/g, "&quot;")
		.replace(/\x27/g, "&#39;").replace(/\n/g, "<br/>").replace(/\r/g, "");
}


function MyLiveChat_InvokeEvent(name, param) {
	//known events : Loading,ShowInvite,HideInvite,ShowSmart,HideSmart,SmartPanelLoad,InvitePanelLoad
	if (window.HandleLiveChatEvent) {
		window.HandleLiveChatEvent(name, param);
	}
	if (MyLiveChat.SmartPanel && MyLiveChat.SmartPanel.HandleLiveChatEvent) {
		MyLiveChat.SmartPanel.HandleLiveChatEvent(name, param);
	}
	if (MyLiveChat.InvitePanel && MyLiveChat.InvitePanel.HandleLiveChatEvent) {
		MyLiveChat.InvitePanel.HandleLiveChatEvent(name, param);
	}
}

function MyLiveChat_ShowChatBox(disp) {
	if (disp != "none") disp = "";

	var divid = "MyLiveChatScriptBox";

	var tagid = "MyLiveChatChatBoxScriptTagID";
	var tag = document.getElementById(tagid);
	if (tag != null) {
		if (!MyLiveChat.ChatBoxPanel) {
			if (window.jsml && window.jsml.new_chatboxpanel) {
				window.jsml.new_chatboxpanel()
			}
		}
		return;
	}

	var url = MyLiveChat.UrlBase + "ChatBox.aspx?HCCID=" + MyLiveChat.HCCID;

	url = url + "&_ts=" + new Date().getTime();

	tag = document.createElement("SCRIPT");
	tag.id = tagid;
	tag.src = url;

	document.body.insertBefore(tag, document.body.firstChild);

}

function MyLiveChat_PlaySound(url, volume) {
	if (window.Audio) {
		var au = new window.Audio();
		au.autoplay = true;
		au.src = url;
		if (volume) au.volume = parseInt(volume || "0") / 100; // 0 ~ 1
		document.body.insertBefore(au, document.body.firstChild);
		return;
	}
	if (/MSIE/.test(navigator.userAgent)) {
		var bgs = document.createElement("BGSOUND");
		bgs.src = url;
		if (volume) bgs.volume = (parseInt(volume || "0") - 100) * 50; //-10,000 ~ 0
		document.body.insertBefore(bgs, document.body.firstChild);
		return;
	}
}

function MyLiveChat_ShowSmart() {
	var tagid = "MyLiveChatSmartScriptTagID";
	var tag = document.getElementById(tagid);
	if (tag != null) {
		if (!MyLiveChat.SmartPanel) {
			if (window.jsml && window.jsml.new_smartpanel) {
				window.jsml.new_smartpanel()
			}
		}
		return;
	}

	var url = MyLiveChat.UrlBase + "ChatSmart.aspx?HCCID=" + MyLiveChat.HCCID + "&SmartTemplate=" + MyLiveChat.SmartTemplate;

	url = url + "&_ts=" + new Date().getTime();

	tag = document.createElement("SCRIPT");
	tag.id = tagid;
	tag.src = url;

	document.body.insertBefore(tag, document.body.firstChild);

	if (MyLiveChat.SmartPlaySound)
		MyLiveChat_PlaySound(MyLiveChat.SiteUrl + "livechat/Sound/" + MyLiveChat.SoundInvitation + ".mp3", MyLiveChat.SoundInvitationVolume);
	//MyLiveChat_PlaySound(MyLiveChat.SiteUrl+"Customization/Template/Smart_"+MyLiveChat.SmartSoundFile+".wav");

}
function MyLiveChat_AcceptSmart() {
	MyLiveChat.SmartAccepted = true;
	MyLiveChat_SetLocalData("MLCSmart", "Accept", MyLiveChat.SmartHideTimeout);
	MyLiveChat_SetLocalData("MLCSmartTime", new Date().getTime().toString(), MyLiveChat.SmartHideTimeout)
	MyLiveChat_OpenDialog("Smart");
	MyLiveChat_HideSmart();
}
function MyLiveChat_RejectSmart(istimeout) {
	MyLiveChat.SmartRejected = true;
	var rkey = istimeout ? "MLCSmartIgnoreCount" : "MLCSmartRejectCount";
	var rcount = parseInt(MyLiveChat_GetLocalData(rkey)) || 0;
	rcount = rcount + 1;
	MyLiveChat_SetLocalData(rkey, rcount.toString(), MyLiveChat.SmartHideTimeout);
	MyLiveChat_SetLocalData("MLCSmart", "Reject", MyLiveChat.SmartHideTimeout);
	MyLiveChat_SetLocalData("MLCSmartTime", new Date().getTime().toString(), MyLiveChat.SmartHideTimeout)
	MyLiveChat_HideSmart();
}
function MyLiveChat_HideSmart() {
	MyLiveChat_InvokeEvent("HideSmart");
	if (MyLiveChat.SmartPanel) {
		MyLiveChat.SmartPanel.dispose();
		MyLiveChat.SmartPanel = null;
	}
}

function MyLiveChat_ShowInvite() {
	var tagid = "MyLiveChatInviteScriptTagID";
	var tag = document.getElementById(tagid);
	if (tag != null)
		return;

	var url = MyLiveChat.UrlBase + "ChatInvite.aspx?HCCID=" + MyLiveChat.HCCID + "&InviteTemplate=" + MyLiveChat.InviteTemplate;

	url = url + "&_ts=" + new Date().getTime();

	tag = document.createElement("SCRIPT");
	tag.id = tagid;
	tag.src = url;

	document.body.insertBefore(tag, document.body.firstChild);

	if (MyLiveChat.InvitePlaySound) {
		MyLiveChat_PlaySound(MyLiveChat.SiteUrl + "livechat/Sound/" + MyLiveChat.SoundInvitation + ".mp3", MyLiveChat.SoundInvitationVolume);
	}
}
function MyLiveChat_HideInvite() {
	MyLiveChat_InvokeEvent("HideInvite");
	if (MyLiveChat.InvitePanel) {
		MyLiveChat.InvitePanel.dispose();
		MyLiveChat.InvitePanel = null;
	}
}

function MyLiveChat_AcceptInvite() {
	try {
		window.LiveChatPrePopup = window.open("about:blank", '', MyLiveChat.DialogOption);
	}
	catch (x) {
		alert(PopupBlockedMsg);
		return;
	}
	clearTimeout(MyLiveChat.RequestTimerId);
	MyLiveChat_ChangeUrl("ACCEPT");
	MyLiveChat_HideInvite();
}
function MyLiveChat_RejectInvite() {
	clearTimeout(MyLiveChat.RequestTimerId);
	MyLiveChat_ChangeUrl("REJECT")
	MyLiveChat_HideInvite();
}

function MyLiveChat_DelayRequest() {
	MyLiveChat.LastInitTime = new Date().getTime();
	MyLiveChat.NextRequestTimeout = 18000 * (1 + Math.random());
	MyLiveChat_SetNextReqTimeout(MyLiveChat.NextRequestTimeout);
}



function MyLiveChat_SetNextReqTimeout(timer)
{
	if (window.mlcapimodeisdialog||MyLiveChat.IsDesignMode)
		return;

	if(timer)
	{
		MyLiveChat.NextRequestTime=MyLiveChat.LastInitTime+timer;
	}
	clearTimeout(MyLiveChat.RequestTimerId);
	MyLiveChat.RequestTimerId=setTimeout(MyLiveChat_NextRequest,555);
}

function MyLiveChat_NextRequest()
{
	var dt=new Date().getTime();
	
	//document.title=MyLiveChat.NextRequestTime-dt;
	
	if(dt<MyLiveChat.NextRequestTime)
	{
		MyLiveChat_SetNextReqTimeout();
		return;
	}
	
	if(!MyLiveChat.LastLoadTime&&!MyLiveChat.LastSyncTime)
	{
		MyLiveChat_ChangeUrl("VISIT");
		return;
	}
	
	if(!(MyLiveChat.localStorage||MyLiveChat.userDataBehavior))
	{
		MyLiveChat_ChangeUrl("VISIT");
		return;
	}
	
	
	var cppbt=parseInt(MyLiveChat_GetLocalData("MLCCPPBT"));
	if(MyLiveChat.PageBeginTime==cppbt)
	{
		if(cppbt==parseInt(MyLiveChat_GetLocalData("MLCCPAPT")))
		{
			MyLiveChat_ChangeUrl("VISIT");
			return;
		}
		if(dt-MyLiveChat.LastSyncTime>MyLiveChat.NextRequestTimeout*1.8)
		{
			MyLiveChat_ChangeUrl("VISIT");
			return;
		}
		MyLiveChat_SetNextReqTimeout();
		return;
	}
	
	MyLiveChat_SetLocalData("MLCCPAPT",String(MyLiveChat.PageBeginTime));
	
	var cprdt=parseInt(MyLiveChat_GetLocalData("MLCCPRDT"));
	if(!cprdt||dt-cprdt>MyLiveChat.NextRequestTimeout-1800)
	{
		MyLiveChat_ChangeUrl("VISIT");
		return;
	}
	
	MyLiveChat_SetNextReqTimeout(MyLiveChat.NextRequestTimeout);
	
	MyLiveChat_SyncFromCPR();
	MyLiveChat.ReSyncFormCPRTimerId=setTimeout(function()
	{
		if(cprdt!=parseInt(MyLiveChat_GetLocalData("MLCCPRDT")))
		{
			MyLiveChat_SyncFromCPR();
		}
	},MyLiveChat.NextRequestTimeout/2);
}

function MyLiveChat_SyncFromCPR()
{
	var arr=MyLiveChat.CPRFIELDS;
	for(var i=0;i<arr.length;i++)
		MyLiveChat[arr[i]]=MyLiveChat_CPRDecode(MyLiveChat_GetLocalData("MLC"+arr[i]));
	MyLiveChat_Initialize(true);
}
function MyLiveChat_CPRDecode(str)
{
	if(!str)
		return null;
	if(str=="null")return null;
	if(str=="true")return true;
	if(str=="false")return false;
	var prefix=str.substring(0,2);
	str=str.substring(2);
	if(prefix=="s:")
		return str;
	if(prefix=="n:")
		return parseFloat(str);
	if(prefix=="a:")
		return str.split('=|=');
	//document.title="mlc warning,unknown prefix:"+prefix;
	return null;
}

function MyLiveChat_CPREncode(val)
{
	if(val==null)
		return "null";
	var type=typeof(val);
	if(type=="boolean")
		return val?"true":"false";
	if(type=="string")
		return "s:"+val;
	if(type=="number")
		return "n:"+val;
	if(val instanceof Array)
		return "s:"+val.join('=|=');
	//document.title="mlc warning,unknown type:"+type;
	return null;
}

function MyLiveChat_GetSourceUrl()
{
	if(MyLiveChat.SourceUrl)
		return MyLiveChat.SourceUrl;
	return window.location.href;
}
function MyLiveChat_GetReferrer()
{
	var dr=document.referrer;
	if(!dr)return "";
	var chost=window.location.href.split("://")[1].split("/")[0];
	var rhost=dr.split("://")[1].split("/")[0];
	if(chost==rhost)return "";
	return dr;
}
function MyLiveChat_AppendToUrl(url)
{	
	var uadt=parseInt(MyLiveChat_GetLocalData("uadt"))||0;
	var uats=Math.floor( (new Date().getTime()-uadt)/1000 );
	uats=Math.max(1,Math.min(uats,3600*24*30));
	
	var contextdata="2:"+uats+"|"+(MyLiveChat.SourceContextData||"");
	
	url=url
		+"&UserKey="+escape(MyLiveChat.SourceKey||"")
		+"&Name="+escape(MyLiveChat.SourceName||"")
		+"&Email="+escape(MyLiveChat.SourceEmail||"")
		+"&Department="+escape(MyLiveChat.SourceDepartment||"")
		+"&Url="+escape(MyLiveChat_GetSourceUrl())
		+"&Referrer="+escape(MyLiveChat_GetReferrer())
		+"&Subject="+escape(MyLiveChat.SourceSubject||"")
		+"&Question="+escape(MyLiveChat.SourceQuestion||"")
		+"&CustomData="+escape(MyLiveChat.SourceCustomData||"")
		+"&ProductName="+escape(MyLiveChat.SourceProductName||"")
		+"&ProductKey="+escape(MyLiveChat.SourceProductKey||"")
		+"&ContextData="+escape(contextdata)
		+"&ScreenSize="+(screen.width+","+screen.height)
		+"&PageTitle="+escape(document.title)
		+"&uats="+uats
		+ "&mlcv=" + MyLiveChat.Version
		+"&_ts="+new Date().getTime();
	while(url.match(/\&[a-z]+\=\&/ig))url=url.replace(/\&[a-z]+\=\&/ig,"&");
	return url;
}
function MyLiveChat_ChangeUrl(_synctype)
{
	var tagid="MyLiveChatScriptTagID";
	var tag=document.getElementById(tagid);
	if(tag==null)
	{
		tag=document.createElement("SCRIPT");
		document.body.insertBefore(tag,document.body.firstChild);
	}

	var url = MyLiveChat.UrlBase + "livechat.aspx?apimode=sync&HCCID=" + MyLiveChat.HCCID
		+ "&CCCustomerId=" + MyLiveChat.CCCustomerId
		+"&Type="+_synctype;
		
	url=MyLiveChat_AppendToUrl(url);
	
	
	var newtag = document.createElement('SCRIPT');
	newtag.id = tagid;
	newtag.src = url;
    
	MyLiveChat.LastSyncTime=new Date().getTime();
    
	clearTimeout(MyLiveChat._checksynctimerid);
	MyLiveChat._checksynctimerid=setTimeout(function()
	{
		if(MyLiveChat.LastInitTime&&MyLiveChat.LastInitTime>MyLiveChat.LastSyncTime)
			return;
		MyLiveChat_DelayRequest();
	},48000);
	
	tag.parentNode.replaceChild(newtag,tag);
}

function MyLiveChat_GetDialogUrl(mode,chattype)
{
	if(MyLiveChat.SourceDepartment&&MyLiveChat.SmartClickOfflineItem=="Offline")
	{
		for(var i=0;i<MyLiveChat.Departments.length;i++)
		{
			if(MyLiveChat.Departments[i].Name==MyLiveChat.SourceDepartment&&!MyLiveChat.Departments[i].Online)
			{
				mode="Offline";
			}
		}
	}
	
	if(chattype!="inpage"&&!MyLiveChat.HasReadyAgents && 
        MyLiveChat.FeedbackBehavior=="Redirect" && MyLiveChat.FeedbackRedirectUrl)
	{
		return MyLiveChat.FeedbackRedirectUrl;
	}

	var url=MyLiveChat.PrivateChatUrl||(MyLiveChat.HomePage+"chat/");
	url=url.split('#')[0];
	url+=url.indexOf('?')==-1?"?":"&";

	url=url+"HCCID="+MyLiveChat.HCCID
		+ "&CCCustomerId=" + MyLiveChat.CCCustomerId
		+"&Mode="+(mode||"Click")
		+"&ChatType="+(chattype||"default")
		
	url=MyLiveChat_AppendToUrl(url);
	return url;
}

function MyLiveChat_OpenDialog(mode)
{
	return window.open(MyLiveChat_GetDialogUrl(mode),'mylivechatdialog',MyLiveChat.DialogOption);
}


function MyLiveChat_ShowChatWidget(mode)
{
	if (!document.body) {
		setTimeout(function () {
			MyLiveChat_ShowChatWidget(mode)
		}, 100);
		return;
	}
	function DoTestAndShow() {
		if (!MyLiveChat.HasReadyAgents && MyLiveChat.FeedbackBehavior == "Hide")
			return;
		if (MlcBuidinWidget.AgentStatus != null && MlcBuidinWidget.AgentStatus == MyLiveChat.HasReadyAgents)
			return;
		MlcBuidinWidget.Activate();
	}
	DoTestAndShow();
	setInterval(function () {
		DoTestAndShow();
	}, 1000);

}
function MyLiveChat_ShowInPageChat(mode)
{
	if (!document.body) {
		setTimeout(function () {
			MyLiveChat_ShowInPageChat(mode)
		}, 100);
		return;
	}
	if (MyLiveChat.inpagepanelinstance)
		return;
	MyLiveChatInitTemplate();
	MyLiveChat.inpagepanelinstance=jsml.new_inpagepanel();
}

function MyLiveChat_WriteOrSetHTML(apimode, html)
{
	var c=document.getElementById("MyLiveChatContainer");
	if(c)
		c.innerHTML=html;
	else
		MyLiveChat_DocWrite(html,MyLiveChat[apimode+"_script_tag"]);
}

function MyLiveChat_Initialize(fromcpr)
{
	try {
		if (parent.cobrowsedialog)
			return;
	}
	catch (x) {
	}

	MyLiveChat.LastInitTime=new Date().getTime();

	//if enable operating housrs, use it 
	if(MyLiveChat.OperatingHoursEnable)
	{
		if (MyLiveChat_IsDuringOperatingHours()) {
			MyLiveChat.HasReadyAgents = true;
		}
		else if (MyLiveChat.OperatingHoursForceOffline) {
			MyLiveChat.HasReadyAgents = false;
		}
	}
	
	MyLiveChat.ButtonImageUrl=MyLiveChat.HasReadyAgents?MyLiveChat.ButtonOnlineImage:MyLiveChat.ButtonOfflineImage;
	MyLiveChat.ButtonTooltip=MyLiveChat.HasReadyAgents?MyLiveChat.ButtonOnlineTooltip:MyLiveChat.ButtonOfflineTooltip;
	MyLiveChat.LinkHtmlCode=MyLiveChat.HasReadyAgents?MyLiveChat.LinkOnlineCode:MyLiveChat.LinkOfflineCode;
	MyLiveChat.LinkTooltip=MyLiveChat.HasReadyAgents?MyLiveChat.LinkOnlineTooltip:MyLiveChat.LinkOfflineTooltip;
	MyLiveChat.BoxHtmlCode=MyLiveChat.HasReadyAgents?MyLiveChat.BoxOnlineCode:MyLiveChat.BoxOfflineCode;
	MyLiveChat.BoxTooltip=MyLiveChat.HasReadyAgents?MyLiveChat.BoxOnlineTooltip:MyLiveChat.BoxOfflineTooltip;
	MyLiveChat.BoxPhotoUrl=MyLiveChat.HasReadyAgents?MyLiveChat.BoxOnlinePhoto:MyLiveChat.BoxOfflinePhoto;

	if(MyLiveChat.SmartCondition=="online")
	{
		if(!MyLiveChat.HasReadyAgents)
		{
			MyLiveChat.ShowSmart=false;
		}
	}

	if (!MyLiveChat._OnInitCalled) {
		if (window.MyLiveChat_OnInit) {
			window.MyLiveChat_OnInit(MyLiveChat);
		}
		MyLiveChat._OnInitCalled = true;
	}

	MyLiveChat_InvokeEvent("Initializing");
	
	if( ! MyLiveChat.SyncType )
	{
		MyLiveChat_SetNextReqTimeout(MyLiveChat.FirstRequestTimeout);
	}
	else if(MyLiveChat.SyncType=="VISIT")
	{
		var ntimeout=MyLiveChat.NextRequestTimeout;
		if(MyLiveChat.LastSyncTime&&!fromcpr)
		{
			ntimeout+=(new Date().getTime()-MyLiveChat.LastSyncTime)*2;
			if(ntimeout>23000)ntimeout=23000;
		}
		MyLiveChat_SetNextReqTimeout(ntimeout);
	}


	if(MyLiveChat.SyncType=="VISIT")
	{
		if(MyLiveChat.SyncStatus=="INVITE")
		{
			var pos=MyLiveChat.SyncResult.indexOf(',');
			var agentname=MyLiveChat.SyncResult.substring(0,pos);
			var agentmsg=MyLiveChat.SyncResult.substring(pos+1);
			if(agentmsg)
				MyLiveChat.InviteMessage=agentmsg;
			MyLiveChat.InviteMessage=MyLiveChat.InviteMessage.split("(AGENT)").join(agentname);
			
			MyLiveChat.HasInvited=true;
			
			if(MyLiveChat.InviteUseAgentPhoto)
			{
				MyLiveChat.InvitePhoto = MyLiveChat.UrlBase + "FindAgentPhoto.aspx?hccid=" + MyLiveChat.HCCID + "&name=" + encodeURIComponent(agentname);
			}
			
			if(MyLiveChat.ShowInvite)
			{
				MyLiveChat_InvokeEvent("ShowInvite");
				MyLiveChat_ShowInvite();
				MyLiveChat_HideSmart();
			}
			else
			{
				MyLiveChat_RejectInvite();
			}
		}
		else
		{
			MyLiveChat_HideInvite();
		}
		
		if(!MyLiveChat.HasInvited)
		{
			if(MyLiveChat.ShowSmart&&MyMyLiveChat_SmartTriggers())
			{
				MyLiveChat_InvokeEvent("ShowSmart");
				MyLiveChat_ShowSmart();
			}
			else
			{
				MyLiveChat_HideSmart();
			}
		}
	}
	if(MyLiveChat.SyncType=="ACCEPT")
	{
		if(MyLiveChat.SyncStatus=="READY")
		{
			var url=MyLiveChat_GetDialogUrl("Invite")
			
			var win=window.LiveChatPrePopup;
			if(win!=null)
			{
				win.location.href=url;
				window.LiveChatPrePopup=null;
			}
			else
			{
				try
				{
					win=window.open(url,'',MyLiveChat.DialogOption);
				}
				catch(x)
				{
				}
				if(win==null)
				{
					alert(PopupBlockedMsg);
				}
			}
		}
		if(window.LiveChatPrePopup)
		{
			window.LiveChatPrePopup.close();
			window.LiveChatPrePopup=null;
		}
		if(MyLiveChat.SyncStatus=="EXPIRED")
		{
			
		}
		if(MyLiveChat.SyncStatus=="ERROR")
		{
			
		}

	}
	
	MyLiveChat_InvokeEvent("Loading");

	for(var i=0;i<MyLiveChat.LoadingHandlers.length;i++)
	{
		var handler=MyLiveChat.LoadingHandlers[i]
		handler(handler);
	}

}

function MyLiveChat_RunLoadingHandler(apimode,funcself)
{
	if(MyLiveChat.IsMobile && MyLiveChat.MobileDisabled) return;
	var modedisp=MyLiveChat.FeedbackBehavior=="Hide"?(MyLiveChat.HasReadyAgents?"":"none"):"";

	if( ! MyLiveChat.SyncType )
	{
		if(funcself.Inited)return;
		funcself.Inited=true;

		if(MyLiveChat.ShowButton&&apimode=="chatbutton")
		{
			MyLiveChat_WriteOrSetHTML(apimode,"<img id='MyLiveChatScriptButton' onclick='MyLiveChat_OpenDialog()' src='"+MyLiveChat.ButtonImageUrl
				+"' title='"+MyLiveChat_HtmlEncode(MyLiveChat.ButtonTooltip)+"' border='0' style='cursor:pointer;display:"+modedisp+"'>");
			MyLiveChat.LastButtonImageUrl=MyLiveChat.ButtonImageUrl;
		}
		if(MyLiveChat.ShowLink&&apimode=="chatlink")
		{
			MyLiveChat_WriteOrSetHTML(apimode, "<a id='MyLiveChatScriptLink' onclick='MyLiveChat_OpenDialog()' title='" + MyLiveChat_HtmlEncode(MyLiveChat.LinkTooltip) + "' style='cursor:pointer;display:" + modedisp + "'>" + MyLiveChat.LinkHtmlCode + "</a>");
			MyLiveChat.LastLinkHtmlCode=MyLiveChat.LinkHtmlCode;
		}
		if(MyLiveChat.ShowBox&&apimode=="chatbox")
		{
			MyLiveChat_WriteOrSetHTML(apimode, "<div id='MyLiveChatScriptBox'></div>");
			MyLiveChat_ShowChatBox(modedisp);
		}
		if(apimode=="chatinline")
		{
			MyLiveChat_ShowInPageChat();
		}
		if(apimode=="chatwidget")
		{
			MyLiveChat_ShowChatWidget();
		}
	}
	else
	{
		if(apimode=="chatbutton")
		{
			var btn=document.getElementById("MyLiveChatScriptButton");
			if(btn && MyLiveChat.LastButtonImageUrl!=MyLiveChat.ButtonImageUrl)
			{
				btn.style.display=modedisp;
				btn.setAttribute("title",MyLiveChat.ButtonTooltip||"");
				btn.setAttribute("src",MyLiveChat.ButtonImageUrl);
				MyLiveChat.LastButtonImageUrl=MyLiveChat.ButtonImageUrl;
			}
		}
		if(apimode=="chatlink")
		{
			var btn=document.getElementById("MyLiveChatScriptLink");
			if(btn && MyLiveChat.LastLinkHtmlCode!=MyLiveChat.LinkHtmlCode)
			{
				btn.style.display=modedisp;
				btn.setAttribute("title",MyLiveChat.LinkTooltip||"");
				btn.innerHTML=MyLiveChat.LinkHtmlCode;
				MyLiveChat.LastLinkHtmlCode=MyLiveChat.LinkHtmlCode;
			}
		}
		if(apimode=="chatbox")
		{
			var btn=document.getElementById("MyLiveChatScriptBox");
			if(btn)
			{
				MyLiveChat_ShowChatBox(modedisp);
			}
		}
	}
}






function MyLiveChat_AddCustomData(custdata) {
	MyLiveChat_SetCustomData(MergeCustomData(MyLiveChat.SourceCustomData, custdata));
}

function MergeCustomData(oldcustdata, custdata) {
	if (!oldcustdata)
		return custdata;

	var olddata = null;
	try {
		if(oldcustdata instanceof Array)
			olddata = oldcustdata.concat();
		else
			olddata = eval("_=" + oldcustdata);
	}
	catch (x) {
	}
	if (oldcustdata && olddata == null && olddata.length != 0) {
		olddata = [{ text: "Custom", value: oldcustdata }]
	}
	var newdata = null;
	try {
		if(custdata instanceof Array)
			olddata = custdata.concat();
		else
			newdata = eval("_=" + custdata);
	}
	catch (x) {
	}
	if (custdata&& newdata == null && newdata.length != 0) {
		newdata = [{ text: "Custom", value: custdata }]
	}
	for (var i = 0; i < newdata.length; i++) {
		var text = newdata[i].text;
		var found = false;
		for (var k = 0; k < olddata.length; k++) {
			if (olddata[k].text == text) {
				olddata[k] = newdata[i];
				found = true;
				break;
			}
		}
		if (!found) {
			olddata.push(newdata[i]);
		}
	}
	return ConvertToJson(olddata);
}

function ConvertToJson(rootobj) {

	var sb = [];

	function Process(obj) {
		switch (typeof (obj)) {
			case "undefined":
			case "function":
				sb.push("null");
				return;
			case "string":
				sb.push('"');
				sb.push(obj.replace(/[^A-Za-z0-9\~\`\!\@\#\$\%\^\*\(\)\_\+\-\=\[\]\{\}\;\:\,\.\/\?\|]/g, function (a, b, c) {
					var code = a.charCodeAt(0).toString(16);
					while (code.length < 4) {
						if (code.length == 2)
							return "\\x" + code;
						code = "0" + code;
					}
					return "\\u" + code;
				}));
				sb.push('"');
				return;
			case "number":
				sb.push(obj);
				return;
			case "boolean":
				sb.push(obj ? "true" : "false");
				return;
		}

		if (!obj) {
			sb.push("null");
			return;
		}

		if (obj.constructor == Object) {
			sb.push("{");
			var index = 0;
			for (var p in obj) {
				if (index > 0)
					sb.push(",");
				index++;
				Process(p);
				sb.push(":");
				Process(obj[p]);
			}
			sb.push("}");
		}
		else if (obj instanceof Array) {
			sb.push("[");
			for (var i = 0; i < obj.length; i++) {
				if (i > 0)
					sb.push(",");
				Process(obj[i]);
			}
			sb.push("]");
		}
		else if (obj instanceof Date) {
			sb.push("new Date(" + obj.getTime() + ");");
		}
		else if (obj instanceof RegExp) {
			sb.push("/");
			sb.push(obj.source);
			sb.push("/");
			if (obj.ignoreCase) sb.push("i");
			if (obj.global) sb.push("g");
			if (obj.multiline) sb.push("m");
		}
		else {
			sb.push("null");
		}
	}

	Process(rootobj);

	var res = sb.join("");
	eval("_=" + res);//test
	return res;

}


function CPM_Encode(str)
{
	if(str==null)return "null";
	if(str===true)return "true";
	if(str===false)return "false";
	if(typeof(str)=="number")
		return "n!"+str;
	str=str.split("^").join("^0");
	str=str.split(";").join("^1");
	str=str.split(":").join("^2");
	str=str.split("|").join("^3");
	str=str.split("<").join("^4");
	str=str.split(">").join("^5");
	str=str.split("#").join("^6");
	str=str.split("/").join("^7");
	str=str.split("%").join("^8");
	str=str.split("?").join("^9");
	str=str.split("!").join("^a");
	return str;
}
function CPM_Decode(str)
{
	if(!str||str=="null")return null;
	if(str=="true")return true;
	if(str=="false")return false;
	var arr=str.split('!');
	if(arr[0]=="n")
		return parseFloat(arr[1]);
	str=str.split("^a").join("!");
	str=str.split("^9").join("?");
	str=str.split("^8").join("%");
	str=str.split("^7").join("/");
	str=str.split("^6").join("#");
	str=str.split("^5").join(">");
	str=str.split("^4").join("<");
	str=str.split("^3").join("|");
	str=str.split("^2").join(":");
	str=str.split("^1").join(";");
	str=str.split("^0").join("^");
	return str;
}
function CPM_ObjToStr(obj)
{
	var sb=[]
	for(var key in obj)
	{
		if(!obj.hasOwnProperty(key))continue;
		var val=obj[key];
		if(val===null)continue;
		sb.push(CPM_Encode(key)+":"+CPM_Encode(val));
	}
	if(sb.length==0)return null;
	return sb.join("|");
}
function CPM_StrToObj(str)
{
	if(str==null)return null;
	if(str.length==0)return null;
	var obj={};
	var arr=str.split('|');
	for(var i=0;i<arr.length;i++)
	{
		var pairs=arr[i].split(':');
		obj[CPM_Decode(pairs[0])]=CPM_Decode(pairs[1]);
	}
	return obj;
}


function CPM_JoinToMsg(msgid,nvc,args)
{
	var props="";
	if(nvc!=null)props=CPM_ObjToStr(nvc);
	if(props==null)props="";
	
	if(args==null||args.length==0)
	{
		if(props==null)
			return msgid;
		return msgid+";"+props;
	}
	
	var sb=[];
	sb.push(msgid);
	sb.push(props);
	for(var i=0;i<args.length;i++)
	{
		var arg=args[i];
		if(arg==null)
		{
			sb.push("");
			continue;
		}
		arg=String(arg);
		arg=CPM_Encode(arg);
		sb.push(arg);
	}
	return sb.join(";");
}
function CPM_SplitMsg(msg)
{
	var res={};
	res.nvc={};
	res.args=[];
	
	var pos=msg.indexOf(';');
	if(pos==-1)
	{
		res.msg=msg;
		return res;
	}
	
	res.msg=msg.substring(0,pos);
	
	msg=msg.substring(pos+1);
	pos=msg.indexOf(';');
	if(pos==-1)
	{
		res.nvc=CPM_StrToObj(msg);
		return res;
	}
	
	res.nvc=CPM_StrToObj(msg.substring(0,pos));
	
	var parts=msg.substring(pos+1).split(';');
	for(var i=0;i<parts.length;i++)
	{
		var part=parts[i];
		part=CPM_Decode(part);
		parts[i]=part;
	}
	res.args=parts;
	return res;
}
	
function CPM_SupportLocalData()
{
	return MyLiveChat_SupportLocalData();
}

var CPM_LocalDataCache=null;
var CPM_SetResetTimeoutID=null;
function CPM_SetResetCacheTimer()
{
	if(CPM_SetResetTimeoutID)return;
	CPM_SetResetTimeoutID=setTimeout(function()
	{
		CPM_SetResetTimeoutID=null;
		CPM_LocalDataCache=null;
	},1);
}
function CPM_EnsureLocalCache()
{
	if(CPM_LocalDataCache!=null)
		return;
	var data=MyLiveChat_GetLocalData("CPMLocalData");
	CPM_LocalDataCache=CPM_StrToObj(data)||{};
	CPM_SetResetCacheTimer();
}

function CPM_GetLocalData(name)
{
	switch(name)
	{
		case "cpmhostuid":
		case "cpmhostdtv":
			return MyLiveChat_GetLocalData(name);
	}
	CPM_EnsureLocalCache();
	return CPM_LocalDataCache[name];

}
function CPM_SetLocalData(name,value)
{
	switch(name)
	{
		case "cpmhostuid":
		case "cpmhostdtv":
			MyLiveChat_SetLocalData(name,value);
			return;
	}
	CPM_EnsureLocalCache();
	CPM_LocalDataCache[name]=value;
	var data=CPM_ObjToStr(CPM_LocalDataCache);
	MyLiveChat_SetLocalData("CPMLocalData",data);
}
	

function CreateCrossPageManager(control)
{
	var ta;
	if (location.href.indexOf("mlcdebugusenewmode") != -1)
	{
		ta=document.createElement("TEXTAREA");
		ta.style.cssText="width:900px;height:400px;position:fixed;left:52px;top:150px;";
		document.body.appendChild(ta);
	}
	function trace(msg)
	{
		if(ta)ta.value+=msg+"\r\n";
	}

	var localdataok=CPM_SupportLocalData();
	var cpm=MyLiveChat.CrossPageManager={};
	
	cpm.UID=String(Math.floor((new Date().getTime()-1370000000000)/1000/60)+Math.random());
	
	trace("UID "+cpm.UID);
	
	if(localdataok)
	{
		trace("localdataok "+localdataok);
		if(MyLiveChat.sessionStorage)trace("sessionStorage");
		if(MyLiveChat.userDataBehavior)trace("userDataBehavior");
	}
	
	var stcmsgs=[];
	var ctsmsgs=[];
	
	var chatwin;

	
	cpm.HandleSTCMessage=function(rawmsg)
	{
		if(cpm.HOSTUID)
			return;
		if(cpm.TryResume)
			return;

		var index=stcmsgs.length;
		if(stcmsgs[index-1]==rawmsg)
			return;
		stcmsgs.push(rawmsg);
		CPM_SetLocalData("cpmstc"+index,rawmsg);
		CPM_SetLocalData("cpmstccnt",String(stcmsgs.length));
		//document.title=stcmsgs.length;
		//trace("push cpmstc"+index+":"+rawmsg);
	}
	cpm.HandleCTSMessage=function(rawmsg)
	{
		if(!cpm.HOSTUID)
			return;
		
		var cnt=parseInt(CPM_GetLocalData("cpmctscnt"))||0;
		CPM_SetLocalData("cpmcts"+cnt,rawmsg);
		CPM_SetLocalData("cpmctscnt",cnt+1);
		trace("push cpmcts"+cnt+":"+rawmsg);
		return true;
	}
	
	control._maxdialog=control.maxdialog;
	control._mindialog=control.mindialog;

	var dialogexpanded=false;
	control.maxdialog=function()
	{
		control._maxdialog();
		dialogexpanded=true;
	}
	control.mindialog=function()
	{
		if(chatwin&&chatwin.IsConnected())
		{
			mlcminorquit({message:(MyLiveChat._GetText('CS_INLINECONFIRM_MESSAGE') || "Do you want to collapse the chat window or exit the chat session?"),callback:function(val)
			{
				var disposechat=!val;
				cpm.CollapseInPagePanel(disposechat);
			},container:control._element});
		}
		else
		{
			control._mindialog();
			dialogexpanded=false;
		}
	}
	
	cpm.ExpandInPagePanel=function(startchat)
	{
		control._maxdialog();
		dialogexpanded=true;
		if(startchat)
		{
			control.invoke_recursive("startchat");
		}
	}
	cpm.CollapseInPagePanel=function(disposechat)
	{
		if(!dialogexpanded)
			return;
		trace("CollapseInPagePanel "+disposechat);
		if(chatwin.MyLiveChat.SurveyVisible && disposechat)
		{
			chatwin.surveypanel.call_show(function(){
				control._mindialog();
				dialogexpanded=false;
				var cw=chatwin;
				chatwin=null;
				cpm.Expanded=false;
				clearTimeout(cpm.synctimerid);
				cpm.synctimerid=setTimeout(SyncAsClient,1200);
				CPM_SetLocalData("cpmhostuid","0");
				CPM_SetLocalData("cpmhostdtv",new Date().getTime());
				if(cw)cw._Disconnect(true);
				control.invoke_recursive("disposechat");
				if (window.dispose_cobrowsedialog) window.dispose_cobrowsedialog();
			});
		}
		else
		{
			control._mindialog();
			dialogexpanded=false;
			if(disposechat)
			{
				var cw=chatwin;
				chatwin=null;
				cpm.Expanded=false;
				clearTimeout(cpm.synctimerid);
				cpm.synctimerid=setTimeout(SyncAsClient,1200);
				CPM_SetLocalData("cpmhostuid","0");
				CPM_SetLocalData("cpmhostdtv",new Date().getTime());
				if(cw)cw._Disconnect(true);
				control.invoke_recursive("disposechat");
				if (window.dispose_cobrowsedialog) window.dispose_cobrowsedialog();
			}
		}
	}
			

	
	function host_resetmsgs(cts,stc)
	{
		trace("host_resetmsgs:"+cts+"/"+stc);
		if(cts)
		{
			ctsmsgs=[];
			CPM_SetLocalData("cpmctscnt",0);
			for(var i=0;true;i++)
			{
				if(!CPM_GetLocalData("cpmcts"+i))
					break;
				CPM_SetLocalData("cpmcts"+i,null);
			}
		}
		if(stc=="half")
		{
			for(var i=0;true;i++)
			{
				var rawmsg=CPM_GetLocalData("cpmstc"+i);
				if(!rawmsg)
					break;
				if(rawmsg=="-")
					continue;
				var res=CPM_SplitMsg(rawmsg);
				if(res.msg!="USER_MESSAGE"&&res.msg!="ITEM_ADDED")
				{
					CPM_SetLocalData("cpmstc"+i,"-");
				}
			}
		}
		else if(stc)
		{
			stcmsgs=[];
			CPM_SetLocalData("cpmstccnt",0);
			for(var i=0;true;i++)
			{
				if(!CPM_GetLocalData("cpmstc"+i))
					break;
				CPM_SetLocalData("cpmstc"+i,null);
			}
		}
	}

	function cpm_handlechatevent(name,type,info1,info2)
	{
		if(name=="CONNECTION"&&type=="READY"&&info1!="BYCLIENT")
		{
			trace("host connection ready ");
			host_resetmsgs(true,false);
			SyncAsHost();
		}
	}
	
	function SyncSTCFrom()
	{
		var cnt=parseInt(CPM_GetLocalData("cpmstccnt"));

		trace("sync from "+stcmsgs.length+"/"+cnt);
		
		if(!cnt||cnt<=stcmsgs.length)return;
		
		var lastmsg=null;
		
		while(cnt>stcmsgs.length)
		{
			var rawmsg=CPM_GetLocalData("cpmstc"+stcmsgs.length);
			stcmsgs.push(rawmsg);
			if(rawmsg&&rawmsg!="-"&&rawmsg!=lastmsg)
			{
				trace("cpmstc"+stcmsgs.length+"/"+cnt+":"+rawmsg);
				chatwin._Sync_HandleSTCMessage(rawmsg);
			}
			lastmsg=rawmsg;
		}
	}
	
	cpm.OnFrameLoad=function(win)
	{
		chatwin=win;
		
		if(localdataok)
		{
			chatwin.AttachChatEvent("CONNECTION",cpm_handlechatevent);
		}
	}
		
	function SyncAsHost(bytimer)
	{
		//document.title="HOST "+cpm.UID;
		
		if(!bytimer)trace("SyncAsHost");
		
		cpm.HOSTUID=null;
		var hostid=FindHostCore();
		if(hostid=="0")
		{
			cpm.CollapseInPagePanel(true);
			return;
		}
		
		clearTimeout(cpm.synctimerid);
		cpm.synctimerid=setTimeout(function()
		{
			SyncAsHost(true);
		},600);
		
		if(hostid!=cpm.UID)
		{
			if(bytimer)
			{
				SyncAsClient();
				return;
			}
			
			CPM_SetLocalData("cpmhostuid",cpm.UID);
			trace("register cpmhostuid "+cpm.UID+" / "+hostid);
		}
		CPM_SetLocalData("cpmhostdtv",new Date().getTime());

		if(!stcmsgs.length)
		{
			SyncSTCFrom();
		}
		
		if(!chatwin.chatvars.connected)
		{
			var placename = "SupportSession:Guest:" + MyLiveChat.CCCustomerId;
			chatwin.Connect(placename,"host");
			
		}
		else
		{
			var cnt=parseInt(CPM_GetLocalData("cpmctscnt"))||0;
			while(cnt>ctsmsgs.length)
			{
				var rawmsg=CPM_GetLocalData("cpmcts"+ctsmsgs.length);
				trace("cpmcts"+ctsmsgs.length+" : "+rawmsg);
				ctsmsgs.push(rawmsg);
				chatwin.PushCTSMessage(rawmsg);
			}
		}
	}
	
	function FindHostCore(timeout)
	{
		var cpmhostuid=CPM_GetLocalData("cpmhostuid");
		if(!cpmhostuid)
			return;
		var cpmhostdtv=CPM_GetLocalData("cpmhostdtv");
		if(!cpmhostdtv)
			return;
		if(!timeout)
		{
			if(/MSIE/.test(navigator.userAgent))
				timeout=6600;
			else
				timeout=2800;
		}
		if(parseInt(cpmhostdtv)&&parseInt(cpmhostdtv)>new Date().getTime()-timeout)
		{
			return cpmhostuid;
		}
	}
	function FindHost(timeout)
	{
		var cpmhostuid=FindHostCore(timeout);
		if(cpmhostuid=="0")
			return;
		if(cpm.UID==cpmhostuid)
			return;
		return cpmhostuid;
	}
	
	function SyncAsClient(bytimer)
	{
		//document.title="CLIENT ";
		
		if(!bytimer)trace("SyncAsClient");
		
		var hostid=FindHost();
		
		clearTimeout(cpm.synctimerid);
		cpm.synctimerid=setTimeout(function()
		{
			SyncAsClient(true);
		},1200);
		
		if(hostid=="0")
		{
			if(cpm.HOSTUID)
			{
				cpm.HOSTUID=null;
				cpm.CollapseInPagePanel(true);
			}
			return;
		}
		
		if(hostid!=cpm.HOSTUID)
		{
			trace("hostid : "+hostid+"/"+cpm.HOSTUID);
			
			cpm.HOSTUID=hostid;
			
			if(!hostid)
			{
				if(!FindHost(30000))
				{
					stcmsgs=[];
				}
			}
			
			if(!hostid&&chatwin)
			{
				//host leave
				trace("host leave , change to host mode ");
				chatwin.__ResetChatVars();
				//host_resetmsgs(true,true);
				host_resetmsgs(true,"half");
				SyncAsHost();
				return;
			}
			
		}
		
		if(hostid&&!cpm.Expanded&&MyLiveChat.HasReadyAgents)
		{
			trace("expanding the panel.");
			cpm.Expanded=true;
			cpm.ExpandInPagePanel(true);
			return;
		}
		
		if(hostid&&chatwin&&!chatwin.chatvars.connected)
		{
			trace("set to connected");
			chatwin.chatvars.connected=true;
			chatwin._InvokeChatEvent("CONNECTION",["CONNECTION","READY","BYCLIENT"]);
		}
		
		if(chatwin)
		{
			SyncSTCFrom();
			if(cpm.TryResume)
			{
				cpm.TryResume=false;
				SyncAsHost();
			}
		}
		else if(!hostid)
		{
			if(!FindHost(30000))
			{
				if(!cpm.msgcleared)
				{
					cpm.msgcleared=true;
					
					host_resetmsgs(true,true);
				}
			}
			else if(!cpm.Expanded&&MyLiveChat.HasReadyAgents)	//resume in 30 seconds
			{
				trace("try resume single page host");
				cpm.TryResume=true;
				cpm.Expanded=true;
				cpm.ExpandInPagePanel(true);
			}
		}
		
	}
	
	if(localdataok)
	{
		SyncAsClient();
	}
}




function MyLiveChatInitTemplate()
{
	if(MyLiveChat._TemplateInited)
		return;

	var xmlcode=MyLiveChat.RawTemplate;;
	var xmldoc;
	if(typeof(DOMParser)!="undefined")
	{
		xmldoc=(new DOMParser()).parseFromString(xmlcode,"text/xml");
	}
	else if(window.ActiveXObject)
	{
		xmldoc=(new ActiveXObject("Microsoft.XMLDOM"));
		xmldoc.loadXML(xmlcode);
	}
	else
	{
		var div=document.createElement("DIV");
		div.innerHTML="<xml>"+xmlcode+"</xml>";
		xmldoc=div.firstChild;
	}
		
	function translate_value(val)
	{
		if(val&&val.charAt(0)=="@")
		{
			val=val.substring(1);
			return MyLiveChat._GetText(val) || val;
		}
		return val;
	}

	jsml.parse_xmldoc(xmldoc,null,null,null,translate_value);
	
	MyLiveChat._TemplateInited=true;

}



function mlcwidget_findelements(p, idcls) {
	var sb = [];
	function fillelements(node) {
		var cns = node.childNodes;
		if (!cns||!cns.length)
			return;
		for (var i = 0; i < cns.length; i++) {
			var n = cns[i];
			if (n.nodeType != 1)
				continue;
			if (n.id == idcls || n.className == idcls)
				sb.push(n);
			fillelements(n);
		}
	}
	fillelements(p);
	return sb;
}

function mlcwidget_calcpoint(option, mode, w, h) {
	switch (mode) {
		case "float":
		case "topleft":
			return { top: 0, left: 0 };
		case "topcenter":
			return { top: 0, left: Math.floor(w / 2) }
		case "topright":
			return { top: 0, left: w }
		case "middleleft":
			return { top: Math.floor(h / 2), left: 0 };
		case "middlecenter":
			return { top: Math.floor(h / 2), left: Math.floor(w / 2) }
		case "middleright":
			return { top: Math.floor(h / 2), left: w }
		case "bottomleft":
			return { top: h, left: 0 };
		case "bottomcenter":
			return { top: h, left: Math.floor(w / 2) }
		case "bottomright":
			return { top: h, left: w }
		default:
			return { top: h, left: w }
	}
}

function mlcwidget_calcbodypoint(option, mode) {
	if (!mode) mode = "bottomright";

	var de = document.compatMode == "BackCompat" ? document.body : document.documentElement;
	var bw = de.clientWidth;
	var bh = de.clientHeight;

	var padding = option.bodypadding || 0;

	if (mode != "float") {
		var p = mlcwidget_calcpoint(option, mode, bw, bh);
		if (mode.indexOf("left") != -1)
			p.left += padding;
		if (mode.indexOf("right") != -1)
			p.left -= padding;
		if (mode.indexOf("top") != -1)
			p.top += padding;
		if (mode.indexOf("bottom") != -1)
			p.top -= padding;
		return p;
	}
	return mlcwidget_calcpoint(mode, bw, bh);
}

function mlcwidget_nextposition(option, div) {
	
	div.updateposition = function () {
		mlcwidget_nextposition(option, div);
	}

	var prevpp = div.prevpp;
	var isinit = !prevpp;
	var bp = mlcwidget_calcbodypoint(option, isinit ? option.startpos : option.position);
	//var pp = mlcwidget_calcpoint(option, option.anchorpos||option.position, div.offsetWidth, div.offsetHeight)
	var img = div.firstChild;
	var pp = mlcwidget_calcpoint(option, option.anchorpos || option.position, img.width || div.offsetWidth, img.height || div.offsetHeight);

	var tl = bp.left - pp.left + option.offsetx + (option.liveoffsetx || 0) + (option.dragoffsetx || 0)
				+ Math.max(document.documentElement.scrollLeft, document.body.scrollLeft);
	var tt = bp.top - pp.top + option.offsety + (option.liveoffsety|| 0) + (option.dragoffsety || 0)
				+ Math.max(document.documentElement.scrollTop, document.body.scrollTop);

	if (prevpp) {
		var cl = parseInt(div.style.left) + prevpp.left - pp.left;
		var ct = parseInt(div.style.top) + prevpp.top - pp.top;
		var factor = option.movefactor||8;
		var nl = Math.ceil((tl - cl) / factor);
		var nt = Math.ceil((tt - ct) / factor);
		function minmove(v) {
			if (v < factor)
				return factor;
			return v
		}
		nl = nl > 0 ? Math.min(tl - cl, minmove(nl)) : -Math.min(cl - tl, minmove(-nl));
		nt = nt > 0 ? Math.min(tt - ct, minmove(nt)) : -Math.min(ct - tt, minmove(-nt));
		tl = cl + nl;
		tt = ct + nt;
	}

	div.style.left = tl + "px";
	div.style.top = tt + "px";

	div.prevpp = pp;

}



MlcBuidinWidget = {}
MlcBuidinWidget.AgentStatus = null;
MlcBuidinWidget.Instances = {}
MlcBuidinWidget.Activate = function (option) {
	this.AgentStatus = MyLiveChat.HasReadyAgents;
	if (!option) option = {};
	var defval = {
		name: "MlcBuidinWidget",
		offsetx: 0,
		offsety: 0,
		bodypadding: MyLiveChat.WidgetBodyPadding,
		startpos: MyLiveChat.WidgetStartPos,
		position: MyLiveChat.WidgetPosition,
		postimer: 15,
		hideoffsetx: MyLiveChat.WidgetOffsetX,
		hideoffsety: MyLiveChat.WidgetOffsetY,
		showoffsetx: MyLiveChat.WidgetHoverOffsetX,
		showoffsety: MyLiveChat.WidgetHoverOffsetY,
		onlineimageurl:MyLiveChat.WidgetOnlineImageUrl,
		offlineimageurl: MyLiveChat.WidgetOfflineImageUrl,
		onlineimageurlhover: MyLiveChat.WidgetHoverOnlineImageUrl,
		offlineimageurlhover: MyLiveChat.WidgetHoverOfflineImageUrl,
		_:0
	};
	
	for (var p in defval)
		if (!(p in option))
			option[p] = defval[p];

	var inst = MlcBuidinWidget.Instances[option.name];
	if (inst == null)
		inst = MlcBuidinWidget.Instances[option.name] = new MlcBuidinWidget.CreateInstance(option);
	else
		inst.ApplyOption(option);
	return inst;
}
MlcBuidinWidget.CreateInstance = function (option) {
	var oldoption;
	var vars = this;

	vars.div = document.createElement("DIV");
	vars.div.style.position="absolute";
	vars.div.style.cursor="pointer";
	vars.div.style.width="1px";
	vars.div.style.height = "1px";
	vars.div.style.zIndex = "98765";
	vars.div.style.overflow='visible';
	vars.div.innerHTML = "<img border='0' style='max-width:none!important;max-height:none!important;'/>";
	vars.img=vars.div.firstChild;


	document.body.insertBefore(vars.div, document.body.firstChild);

	vars.liveoffsetx = option.hideoffsetx;
	vars.liveoffsety = option.hideoffsety;
	vars.div.onmouseover = function () {
		vars.liveoffsetx = option.showoffsetx;
		vars.liveoffsety = option.showoffsety;
	}
	vars.div.onmouseout = function () {
		vars.liveoffsetx = option.hideoffsetx;
		vars.liveoffsety = option.hideoffsety;
	}
	vars.div.onclick = function () {
		MyLiveChat_OpenDialog();
	}

	function UpdatePosition() {
		clearTimeout(vars.timerid);
		vars.timerid = setTimeout(UpdatePosition, option.postimer);
		option.liveoffsetx = vars.liveoffsetx;
		option.liveoffsety = vars.liveoffsety;
		mlcwidget_nextposition(option, vars.div);
	}

	this.ApplyOption = function (newoption) {

		oldoption = option;
		option = newoption;
		
		option.runtime_imageurl = MyLiveChat.HasReadyAgents ? option.onlineimageurl : option.offlineimageurl;
		option.runtime_imageurlhover = MyLiveChat.HasReadyAgents ? option.onlineimageurlhover : option.offlineimageurlhover;

		for (var p in option) {
			if (oldoption!=option && option[p] == oldoption[p])
				continue;
			switch (p) {
				case "runtime_imageurl":
					vars.img.src = option.runtime_imageurl;
					vars.img.setAttribute("imageurl", option.runtime_imageurl);
					break;
				case "runtime_imageurlhover":
					vars.img.setAttribute("imageurlhover", option.runtime_imageurlhover);
					break;
			}
		}
		
		vars.img.onload = UpdatePosition;
		vars.img.onmouseover = function ()
		{
			if (this.getAttribute("imageurlhover"))
				this.src = this.getAttribute("imageurlhover");
		}
		vars.img.onmouseout = function ()
		{
			//when have hover image, restore old image
			if (this.getAttribute("imageurlhover"))
				this.src = this.getAttribute("imageurl");
		}
		
		UpdatePosition();
	}

	this.ApplyOption(option);
	
}








function MyLiveChat_CalcBodyPoint(mode, bp)
{
	if(!mode)mode="bottomright";
	if(!bp && bp!==0) bp = 5;
	
	var de=document.compatMode=="BackCompat"?document.body:document.documentElement;
	var bw=de.clientWidth;
	var bh=de.clientHeight;

	if(navigator.standalone===false)
	{
		bw = window.innerWidth;
		bh = window.innerHeight;
	}
	
	if(mode!="float")
	{
		var p=MyLiveChat_CalcPoint(mode,bw,bh);
		if(mode.indexOf("left")!=-1)
			p.left+=bp;
		if(mode.indexOf("right")!=-1)
			p.left-=bp;
		if(mode.indexOf("top")!=-1)
			p.top+=bp;
		if(mode.indexOf("bottom")!=-1)
			p.top-=bp;
		return p;
	}
	
	return MyLiveChat_CalcPoint(mode,bw,bh);
}
function MyLiveChat_CalcPoint(mode,w,h)
{
	switch(mode)
	{
		case "float":
		case "topleft":
			return {top:0,left:0};
		case "topcenter":
			return {top:0,left:Math.floor(w/2)}
		case "topright":
			return {top:0,left:w}
		case "middleleft":
			return {top:Math.floor(h/2),left:0};
		case "middlecenter":
			return {top:Math.floor(h/2),left:Math.floor(w/2)}
		case "middleright":
			return {top:Math.floor(h/2),left:w}
		case "bottomleft":
			return {top:h,left:0};
		case "bottomcenter":
			return {top:h,left:Math.floor(w/2)}
		case "bottomright":
			return {top:h,left:w}
		default:
			return {top:h,left:w}
	}
}
function MyLiveChat_MovePoint(src,dst)
{
	return dst;
}


//uniquekey - (userid/email/guid..etc)
function MyLiveChat_SetUserName(displayname,uniquekey)
{
	MyLiveChat.SourceName=displayname;
	MyLiveChat.SourceKey=uniquekey;
}
function MyLiveChat_SetEmail(email)
{
	MyLiveChat.SourceEmail=email;
}
function MyLiveChat_SetDepartment(department)
{
	MyLiveChat.SourceDepartment=department;
}
function MyLiveChat_SetSubject(subject)
{
	MyLiveChat.SourceSubject=subject;
}
function MyLiveChat_SetQuestion(question)
{
	MyLiveChat.SourceQuestion=question;
}
function MyLiveChat_SetCustomData(data)
{
	if (data instanceof Array)
		data = ConvertToJson(data);
	MyLiveChat.SourceCustomData=data;
}
function MyLiveChat_SetContextData(data)
{
	MyLiveChat.SourceContextData=data;
}
function MyLiveChat_SetProductName(name)
{
	MyLiveChat.SourceProductName=name;
}
function MyLiveChat_SetProductKey(key)
{
	MyLiveChat.SourceProductKey=key;
}

function MyLiveChat_OnUserIsOnline(isinit)
{
	var uadt=parseInt(MyLiveChat_GetLocalData("uadt"))||0;
	MyLiveChat_SetLocalData("uadt",String(new Date().getTime()))
	if(isinit!==true&&uadt&&new Date().getTime()-uadt>5*60*1000)
	{
		clearTimeout(MyLiveChat.RequestTimerId);
		MyLiveChat_ChangeUrl("VISIT");
	}
}


if (!MyLiveChat.IsDesignMode) {

	if (document.addEventListener) {
		document.addEventListener("mouseover", MyLiveChat_OnUserIsOnline, false);
		document.addEventListener("keydown", MyLiveChat_OnUserIsOnline, false);
		window.addEventListener("focus", MyLiveChat_OnUserIsOnline, false);
		window.addEventListener("blur", MyLiveChat_OnUserIsOnline, false);
	}
	else {
		document.attachEvent("mouseover", MyLiveChat_OnUserIsOnline);
		document.attachEvent("onkeydown", MyLiveChat_OnUserIsOnline);
		window.attachEvent("focus", MyLiveChat_OnUserIsOnline);
		window.attachEvent("blur", MyLiveChat_OnUserIsOnline);
	}

	MyLiveChat_OnUserIsOnline(true);



	if (!MyLiveChat.CCCustomerId) {
		MyLiveChat.CCCustomerId = MyLiveChat_GetLocalData("CCCustomerId") || MyLiveChat.RandomID;
	}

	MyLiveChat_SetLocalData("CCCustomerId", MyLiveChat.CCCustomerId, 86400 * 365);

	

	MyLiveChat_Initialize()


}